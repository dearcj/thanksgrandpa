<html><head>    <meta charset="UTF-8">    <meta name="viewport" content="    user-scalable=no, initial-scale=0.5, minimum-scale=0.5, maximum-scale=1, user-scalable=0" />    <meta name="apple-mobile-web-app-capable" content="yes" />    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">    <meta content="yes" name="apple-mobile-web-app-capable">    <meta content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" name="viewport">    <title>ThanksGrandpa</title>    <style>        body {            margin: 0;            padding: 0;            background-color: #000000;        }    </style>    <script src="localization.js"></script>    <script src="libs/soundjs-0.5.2.min.js"></script>    <script src="libs/pixi.dev.js"></script>    <script src="libs/GreenSock/TweenMax.min.js"></script>    <script src="libs/p2.min.js"></script>    <script src="libs/vec2.min.js"></script>     <script src="CjEngine/scripts/ZSound.js"></script>     <script src="CjEngine/scripts/PlayerData.js"></script>     <script src="CjEngine/scripts/LevelManager.js"></script>     <script src="CjEngine/scripts/Utils.js"></script>     <script src="CjEngine/scripts/Stages/StageManager.js"></script>     <script src="CjEngine/scripts/Stages/CustomStage.js"></script>     <script src="CjEngine/scripts/Stages/MainMenu.js"></script>     <script src="CjEngine/scripts/Stages/LevSel.js"></script>     <script src="CjEngine/scripts/Stages/GameStage.js"></script>     <script src="CjEngine/scripts/Stages/Credits.js"></script>     <script src="CjEngine/scripts/Stages/WinGame.js"></script>     <script src="CjEngine/scripts/Stages/AchStage.js"></script>     <script src="CjEngine/scripts/Stages/CharStage.js"></script>     /////////////////////////////////////////////////////     //GAME OBJECTS     /////////////////////////////////////////////////////     <script src="CjEngine/scripts/ZPool.js"></script>     <script src="CjEngine/scripts/CObj.js"></script>     <script src="CjEngine/scripts/CBomb.js"></script>     <script src="CjEngine/scripts/CButton.js"></script>     <script src="CjEngine/scripts/ZCJoint.js"></script>     <script src="CjEngine/scripts/CTextField.js"></script>     <script src="CjEngine/scripts/Chest.js"></script>     <script src="CjEngine/scripts/Coin.js"></script>     <script src="CjEngine/scripts/Tomato.js"></script>     <script src="CjEngine/scripts/Chicken.js"></script>     <script src="CjEngine/scripts/Generator.js"></script>     <script src="CjEngine/scripts/PanelSpeed.js"></script>     <script src="CjEngine/scripts/Propeller.js"></script>     <script src="CjEngine/scripts/PowerField.js"></script>     <script src="CjEngine/scripts/Notification.js"></script>     <script src="CjEngine/scripts/CNotArrow.js"></script>     <script src="CjEngine/scripts/CHPBar.js"></script>     <script src="CjEngine/scripts/LiveObjects/CLiveObj.js"></script>     <script src="CjEngine/scripts/LiveObjects/CPlayer.js"></script>     <script src="CjEngine/scripts/CBullet.js"></script>     <script src="CjEngine/scripts/FloorObj.js"></script>     <script src="CjEngine/scripts/LauncherBG.js"></script>     <script src="CjEngine/scripts/Monsters/CMonster.js"></script>     <script src="CjEngine/scripts/Monsters/MM.js"></script>     <script src="CjEngine/scripts/AM.js"></script>     <script src="CjEngine/scripts/CCoin.js"></script>     <script src="CjEngine/scripts/Weapons/CWeapon.js"></script>     <script src="CjEngine/scripts/Weapons/CPistol.js"></script>     <script src="CjEngine/scripts/Weapons/WeapBalance.js"></script>     <script src="https://ajax.aspnetcdn.com/ajax/mobileservices/MobileServices.Web-1.2.5.min.js"></script>     <script src="CjEngine/scripts/init.js"></script>     /////////////////////////////////////////////////////     //GAME OBJECTS     /////////////////////////////////////////////////////    <!-- <script src="CjEngine/scripts/all.min.js"></script>    <script src="https://vk.com/js/api/xd_connection.js?2" type="text/javascript"></script>    <div id="login_button" onclick=""></div>    -->    <script src="CjEngine/scripts/resizeend.coffee.js"></script>    <script src="//vk.com/js/api/xd_connection.js?2"  type="text/javascript">    </script>    <script type="text/javascript">        VK.init(function() {            console.log("INIT OK");        }, function() {            console.log("INIT FAILED");        }, '5.27');    </script>  </head>  <body>  <script>  var isLoading = true;  var logoloading = document.createElement("img");  logoloading.setAttribute("src", "logo_ingame.png");  logoloading.setAttribute("style", "position:absolute;left:50%;top:50%;margin-left: -160px;");  var sponsorUrl = "http://m.softgames.com/";  window.openSponsorWindow = null;  logoloading.addEventListener("mousedown",  window.openSponsorWindow, false);  logoloading.addEventListener("touchstart",  window.openSponsorWindow, false);  var assetsLoaded = 0;  //////////////STAGE  var container, graphics, zoom, world, boxShape, boxBody, planeBody, planeShape;  var interactive = true;  var stage = new PIXI.Stage(0xFFFFFF);  var loadingScreen = new PIXI.Graphics();  stage.addChild(loadingScreen);  requestAnimFrame(animate);  var SCR_WIDTH = 960;  var SCR_HEIGHT = 640;  var SCR_SCALE = 1.0;  var FRAME_RATE = 60;  var renderer = new PIXI.CanvasRenderer(SCR_WIDTH, SCR_HEIGHT);  window.iphone3 = false;  if (Math.max(window.innerWidth, window.innerHeight) <= 360)      window.iphone3 = true;  window.addScale = 1;  /*if (window.iphone3)  {      window.addScale = 2;  }*/  var assetsToLoader = [      "levels/levach.json",      "levels/mainmenu.json",      "levels/hud.json",      "levels/plantPart1.json",      "levels/levelmenu.json",      "levels/levelselect.json",      "levels/levelwin.json",      "levels/levelsoundcheck.json",      "levels/levelgameover.json",      "levels/credits.json",      "levels/wingame.json",      "levels/rotatescreen.json",      "levels/levchar.json",      "imgtps/bg.json",      "imgtps/guiatlas.json",      "imgtps/pussyatlas.json",      "imgtps/kyr.xml"  ];  window.prevW = window.innerWidth;  window.prevH = window.innerHeight;  //   if (window.iphone3)  //  assetsToLoader.push("imgtps/fontBigChickenSmall.xml"); else  //assetsToLoader.push("imgtps/fontBigChicken.xml");  var loader = new PIXI.AssetLoader(assetsToLoader);  document.body.appendChild(renderer.view);  var dataStorage;  if (window.localStorage && window.localStorage["gameData"] != undefined)  {      dataStorage = JSON.parse(window.localStorage["gameData"]);  }  if (!dataStorage || dataStorage == "undefined") {      dataStorage = {completedLevels: -1};      window.localStorage["gameData"] = JSON.stringify(dataStorage);  }  var updateDS = function()  {      window.localStorage["sdgameData"] = JSON.stringify(dataStorage);  }  var gameStage = new GameStage();  var mainMenu = new MainMenu();  var credStage = new Credits();  var winGameStage = new WinGame();  var achStage = new AchStage();  var levSel = new LevSel();  var date = new Date();  var charStage = new CharStage();  PIXI.scaleModes.DEFAULT = 0;  SM.inst.addLayersToStage();  document.body.appendChild(logoloading);  pool = new ZPool();  FRAME_DELAY = 1000 / FRAME_RATE;  window.addEventListener('resize', onWindowResize, false);  window.addEventListener('resizeend', onWindowResize, false);  rescale();  onWindowResize();  window.lastLoop = 0;  dbInit();  //4651043  loader.onComplete =  onAssetsLoaded;  loader.load();  loader.onProgress = onAssetsProgress;  var options = {      gravity:[0,9.82]  };  var soundLoadedFunction = null;  world = new p2.World(options);  function startGame()  {  }  function onAssetsProgress(evt){      assetsLoaded++;      if(evt.json) {          if (evt.json.objects != undefined) {              LevelManager.levels[evt.url] = evt.json;          }      }  }  function assetsButSoundsLoaded()  {      ZSound.soundLoadedFunction = onAssetsLoaded;     /* ZSound.Init([          {id: "CLICK", src: "CLICK2.ogg"},          {id: "collectMoney", src: "collectMoney.ogg"},          {id: "unlock", src: "unlock.ogg"},          {id: "rocketboom", src: "rocketboom.ogg"},          {id: "levelWIN", src: "levelWIN.ogg"},          {id: "electro1", src: "electro1.ogg"},          {id: "trackmenu", src: "trackmenu.ogg"},          {id: "track2", src: "track2.ogg"},          {id: "track3", src: "track3.ogg"},          {id: "track6", src: "track6.ogg"},          {id: "track4", src: "track4.ogg"}      ]);*/  }  function onAssetsLoaded() {      isLoading = false;      stage.removeChild(loadingScreen);      loadingScreen = null;      gameStage.currentLevel = 1;      if (dataStorage.soundEnabled == false ||dataStorage.soundEnabled == undefined || ZSound.available == false) {          ZSound.Mute();      } else ZSound.UnMute();       logoloading.removeEventListener("mousedown",  window.openSponsorWindow);      logoloading.removeEventListener("touchstart",  window.openSponsorWindow);      document.body.removeChild(logoloading)      logoloading = null;      window.addEventListener("orientationchange", orientchange, false);      orientchange();      window.txtFps = new PIXI.Text("FPS:", {fill: "white", font: "bold 40px Arial", strokeThickness: 8, stroke: "black"});      window.txtFps.position.y = SCR_HEIGHT - 24;      window.txtFps.scale.x = 0.5;      window.txtFps.scale.y = 0.5;      SM.inst.fontLayer.addChild(window.txtFps);      setTimeout("window.scrollTo(0, 1)", 10);  }  function orientchange()  {      var orientation = window.orientation;      switch(orientation) {          case 0: addRotationText();              break;          case 90: removeRotationText();              break;          case -90: removeRotationText();              break; }  }  function removeRotationText()  {      document.body.removeChild(window.rotatebg)      window.rotatebg = null;      document.body.removeChild(window.icorotate)      window.icorotate = null;  }  function addRotationText()  {      if (window.icorotate) return;      window.rotatebg = document.createElement("img")      window.rotatebg.setAttribute("src", "rotatebg.png")      document.body.appendChild(window.rotatebg);      window.icorotate = document.createElement("img")      window.icorotate.setAttribute("src", "rotatescreen.png")      document.body.appendChild(window.icorotate);      rescale();  }  function applyRatio(displayObj, ratio) {      if (ratio == 1) return;      var object = displayObj;      object.position.x = object.position.x * ratio;      object.position.y = object.position.y * ratio;      if (object.children.length == 0) {          object.scale.x = object.scale.x * ratio;          object.scale.y = object.scale.y * ratio;      } else {          if (CObj.checkType(object, PIXI.Sprite) || CObj.checkType(object, PIXI.MovieClip) ) {              object.scale.x = object.scale.x* ratio;              object.scale.y = object.scale.y * ratio;          } else              for (var i = 0; i < object.children.length; i++) {                  applyRatio(object.children[i], ratio);              }      }  }  function rescale() {      rescTimeout = null;      SCR_SCALE = Math.min(window.innerWidth / SCR_WIDTH, window.innerHeight / SCR_HEIGHT)      renderer.resize(SCR_WIDTH * SCR_SCALE, SCR_HEIGHT * SCR_SCALE);      var ox = window.innerWidth / 2 - SCR_WIDTH * SCR_SCALE / 2;      var oy = window.innerHeight / 2 - SCR_HEIGHT * SCR_SCALE / 2;      renderer.view.setAttribute("style", "position:absolute;left:"+ ox.toString()+ "px;top:" + oy.toString() + "px");      if (window.icorotate)      {          window.rotatebg.width = window.innerWidth - 2*ox;          window.rotatebg.height = window.innerHeight;          window.rotatebg.setAttribute("style", "position:absolute;left:"+Math.round(ox)+"px;top:0px");          window.icorotate.width = 325*SCR_SCALE;          window.icorotate.height = 325*SCR_SCALE;          var lf = Math.round((window.innerWidth / 2));          var tp = Math.round((window.innerHeight / 2)) - window.icorotate.height / 2;          window.icorotate.setAttribute("style", "position:absolute;left:" + lf.toString() + "px;top:" + tp.toString() + "px;margin-left:"+(-window.icorotate.width/2).toString() + "px;");      }      if (logoloading)      {          logoloading.width = 320*SCR_SCALE;          logoloading.height = 80*SCR_SCALE;          var lf = Math.round((window.innerWidth / 2));          var tp = Math.round(( window.innerHeight / 2));          logoloading.setAttribute("style", "position:absolute;left:" + lf.toString() + "px;top:" + tp.toString() + "px;margin-left:"+(-logoloading.width/2).toString() + "px;");      }  }  function onWindowResize() {      if (rescTimeout) clearTimeout(rescTimeout);      //rescale();      rescTimeout = setTimeout(rescale, 300);  }  function animate() {      requestAnimFrame(animate);      if (isLoading) {          var p = (assetsLoaded / assetsToLoader.length);//*0.5 + 0.5*(ZSound.loaded / ZSound.total) + 0.07;          if (p > 1) p = 1;        //  loadingScreen.clear();          loadingScreen.beginFill(0xAA4444);          loadingScreen.drawRect(SCR_WIDTH / 2 - 200, SCR_HEIGHT / 2 - 100, 400, 32);          loadingScreen.endFill();          loadingScreen.beginFill(0xFFAAAA);          loadingScreen.drawRect(SCR_WIDTH / 2 - 200 + 2, SCR_HEIGHT / 2 - 100 + 2, (400 - 4) * p, 32 - 4);          loadingScreen.endFill();          logoloading.x = SCR_SCALE * SCR_WIDTH / 2;          logoloading.y = SCR_SCALE * SCR_HEIGHT / 2;      } else      {          if (SM.inst)              SM.inst.process();           var thisLoop = new Date;           fps = 1000 / (thisLoop - lastLoop);           lastLoop = thisLoop;           txtFps.setText("FPS: " + parseInt(fps));      }      applyRatio(stage, SCR_SCALE);      renderer.render(stage);      applyRatio(stage, 1.0/(SCR_SCALE));  }  </script>  </body>  </html>