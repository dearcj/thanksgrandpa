/*

 pixi.js - v1.6.0
 Copyright (c) 2012-2014, Mat Groves
 http://goodboydigital.com/

 Compiled: 2014-07-18

 pixi.js is licensed under the MIT License.
 http://www.opensource.org/licenses/mit-license.php
*/
if(!GLMAT_EPSILON)var GLMAT_EPSILON=1E-6;if(!GLMAT_ARRAY_TYPE)var GLMAT_ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;var glMatrix={setMatrixArrayType:function(c){GLMAT_ARRAY_TYPE=c}};"undefined"!==typeof exports&&(exports.glMatrix=glMatrix);
var vec2={create:function(){var c=new GLMAT_ARRAY_TYPE(2);c[0]=0;c[1]=0;return c},clone:function(c){var d=new GLMAT_ARRAY_TYPE(2);d[0]=c[0];d[1]=c[1];return d},fromValues:function(c,d){var f=new GLMAT_ARRAY_TYPE(2);f[0]=c;f[1]=d;return f},copy:function(c,d){c[0]=d[0];c[1]=d[1];return c},set:function(c,d,f){c[0]=d;c[1]=f;return c},add:function(c,d,f){c[0]=d[0]+f[0];c[1]=d[1]+f[1];return c},subtract:function(c,d,f){c[0]=d[0]-f[0];c[1]=d[1]-f[1];return c}};vec2.sub=vec2.subtract;
vec2.multiply=function(c,d,f){c[0]=d[0]*f[0];c[1]=d[1]*f[1];return c};vec2.mul=vec2.multiply;vec2.divide=function(c,d,f){c[0]=d[0]/f[0];c[1]=d[1]/f[1];return c};vec2.div=vec2.divide;vec2.min=function(c,d,f){c[0]=Math.min(d[0],f[0]);c[1]=Math.min(d[1],f[1]);return c};vec2.max=function(c,d,f){c[0]=Math.max(d[0],f[0]);c[1]=Math.max(d[1],f[1]);return c};vec2.scale=function(c,d,f){c[0]=d[0]*f;c[1]=d[1]*f;return c};vec2.distance=function(c,d){var f=d[0]-c[0],k=d[1]-c[1];return Math.sqrt(f*f+k*k)};
vec2.dist=vec2.distance;vec2.squaredDistance=function(c,d){var f=d[0]-c[0],k=d[1]-c[1];return f*f+k*k};vec2.sqrDist=vec2.squaredDistance;vec2.length=function(c){var d=c[0];c=c[1];return Math.sqrt(d*d+c*c)};vec2.len=vec2.length;vec2.squaredLength=function(c){var d=c[0];c=c[1];return d*d+c*c};vec2.sqrLen=vec2.squaredLength;vec2.negate=function(c,d){c[0]=-d[0];c[1]=-d[1];return c};vec2.normalize=function(c,d){var f=d[0],k=d[1],f=f*f+k*k;0<f&&(f=1/Math.sqrt(f),c[0]=d[0]*f,c[1]=d[1]*f);return c};
vec2.dot=function(c,d){return c[0]*d[0]+c[1]*d[1]};vec2.cross=function(c,d,f){d=d[0]*f[1]-d[1]*f[0];c[0]=c[1]=0;c[2]=d;return c};vec2.lerp=function(c,d,f,k){var h=d[0];d=d[1];c[0]=h+k*(f[0]-h);c[1]=d+k*(f[1]-d);return c};vec2.transformMat2=function(c,d,f){var k=d[0];d=d[1];c[0]=f[0]*k+f[2]*d;c[1]=f[1]*k+f[3]*d;return c};vec2.transformMat2d=function(c,d,f){var k=d[0];d=d[1];c[0]=f[0]*k+f[2]*d+f[4];c[1]=f[1]*k+f[3]*d+f[5];return c};
vec2.transformMat3=function(c,d,f){var k=d[0];d=d[1];c[0]=f[0]*k+f[3]*d+f[6];c[1]=f[1]*k+f[4]*d+f[7];return c};vec2.transformMat4=function(c,d,f){var k=d[0];d=d[1];c[0]=f[0]*k+f[4]*d+f[12];c[1]=f[1]*k+f[5]*d+f[13];return c};vec2.forEach=function(){var c=vec2.create();return function(d,f,k,h,a,b){f||(f=2);k||(k=0);for(h=h?Math.min(h*f+k,d.length):d.length;k<h;k+=f)c[0]=d[k],c[1]=d[k+1],a(c,c,b),d[k]=c[0],d[k+1]=c[1];return d}}();vec2.str=function(c){return"vec2("+c[0]+", "+c[1]+")"};
"undefined"!==typeof exports&&(exports.vec2=vec2);
!function(c){if("object"==typeof exports)module.exports=c();else if("function"==typeof define&&define.amd)define(c);else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof global?d=global:"undefined"!=typeof self&&(d=self);d.p2=c()}}(function(){return function d(f,k,h){function a(e,m){if(!k[e]){if(!f[e]){var q="function"==typeof require&&require;if(!m&&q)return q(e,!0);if(b)return b(e,!0);throw Error("Cannot find module '"+e+"'");}q=k[e]={exports:{}};f[e][0].call(q.exports,function(b){var d=
f[e][1][b];return a(d?d:b)},q,q.exports,d,f,k,h)}return k[e].exports}for(var b="function"==typeof require&&require,e=0;e<h.length;e++)a(h[e]);return a}({1:[function(d,f,k,h,a,b,e){(function(a,b,e,n,f,t,h,r,x){function e(a,b,g){if(!(this instanceof e))return new e(a,b,g);var d=typeof a;if("base64"===b&&"string"===d)for(a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");0!==a.length%4;)a+="=";var m;if("number"===d)m=J(a);else if("string"===d)m=e.byteLength(a,b);else if("object"===d)m=J(a.length);else throw Error("First argument needs to be a number, array or string.");
var p;e._useTypedArrays?p=E(new Uint8Array(m)):(p=this,p.length=m,p._isBuffer=!0);if(e._useTypedArrays&&"function"===typeof Uint8Array&&a instanceof Uint8Array)p._set(a);else{var l=a;if(O(l)||e.isBuffer(l)||l&&"object"===typeof l&&"number"===typeof l.length)for(b=0;b<m;b++)e.isBuffer(a)?p[b]=a.readUInt8(b):p[b]=a[b];else if("string"===d)p.write(a,0,b);else if("number"===d&&!e._useTypedArrays&&!g)for(b=0;b<m;b++)p[b]=0}return p}function l(a,b,g,d){for(var m=e,p=[],l=0;l<b.length;l++)p.push(b.charCodeAt(l)&
255);return m._charsWritten=R(p,a,g,d)}function u(a,b,e){var g="";for(e=Math.min(a.length,e);b<e;b++)g+=String.fromCharCode(a[b]);return g}function v(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+1<a.length,"Trying to read beyond buffer length"));g=a.length;if(!(b>=g))return e?(e=a[b],b+1<g&&(e|=a[b+1]<<8)):(e=a[b]<<8,b+1<g&&(e|=a[b+1])),e}function p(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(void 0!==b&&null!==
b,"missing offset"),F(b+3<a.length,"Trying to read beyond buffer length"));g=a.length;if(!(b>=g)){var d;e?(b+2<g&&(d=a[b+2]<<16),b+1<g&&(d|=a[b+1]<<8),d|=a[b],b+3<g&&(d+=a[b+3]<<24>>>0)):(b+1<g&&(d=a[b+1]<<16),b+2<g&&(d|=a[b+2]<<8),b+3<g&&(d|=a[b+3]),d+=a[b]<<24>>>0);return d}}function y(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+1<a.length,"Trying to read beyond buffer length"));if(!(b>=a.length))return a=v(a,b,e,!0),a&32768?-1*(65535-
a+1):a}function A(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+3<a.length,"Trying to read beyond buffer length"));if(!(b>=a.length))return a=p(a,b,e,!0),a&2147483648?-1*(4294967295-a+1):a}function z(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(b+3<a.length,"Trying to read beyond buffer length"));return W.read(a,b,e,23,4)}function D(a,b,e,g){g||(F("boolean"===typeof e,"missing or invalid endian"),F(b+7<a.length,
"Trying to read beyond buffer length"));return W.read(a,b,e,52,8)}function C(a,b,e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),F(void 0!==e&&null!==e,"missing offset"),F(e+1<a.length,"trying to write beyond buffer length"),U(b,65535));var m=a.length;if(!(e>=m))for(d=0,m=Math.min(m-e,2);d<m;d++)a[e+d]=(b&255<<8*(g?d:1-d))>>>8*(g?d:1-d)}function H(a,b,e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),
F(void 0!==e&&null!==e,"missing offset"),F(e+3<a.length,"trying to write beyond buffer length"),U(b,4294967295));var m=a.length;if(!(e>=m))for(d=0,m=Math.min(m-e,4);d<m;d++)a[e+d]=b>>>8*(g?d:3-d)&255}function B(a,b,e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),F(void 0!==e&&null!==e,"missing offset"),F(e+1<a.length,"Trying to write beyond buffer length"),Y(b,32767,-32768));e>=a.length||(0<=b?C(a,b,e,g,d):C(a,65535+b+1,e,g,d))}function L(a,b,
e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),F(void 0!==e&&null!==e,"missing offset"),F(e+3<a.length,"Trying to write beyond buffer length"),Y(b,2147483647,-2147483648));e>=a.length||(0<=b?H(a,b,e,g,d):H(a,4294967295+b+1,e,g,d))}function G(a,b,e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),F(void 0!==e&&null!==e,"missing offset"),F(e+3<a.length,"Trying to write beyond buffer length"),
aa(b,3.4028234663852886E38,-3.4028234663852886E38));e>=a.length||W.write(a,b,e,g,23,4)}function M(a,b,e,g,d){d||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof g,"missing or invalid endian"),F(void 0!==e&&null!==e,"missing offset"),F(e+7<a.length,"Trying to write beyond buffer length"),aa(b,1.7976931348623157E308,-1.7976931348623157E308));e>=a.length||W.write(a,b,e,g,52,8)}function E(a){a._isBuffer=!0;a._get=a.get;a._set=a.set;a.get=I.get;a.set=I.set;a.write=I.write;a.toString=I.toString;
a.toLocaleString=I.toString;a.toJSON=I.toJSON;a.copy=I.copy;a.slice=I.slice;a.readUInt8=I.readUInt8;a.readUInt16LE=I.readUInt16LE;a.readUInt16BE=I.readUInt16BE;a.readUInt32LE=I.readUInt32LE;a.readUInt32BE=I.readUInt32BE;a.readInt8=I.readInt8;a.readInt16LE=I.readInt16LE;a.readInt16BE=I.readInt16BE;a.readInt32LE=I.readInt32LE;a.readInt32BE=I.readInt32BE;a.readFloatLE=I.readFloatLE;a.readFloatBE=I.readFloatBE;a.readDoubleLE=I.readDoubleLE;a.readDoubleBE=I.readDoubleBE;a.writeUInt8=I.writeUInt8;a.writeUInt16LE=
I.writeUInt16LE;a.writeUInt16BE=I.writeUInt16BE;a.writeUInt32LE=I.writeUInt32LE;a.writeUInt32BE=I.writeUInt32BE;a.writeInt8=I.writeInt8;a.writeInt16LE=I.writeInt16LE;a.writeInt16BE=I.writeInt16BE;a.writeInt32LE=I.writeInt32LE;a.writeInt32BE=I.writeInt32BE;a.writeFloatLE=I.writeFloatLE;a.writeFloatBE=I.writeFloatBE;a.writeDoubleLE=I.writeDoubleLE;a.writeDoubleBE=I.writeDoubleBE;a.fill=I.fill;a.inspect=I.inspect;a.toArrayBuffer=I.toArrayBuffer;return a}function K(a,b,e){if("number"!==typeof a)return e;
a=~~a;if(a>=b)return b;if(0<=a)return a;a+=b;return 0<=a?a:0}function J(a){a=~~Math.ceil(+a);return 0>a?0:a}function O(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function Q(a){return 16>a?"0"+a.toString(16):a.toString(16)}function T(a){for(var b=[],e=0;e<a.length;e++){var g=a.charCodeAt(e);if(127>=g)b.push(a.charCodeAt(e));else{var d=e;55296<=g&&57343>=g&&e++;g=encodeURIComponent(a.slice(d,e+1)).substr(1).split("%");for(d=0;d<g.length;d++)b.push(parseInt(g[d],
16))}}return b}function R(a,b,e,g){for(var d=0;d<g&&!(d+e>=b.length||d>=a.length);d++)b[d+e]=a[d];return d}function P(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function U(a,b){F("number"===typeof a,"cannot write a non-number as a number");F(0<=a,"specified a negative value for writing an unsigned value");F(a<=b,"value is larger than maximum value for type");F(Math.floor(a)===a,"value has a fractional component")}function Y(a,b,e){F("number"===typeof a,"cannot write a non-number as a number");
F(a<=b,"value larger than maximum allowed value");F(a>=e,"value smaller than minimum allowed value");F(Math.floor(a)===a,"value has a fractional component")}function aa(a,b,e){F("number"===typeof a,"cannot write a non-number as a number");F(a<=b,"value larger than maximum allowed value");F(a>=e,"value smaller than minimum allowed value")}function F(a,b){if(!a)throw Error(b||"Failed assertion");}var ba=d("base64-js"),W=d("ieee754");k.Buffer=e;k.SlowBuffer=e;k.INSPECT_MAX_BYTES=50;e.poolSize=8192;e._useTypedArrays=
function(){if("function"!==typeof Uint8Array||"function"!==typeof ArrayBuffer)return!1;try{var a=new Uint8Array(0);a.foo=function(){return 42};return 42===a.foo()&&"function"===typeof a.subarray}catch(b){return!1}}();e.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};e.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)};
e.byteLength=function(a,b){var e;a+="";switch(b||"utf8"){case "hex":e=a.length/2;break;case "utf8":case "utf-8":e=T(a).length;break;case "ascii":case "binary":case "raw":e=a.length;break;case "base64":e=ba.toByteArray(a).length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=2*a.length;break;default:throw Error("Unknown encoding");}return e};e.concat=function(a,b){F(O(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array.");if(0===a.length)return new e(0);if(1===a.length)return a[0];
var g;if("number"!==typeof b)for(g=b=0;g<a.length;g++)b+=a[g].length;var d=new e(b),m=0;for(g=0;g<a.length;g++){var p=a[g];p.copy(d,m);m+=p.length}return d};e.prototype.write=function(a,b,g,d){if(isFinite(b))isFinite(g)||(d=g,g=void 0);else{var m=d;d=b;b=g;g=m}b=Number(b)||0;m=this.length-b;g?(g=Number(g),g>m&&(g=m)):g=m;d=String(d||"utf8").toLowerCase();switch(d){case "hex":d=g;g=Number(b)||0;b=this.length-g;d?(d=Number(d),d>b&&(d=b)):d=b;b=a.length;F(0===b%2,"Invalid hex string");d>b/2&&(d=b/2);
for(b=0;b<d;b++)m=parseInt(a.substr(2*b,2),16),F(!isNaN(m),"Invalid hex string"),this[g+b]=m;e._charsWritten=2*b;a=b;break;case "utf8":case "utf-8":d=b;a=e._charsWritten=R(T(a),this,d,g);break;case "ascii":a=l(this,a,b,g);break;case "binary":a=l(this,a,b,g);break;case "base64":d=b;a=e._charsWritten=R(ba.toByteArray(a),this,d,g);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=b;b=e;for(var p,n=[],f=0;f<a.length;f++)p=a.charCodeAt(f),m=p>>8,p%=256,n.push(p),n.push(m);a=b._charsWritten=
R(n,this,d,g);break;default:throw Error("Unknown encoding");}return a};e.prototype.toString=function(a,b,e){a=String(a||"utf8").toLowerCase();b=Number(b)||0;e=void 0!==e?Number(e):e=this.length;if(e===b)return"";switch(a){case "hex":a=b;b=this.length;if(!a||0>a)a=0;if(!e||0>e||e>b)e=b;for(b="";a<e;a++)b+=Q(this[a]);e=b;break;case "utf8":case "utf-8":var g=b;b=a="";for(e=Math.min(this.length,e);g<e;g++)127>=this[g]?(a+=P(b)+String.fromCharCode(this[g]),b=""):b+="%"+this[g].toString(16);e=a+P(b);break;
case "ascii":e=u(this,b,e);break;case "binary":e=u(this,b,e);break;case "base64":a=b;e=0===a&&e===this.length?ba.fromByteArray(this):ba.fromByteArray(this.slice(a,e));break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.slice(b,e);a="";for(b=0;b<e.length;b+=2)a+=String.fromCharCode(e[b]+256*e[b+1]);e=a;break;default:throw Error("Unknown encoding");}return e};e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};e.prototype.copy=function(a,
b,e,g){e||(e=0);g||0===g||(g=this.length);b||(b=0);if(g!==e&&0!==a.length&&0!==this.length){F(g>=e,"sourceEnd < sourceStart");F(0<=b&&b<a.length,"targetStart out of bounds");F(0<=e&&e<this.length,"sourceStart out of bounds");F(0<=g&&g<=this.length,"sourceEnd out of bounds");g>this.length&&(g=this.length);a.length-b<g-e&&(g=a.length-b+e);for(var d=0;d<g-e;d++)a[d+b]=this[d+e]}};e.prototype.slice=function(a,b){var g=this.length;a=K(a,g,0);b=K(b,g,g);if(e._useTypedArrays)return E(this.subarray(a,b));
for(var g=b-a,d=new e(g,void 0,!0),m=0;m<g;m++)d[m]=this[m+a];return d};e.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(a)};e.prototype.set=function(a,b){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,b)};e.prototype.readUInt8=function(a,b){b||(F(void 0!==a&&null!==a,"missing offset"),F(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]};
e.prototype.readUInt16LE=function(a,b){return v(this,a,!0,b)};e.prototype.readUInt16BE=function(a,b){return v(this,a,!1,b)};e.prototype.readUInt32LE=function(a,b){return p(this,a,!0,b)};e.prototype.readUInt32BE=function(a,b){return p(this,a,!1,b)};e.prototype.readInt8=function(a,b){b||(F(void 0!==a&&null!==a,"missing offset"),F(a<this.length,"Trying to read beyond buffer length"));if(!(a>=this.length))return this[a]&128?-1*(255-this[a]+1):this[a]};e.prototype.readInt16LE=function(a,b){return y(this,
a,!0,b)};e.prototype.readInt16BE=function(a,b){return y(this,a,!1,b)};e.prototype.readInt32LE=function(a,b){return A(this,a,!0,b)};e.prototype.readInt32BE=function(a,b){return A(this,a,!1,b)};e.prototype.readFloatLE=function(a,b){return z(this,a,!0,b)};e.prototype.readFloatBE=function(a,b){return z(this,a,!1,b)};e.prototype.readDoubleLE=function(a,b){return D(this,a,!0,b)};e.prototype.readDoubleBE=function(a,b){return D(this,a,!1,b)};e.prototype.writeUInt8=function(a,b,e){e||(F(void 0!==a&&null!==
a,"missing value"),F(void 0!==b&&null!==b,"missing offset"),F(b<this.length,"trying to write beyond buffer length"),U(a,255));b>=this.length||(this[b]=a)};e.prototype.writeUInt16LE=function(a,b,e){C(this,a,b,!0,e)};e.prototype.writeUInt16BE=function(a,b,e){C(this,a,b,!1,e)};e.prototype.writeUInt32LE=function(a,b,e){H(this,a,b,!0,e)};e.prototype.writeUInt32BE=function(a,b,e){H(this,a,b,!1,e)};e.prototype.writeInt8=function(a,b,e){e||(F(void 0!==a&&null!==a,"missing value"),F(void 0!==b&&null!==b,"missing offset"),
F(b<this.length,"Trying to write beyond buffer length"),Y(a,127,-128));b>=this.length||(0<=a?this.writeUInt8(a,b,e):this.writeUInt8(255+a+1,b,e))};e.prototype.writeInt16LE=function(a,b,e){B(this,a,b,!0,e)};e.prototype.writeInt16BE=function(a,b,e){B(this,a,b,!1,e)};e.prototype.writeInt32LE=function(a,b,e){L(this,a,b,!0,e)};e.prototype.writeInt32BE=function(a,b,e){L(this,a,b,!1,e)};e.prototype.writeFloatLE=function(a,b,e){G(this,a,b,!0,e)};e.prototype.writeFloatBE=function(a,b,e){G(this,a,b,!1,e)};
e.prototype.writeDoubleLE=function(a,b,e){M(this,a,b,!0,e)};e.prototype.writeDoubleBE=function(a,b,e){M(this,a,b,!1,e)};e.prototype.fill=function(a,b,e){a||(a=0);b||(b=0);e||(e=this.length);"string"===typeof a&&(a=a.charCodeAt(0));F("number"===typeof a&&!isNaN(a),"value is not a number");F(e>=b,"end < start");if(e!==b&&0!==this.length)for(F(0<=b&&b<this.length,"start out of bounds"),F(0<=e&&e<=this.length,"end out of bounds");b<e;b++)this[b]=a};e.prototype.inspect=function(){for(var a=[],b=this.length,
e=0;e<b;e++)if(a[e]=Q(this[e]),e===k.INSPECT_MAX_BYTES){a[e+1]="...";break}return"<Buffer "+a.join(" ")+">"};e.prototype.toArrayBuffer=function(){if("function"===typeof Uint8Array){if(e._useTypedArrays)return(new e(this)).buffer;for(var a=new Uint8Array(this.length),b=0,g=a.length;b<g;b+=1)a[b]=this[b];return a.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser");};var I=e.prototype}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/index.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,"base64-js":2,buffer:1,ieee754:3}],2:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,
t,s,r,x){(function(a){function b(a){a=a.charCodeAt(0);if(a===g)return 62;if(a===d)return 63;if(a<m)return-1;if(a<m+10)return a-m+52;if(a<n+26)return a-n;if(a<q+26)return a-q+26}var e="undefined"!==typeof Uint8Array?Uint8Array:Array,g=43,d=47,m=48,q=97,n=65;f.exports.toByteArray=function(a){function g(a){q[n++]=a}var d,m,p,l,q;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");d=a.length;l="="===a.charAt(d-2)?2:"="===a.charAt(d-1)?1:0;q=new e(3*a.length/4-l);m=0<l?a.length-
4:a.length;var n=0;for(d=0;d<m;d+=4)p=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),g((p&16711680)>>16),g((p&65280)>>8),g(p&255);2===l?(p=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,g(p&255)):1===l&&(p=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,g(p>>8&255),g(p&255));return q};f.exports.fromByteArray=function(a){var b,e=a.length%3,g="",d,m;b=0;for(m=a.length-e;b<m;b+=3)d=(a[b]<<16)+(a[b+1]<<8)+a[b+2],d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63),g+=d;switch(e){case 1:d=a[a.length-1];g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2);g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<4&63);g+="==";break;case 2:d=(a[a.length-2]<<8)+
a[a.length-1],g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>10),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>4&63),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2&63),g+="="}return g}})()}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],3:[function(d,f,k,h,a,b,e){(function(a,b,e,d,f,t,h,r,x){k.read=function(a,b,e,
g,d){var m;m=8*d-g-1;var q=(1<<m)-1,n=q>>1,f=-7;d=e?d-1:0;var r=e?-1:1,t=a[b+d];d+=r;e=t&(1<<-f)-1;t>>=-f;for(f+=m;0<f;e=256*e+a[b+d],d+=r,f-=8);m=e&(1<<-f)-1;e>>=-f;for(f+=g;0<f;m=256*m+a[b+d],d+=r,f-=8);if(0===e)e=1-n;else{if(e===q)return m?NaN:Infinity*(t?-1:1);m+=Math.pow(2,g);e-=n}return(t?-1:1)*m*Math.pow(2,e-g)};k.write=function(a,b,e,g,d,m){var q,f=8*m-d-1,n=(1<<f)-1,r=n>>1,t=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;m=g?0:m-1;var h=g?1:-1,s=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===
b?(b=isNaN(b)?1:0,g=n):(g=Math.floor(Math.log(b)/Math.LN2),1>b*(q=Math.pow(2,-g))&&(g--,q*=2),b=1<=g+r?b+t/q:b+t*Math.pow(2,1-r),2<=b*q&&(g++,q/=2),g+r>=n?(b=0,g=n):1<=g+r?(b=(b*q-1)*Math.pow(2,d),g+=r):(b=b*Math.pow(2,r-1)*Math.pow(2,d),g=0));for(;8<=d;a[e+m]=b&255,m+=h,b/=256,d-=8);g=g<<d|b;for(f+=d;0<f;a[e+m]=g&255,m+=h,g/=256,f-=8);a[e+m-h]|=128*s}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/buffer/node_modules/ieee754")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],4:[function(d,f,k,h,a,b,e){(function(a,
b,e,d,h,t,s,r,x){function l(){}a=f.exports={};a.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(b){var e=b.source;e!==window&&null!==e||"process-tick"!==b.data||(b.stopPropagation(),0<a.length&&a.shift()())},!0);return function(b){a.push(b);window.postMessage("process-tick","*")}}return function(a){setTimeout(a,
0)}}();a.title="browser";a.browser=!0;a.env={};a.argv=[];a.on=l;a.once=l;a.off=l;a.emit=l;a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,
h,a,b,e,"/../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js","/../node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],5:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(){}var u=d("./Scalar");
f.exports=l;l.lineInt=function(a,b,e){var g=[0,0],d,m,q,l,f;d=a[1][1]-a[0][1];m=a[0][0]-a[1][0];a=d*a[0][0]+m*a[0][1];q=b[1][1]-b[0][1];l=b[0][0]-b[1][0];b=q*b[0][0]+l*b[0][1];f=d*l-q*m;u.eq(f,0,e||0)||(g[0]=(l*a-m*b)/f,g[1]=(d*b-q*a)/f);return g};l.segmentsIntersect=function(a,b,e,g){var d=b[0]-a[0];b=b[1]-a[1];var m=g[0]-e[0],q=g[1]-e[1];if(0==m*b-q*d)return!1;g=(d*(e[1]-a[1])+b*(a[0]-e[0]))/(m*b-q*d);a=(m*(a[1]-e[1])+q*(e[0]-a[0]))/(q*d-m*b);return 0<=g&&1>=g&&0<=a&&1>=a}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/poly-decomp/src/Line.js","/../node_modules/poly-decomp/src")},{"./Scalar":8,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],6:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,x){function l(){}f.exports=l;l.area=function(a,b,e){return(b[0]-a[0])*(e[1]-a[1])-(e[0]-a[0])*(b[1]-
a[1])};l.left=function(a,b,e){return 0<l.area(a,b,e)};l.leftOn=function(a,b,e){return 0<=l.area(a,b,e)};l.right=function(a,b,e){return 0>l.area(a,b,e)};l.rightOn=function(a,b,e){return 0>=l.area(a,b,e)};var u=[],v=[];l.collinear=function(a,b,e,g){return g?(u[0]=b[0]-a[0],u[1]=b[1]-a[1],v[0]=e[0]-b[0],v[1]=e[1]-b[1],a=u[0]*v[0]+u[1]*v[1],b=Math.sqrt(u[0]*u[0]+u[1]*u[1]),e=Math.sqrt(v[0]*v[0]+v[1]*v[1]),Math.acos(a/(b*e))<g):0==l.area(a,b,e)};l.sqdist=function(a,b){var e=b[0]-a[0],g=b[1]-a[1];return e*
e+g*g}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/poly-decomp/src/Point.js","/../node_modules/poly-decomp/src")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],
7:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(){this.vertices=[]}function u(a,b,e,g,d){var m=b[1]-a[1];b=a[0]-b[0];a=m*a[0]+b*a[1];var p=g[1]-e[1];g=e[0]-g[0];e=p*e[0]+g*e[1];var q=m*g-p*b;return y.eq(q,0,d||0)?[0,0]:[(g*a-b*e)/q,(m*e-p*a)/q]}var v=d("./Line"),p=d("./Point"),y=d("./Scalar");f.exports=l;l.prototype.at=function(a){var b=this.vertices,e=b.length;return b[0>a?a%e+e:a%e]};l.prototype.first=function(){return this.vertices[0]};l.prototype.last=function(){return this.vertices[this.vertices.length-
1]};l.prototype.clear=function(){this.vertices.length=0};l.prototype.append=function(a,b,e){if("undefined"==typeof b)throw Error("From is not given!");if("undefined"==typeof e)throw Error("To is not given!");if(e-1<b)throw Error("lol1");if(e>a.vertices.length)throw Error("lol2");if(0>b)throw Error("lol3");for(;b<e;b++)this.vertices.push(a.vertices[b])};l.prototype.makeCCW=function(){for(var a=0,b=this.vertices,e=1;e<this.vertices.length;++e)if(b[e][1]<b[a][1]||b[e][1]==b[a][1]&&b[e][0]>b[a][0])a=
e;p.left(this.at(a-1),this.at(a),this.at(a+1))||this.reverse()};l.prototype.reverse=function(){for(var a=[],b=0,e=this.vertices.length;b!==e;b++)a.push(this.vertices.pop());this.vertices=a};l.prototype.isReflex=function(a){return p.right(this.at(a-1),this.at(a),this.at(a+1))};var k=[],z=[];l.prototype.canSee=function(a,b){var e,g;if(p.leftOn(this.at(a+1),this.at(a),this.at(b))&&p.rightOn(this.at(a-1),this.at(a),this.at(b)))return!1;g=p.sqdist(this.at(a),this.at(b));for(var d=0;d!==this.vertices.length;++d)if((d+
1)%this.vertices.length!==a&&d!==a&&p.leftOn(this.at(a),this.at(b),this.at(d+1))&&p.rightOn(this.at(a),this.at(b),this.at(d))&&(k[0]=this.at(a),k[1]=this.at(b),z[0]=this.at(d),z[1]=this.at(d+1),e=v.lineInt(k,z),p.sqdist(this.at(a),e)<g))return!1;return!0};l.prototype.copy=function(a,b,e){e=e||new l;e.clear();if(a<b)for(var g=a;g<=b;g++)e.vertices.push(this.vertices[g]);else{for(g=0;g<=b;g++)e.vertices.push(this.vertices[g]);for(g=a;g<this.vertices.length;g++)e.vertices.push(this.vertices[g])}return e};
l.prototype.getCutEdges=function(){for(var a=[],b=[],e=[],g=new l,d=Number.MAX_VALUE,m=0;m<this.vertices.length;++m)if(this.isReflex(m))for(var p=0;p<this.vertices.length;++p)if(this.canSee(m,p)){for(var b=this.copy(m,p,g).getCutEdges(),e=this.copy(p,m,g).getCutEdges(),q=0;q<e.length;q++)b.push(e[q]);b.length<d&&(a=b,d=b.length,a.push([this.at(m),this.at(p)]))}return a};l.prototype.decomp=function(){var a=this.getCutEdges();return 0<a.length?this.slice(a):[this]};l.prototype.slice=function(a){if(0==
a.length)return[this];if(a instanceof Array&&a.length&&a[0]instanceof Array&&2==a[0].length&&a[0][0]instanceof Array){for(var b=[this],e=0;e<a.length;e++)for(var g=a[e],d=0;d<b.length;d++){var m=b[d].slice(g);if(m){b.splice(d,1);b.push(m[0],m[1]);break}}return b}g=a;e=this.vertices.indexOf(g[0]);d=this.vertices.indexOf(g[1]);return-1!=e&&-1!=d?[this.copy(e,d),this.copy(d,e)]:!1};l.prototype.isSimple=function(){for(var a=this.vertices,b=0;b<a.length-1;b++)for(var e=0;e<b-1;e++)if(v.segmentsIntersect(a[b],
a[b+1],a[e],a[e+1]))return!1;for(b=1;b<a.length-2;b++)if(v.segmentsIntersect(a[0],a[a.length-1],a[b],a[b+1]))return!1;return!0};l.prototype.quickDecomp=function(a,b,e,g,d,m){d=d||100;m=m||0;g=g||25;a="undefined"!=typeof a?a:[];b=b||[];e=e||[];var q=[0,0],f=[0,0],n=[0,0],r=0,t=0,h=0,y=r=0,v=0,s=0,w=new l,x=new l,k=this.vertices;if(3>k.length)return a;m++;if(m>d)return console.warn("quickDecomp: max level ("+d+") reached."),a;for(var A=0;A<this.vertices.length;++A)if(this.isReflex(A)){b.push(this.vertices[A]);
for(var r=t=Number.MAX_VALUE,z=0;z<this.vertices.length;++z)p.left(this.at(A-1),this.at(A),this.at(z))&&p.rightOn(this.at(A-1),this.at(A),this.at(z-1))&&(n=u(this.at(A-1),this.at(A),this.at(z),this.at(z-1)),p.right(this.at(A+1),this.at(A),n)&&(h=p.sqdist(this.vertices[A],n),h<t&&(t=h,f=n,v=z))),p.left(this.at(A+1),this.at(A),this.at(z+1))&&p.rightOn(this.at(A+1),this.at(A),this.at(z))&&(n=u(this.at(A+1),this.at(A),this.at(z),this.at(z+1)),p.left(this.at(A-1),this.at(A),n)&&(h=p.sqdist(this.vertices[A],
n),h<r&&(r=h,q=n,y=z)));if(v==(y+1)%this.vertices.length)n[0]=(f[0]+q[0])/2,n[1]=(f[1]+q[1])/2,e.push(n),A<y?(w.append(this,A,y+1),w.vertices.push(n),x.vertices.push(n),0!=v&&x.append(this,v,this.vertices.length),x.append(this,0,A+1)):(0!=A&&w.append(this,A,this.vertices.length),w.append(this,0,y+1),w.vertices.push(n),x.vertices.push(n),x.append(this,v,A+1));else{v>y&&(y+=this.vertices.length);r=Number.MAX_VALUE;if(y<v)return a;for(z=v;z<=y;++z)p.leftOn(this.at(A-1),this.at(A),this.at(z))&&p.rightOn(this.at(A+
1),this.at(A),this.at(z))&&(h=p.sqdist(this.at(A),this.at(z)),h<r&&(r=h,s=z%this.vertices.length));A<s?(w.append(this,A,s+1),0!=s&&x.append(this,s,k.length),x.append(this,0,A+1)):(0!=A&&w.append(this,A,k.length),w.append(this,0,s+1),x.append(this,s,A+1))}w.vertices.length<x.vertices.length?(w.quickDecomp(a,b,e,g,d,m),x.quickDecomp(a,b,e,g,d,m)):(x.quickDecomp(a,b,e,g,d,m),w.quickDecomp(a,b,e,g,d,m));return a}a.push(this);return a};l.prototype.removeCollinearPoints=function(a){for(var b=0,e=this.vertices.length-
1;3<this.vertices.length&&0<=e;--e)p.collinear(this.at(e-1),this.at(e),this.at(e+1),a)&&(this.vertices.splice(e%this.vertices.length,1),e--,b++);return b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/poly-decomp/src/Polygon.js","/../node_modules/poly-decomp/src")},{"./Line":5,
"./Point":6,"./Scalar":8,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],8:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,x){function l(){}f.exports=l;l.eq=function(a,b,e){e=e||0;return Math.abs(a-b)<e}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/../node_modules/poly-decomp/src/Scalar.js","/../node_modules/poly-decomp/src")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],9:[function(d,f,k,h,a,b,e){d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js");d("buffer");
f.exports={Polygon:d("./Polygon"),Point:d("./Point")}},{"./Point":6,"./Polygon":7,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],10:[function(d,f,k){f.exports={name:"p2",version:"0.6.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",
url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"~0.4.0","grunt-contrib-jshint":"~0.9.2","grunt-contrib-nodeunit":"~0.1.2","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],11:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a){this.lowerBound=u.create();a&&a.lowerBound&&
u.copy(this.lowerBound,a.lowerBound);this.upperBound=u.create();a&&a.upperBound&&u.copy(this.upperBound,a.upperBound)}var u=d("../math/vec2");d("../utils/Utils");f.exports=l;var v=u.create();l.prototype.setFromPoints=function(a,b,e,g){var d=this.lowerBound,m=this.upperBound;"number"!==typeof e&&(e=0);0!==e?u.rotate(d,a[0],e):u.copy(d,a[0]);u.copy(m,d);for(var q=Math.cos(e),l=Math.sin(e),f=1;f<a.length;f++){var n=a[f];if(0!==e){var r=n[0],n=n[1];v[0]=q*r-l*n;v[1]=l*r+q*n;n=v}for(r=0;2>r;r++)n[r]>m[r]&&
(m[r]=n[r]),n[r]<d[r]&&(d[r]=n[r])}b&&(u.add(this.lowerBound,this.lowerBound,b),u.add(this.upperBound,this.upperBound,b));g&&(this.lowerBound[0]-=g,this.lowerBound[1]-=g,this.upperBound[0]+=g,this.upperBound[1]+=g)};l.prototype.copy=function(a){u.copy(this.lowerBound,a.lowerBound);u.copy(this.upperBound,a.upperBound)};l.prototype.extend=function(a){for(var b=2;b--;){var e=a.lowerBound[b];this.lowerBound[b]>e&&(this.lowerBound[b]=e);e=a.upperBound[b];this.upperBound[b]<e&&(this.upperBound[b]=e)}};
l.prototype.overlaps=function(a){var b=this.lowerBound,e=this.upperBound,g=a.lowerBound;a=a.upperBound;return(g[0]<=e[0]&&e[0]<=a[0]||b[0]<=a[0]&&a[0]<=e[0])&&(g[1]<=e[1]&&e[1]<=a[1]||b[1]<=a[1]&&a[1]<=e[1])}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/AABB.js","/collision")},
{"../math/vec2":33,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],12:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a){this.type=a;this.result=[];this.world=null;this.boundingVolumeType=l.AABB}var u=d("../math/vec2"),v=d("../objects/Body");f.exports=l;l.AABB=1;l.BOUNDING_CIRCLE=2;l.prototype.setWorld=function(a){this.world=a};l.prototype.getCollisionPairs=
function(a){throw Error("getCollisionPairs must be implemented in a subclass!");};var p=u.create();l.boundingRadiusCheck=function(a,b){u.sub(p,a.position,b.position);var e=u.squaredLength(p),g=a.boundingRadius+b.boundingRadius;return e<=g*g};l.aabbCheck=function(a,b){a.aabbNeedsUpdate&&a.updateAABB();b.aabbNeedsUpdate&&b.updateAABB();return a.aabb.overlaps(b.aabb)};l.prototype.boundingVolumeCheck=function(a,b){var e;switch(this.boundingVolumeType){case l.BOUNDING_CIRCLE:e=l.boundingRadiusCheck(a,
b);break;case l.AABB:e=l.aabbCheck(a,b);break;default:throw Error("Bounding volume type not recognized: "+this.boundingVolumeType);}return e};l.canCollide=function(a,b){return a.type===v.STATIC&&b.type===v.STATIC||a.type===v.KINEMATIC&&b.type===v.STATIC||a.type===v.STATIC&&b.type===v.KINEMATIC||a.type===v.KINEMATIC&&b.type===v.KINEMATIC||a.sleepState===v.SLEEPING&&b.sleepState===v.SLEEPING||a.sleepState===v.SLEEPING&&b.type===v.STATIC||b.sleepState===v.SLEEPING&&a.type===v.STATIC?!1:!0};l.NAIVE=1;
l.SAP=2}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/Broadphase.js","/collision")},{"../math/vec2":33,"../objects/Body":34,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],13:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a){u.apply(this);a=v.defaults(a,{xmin:-100,xmax:100,ymin:-100,ymax:100,nx:10,ny:10});this.xmin=a.xmin;this.ymin=a.ymin;this.xmax=a.xmax;this.ymax=a.ymax;this.nx=a.nx;this.ny=a.ny;this.binsizeX=(this.xmax-this.xmin)/this.nx;this.binsizeY=(this.ymax-this.ymin)/this.ny}d("../shapes/Circle");d("../shapes/Plane");d("../shapes/Particle");var u=d("../collision/Broadphase");d("../math/vec2");var v=d("../utils/Utils");f.exports=
l;l.prototype=new u;l.prototype.getCollisionPairs=function(a){var b=[],e=a.bodies,g=e.length,d=this.nx,m=this.ny,q=this.xmin,l=this.ymin,f=this.xmax,n=this.ymax;a=[];for(var r=d*m,t=0;t<r;t++)a.push([]);for(var h=d/(f-q),v=m/(n-l),t=0;t!==g;t++)for(var d=e[t],s=d.aabb,w=Math.max(s.lowerBound[0],q),x=Math.max(s.lowerBound[1],l),k=Math.min(s.upperBound[0],f),P=Math.min(s.upperBound[1],n),x=Math.floor(v*(x-l)),s=Math.floor(h*(k-q)),P=Math.floor(v*(P-l)),w=Math.floor(h*(w-q));w<=s;w++)for(k=x;k<=P;k++){var U=
w*(m-1)+k;0<=U&&U<r&&a[U].push(d)}for(t=0;t!==r;t++)for(e=a[t],w=0,g=e.length;w!==g;w++)for(d=e[w],k=0;k!==w;k++)m=e[k],u.canCollide(d,m)&&this.boundingVolumeCheck(d,m)&&b.push(d,m);return b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/GridBroadphase.js","/collision")},{"../collision/Broadphase":12,
"../math/vec2":33,"../shapes/Circle":40,"../shapes/Particle":44,"../shapes/Plane":45,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],14:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(){u.call(this,u.NAIVE)}d("../shapes/Circle");d("../shapes/Plane");d("../shapes/Shape");d("../shapes/Particle");var u=d("../collision/Broadphase");d("../math/vec2");f.exports=
l;l.prototype=new u;l.prototype.getCollisionPairs=function(a){a=a.bodies;for(var b=this.result,e=b.length=0,g=a.length;e!==g;e++)for(var d=a[e],m=0;m<e;m++){var q=a[m];u.canCollide(d,q)&&this.boundingVolumeCheck(d,q)&&b.push(d,q)}return b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/NaiveBroadphase.js",
"/collision")},{"../collision/Broadphase":12,"../math/vec2":33,"../shapes/Circle":40,"../shapes/Particle":44,"../shapes/Plane":45,"../shapes/Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],15:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(){this.contactEquations=[];this.frictionEquations=[];this.enableFriction=!0;this.slipForce=10;this.frictionCoefficient=.3;
this.surfaceVelocity=0;this.reuseObjects=!0;this.reusableContactEquations=[];this.reusableFrictionEquations=[];this.restitution=0;this.stiffness=H.DEFAULT_STIFFNESS;this.relaxation=H.DEFAULT_RELAXATION;this.frictionStiffness=H.DEFAULT_STIFFNESS;this.frictionRelaxation=H.DEFAULT_RELAXATION;this.enableFrictionReduction=!0;this.collidingBodiesLastStep=new C;this.contactSkinSize=.01}function u(a,b){p.set(a.vertices[0],.5*-b.length,-b.radius);p.set(a.vertices[1],.5*b.length,-b.radius);p.set(a.vertices[2],
.5*b.length,b.radius);p.set(a.vertices[3],.5*-b.length,b.radius)}function v(a,b,e,g){var d=ja,m=xa,l=sa,q=Fa;b=b.vertices;for(var f=null,n=0;n!==b.length+1;n++){var r=b[(n+1)%b.length];p.rotate(d,b[n%b.length],g);p.rotate(m,r,g);k(d,d,e);k(m,m,e);y(l,d,a);y(q,m,a);r=p.crossLength(l,q);null===f&&(f=r);if(0>=r*f)return!1;f=r}return!0}var p=d("../math/vec2"),y=p.sub,k=p.add,z=p.dot,D=d("../utils/Utils"),C=d("../utils/TupleDictionary"),H=d("../equations/Equation"),B=d("../equations/ContactEquation"),
L=d("../equations/FrictionEquation");a=d("../shapes/Circle");b=d("../shapes/Convex");e=d("../shapes/Shape");d("../objects/Body");var G=d("../shapes/Rectangle");f.exports=l;var M=p.fromValues(0,1),E=p.fromValues(0,0),K=p.fromValues(0,0),J=p.fromValues(0,0),O=p.fromValues(0,0),Q=p.fromValues(0,0),T=p.fromValues(0,0),R=p.fromValues(0,0),P=p.fromValues(0,0),U=p.fromValues(0,0),Y=p.fromValues(0,0),aa=p.fromValues(0,0),F=p.fromValues(0,0),ba=p.fromValues(0,0),W=p.fromValues(0,0),I=p.fromValues(0,0),N=p.fromValues(0,
0),Z=p.fromValues(0,0),ca=p.fromValues(0,0),S=[];l.prototype.collidedLastStep=function(a,b){return!!this.collidingBodiesLastStep.get(a.id|0,b.id|0)};l.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var a=this.contactEquations,b=a.length;b--;){var e=a[b];this.collidingBodiesLastStep.set(e.bodyA.id,e.bodyB.id,!0)}this.reuseObjects&&(a=this.frictionEquations,b=this.reusableFrictionEquations,D.appendArray(this.reusableContactEquations,this.contactEquations),D.appendArray(b,a));this.contactEquations.length=
this.frictionEquations.length=0};l.prototype.createContactEquation=function(a,b,e,g){var d=this.reusableContactEquations.length?this.reusableContactEquations.pop():new B(a,b);d.bodyA=a;d.bodyB=b;d.shapeA=e;d.shapeB=g;d.restitution=this.restitution;d.firstImpact=!this.collidedLastStep(a,b);d.stiffness=this.stiffness;d.relaxation=this.relaxation;d.needsUpdate=!0;d.enabled=!0;d.offset=this.contactSkinSize;return d};l.prototype.createFrictionEquation=function(a,b,e,g){var d=this.reusableFrictionEquations.length?
this.reusableFrictionEquations.pop():new L(a,b);d.bodyA=a;d.bodyB=b;d.shapeA=e;d.shapeB=g;d.setSlipForce(this.slipForce);d.frictionCoefficient=this.frictionCoefficient;d.relativeVelocity=this.surfaceVelocity;d.enabled=!0;d.needsUpdate=!0;d.stiffness=this.frictionStiffness;d.relaxation=this.frictionRelaxation;d.contactEquations.length=0;return d};l.prototype.createFrictionFromContact=function(a){var b=this.createFrictionEquation(a.bodyA,a.bodyB,a.shapeA,a.shapeB);p.copy(b.contactPointA,a.contactPointA);
p.copy(b.contactPointB,a.contactPointB);p.rotate90cw(b.t,a.normalA);b.contactEquations.push(a);return b};l.prototype.createFrictionFromAverage=function(a){if(!a)throw Error("numContacts == 0!");var b=this.contactEquations[this.contactEquations.length-1],e=this.createFrictionEquation(b.bodyA,b.bodyB,b.shapeA,b.shapeB),g=b.bodyA;p.set(e.contactPointA,0,0);p.set(e.contactPointB,0,0);p.set(e.t,0,0);for(var d=0;d!==a;d++)b=this.contactEquations[this.contactEquations.length-1-d],b.bodyA===g?(p.add(e.t,
e.t,b.normalA),p.add(e.contactPointA,e.contactPointA,b.contactPointA),p.add(e.contactPointB,e.contactPointB,b.contactPointB)):(p.sub(e.t,e.t,b.normalA),p.add(e.contactPointA,e.contactPointA,b.contactPointB),p.add(e.contactPointB,e.contactPointB,b.contactPointA)),e.contactEquations.push(b);a=1/a;p.scale(e.contactPointA,e.contactPointA,a);p.scale(e.contactPointB,e.contactPointB,a);p.normalize(e.t,e.t);p.rotate90cw(e.t,e.t);return e};l.prototype[e.LINE|e.CONVEX]=l.prototype.convexLine=function(a,b,e,
g,d,m,l,q,p){return p?!1:0};l.prototype[e.LINE|e.RECTANGLE]=l.prototype.lineRectangle=function(a,b,e,g,d,m,l,q,p){return p?!1:0};var V=new G(1,1),ha=p.create();l.prototype[e.CAPSULE|e.CONVEX]=l.prototype[e.CAPSULE|e.RECTANGLE]=l.prototype.convexCapsule=function(a,b,e,g,d,m,l,q,f){p.set(ha,m.length/2,0);p.rotate(ha,ha,q);p.add(ha,ha,l);var n=this.circleConvex(d,m,ha,q,a,b,e,g,f,m.radius);p.set(ha,-m.length/2,0);p.rotate(ha,ha,q);p.add(ha,ha,l);var r=this.circleConvex(d,m,ha,q,a,b,e,g,f,m.radius);if(f&&
(n||r))return!0;u(V,m);return this.convexConvex(a,b,e,g,d,V,l,q,f)+n+r};l.prototype[e.CAPSULE|e.LINE]=l.prototype.lineCapsule=function(a,b,e,g,d,m,l,q,p){return p?!1:0};var fa=p.create(),oa=p.create(),ya=new G(1,1);l.prototype[e.CAPSULE|e.CAPSULE]=l.prototype.capsuleCapsule=function(a,b,e,g,d,m,l,q,f){for(var n,r=0,t=0;2>t;t++){p.set(fa,(0===t?-1:1)*b.length/2,0);p.rotate(fa,fa,g);p.add(fa,fa,e);for(var h=0;2>h;h++){p.set(oa,(0===h?-1:1)*m.length/2,0);p.rotate(oa,oa,q);p.add(oa,oa,l);this.enableFrictionReduction&&
(n=this.enableFriction,this.enableFriction=!1);var v=this.circleCircle(a,b,fa,g,d,m,oa,q,f,b.radius,m.radius);this.enableFrictionReduction&&(this.enableFriction=n);if(f&&v)return!0;r+=v}}this.enableFrictionReduction&&(n=this.enableFriction,this.enableFriction=!1);u(ya,b);t=this.convexCapsule(a,ya,e,g,d,m,l,q,f);this.enableFrictionReduction&&(this.enableFriction=n);if(f&&t)return!0;r+=t;this.enableFrictionReduction&&(n=this.enableFriction,this.enableFriction=!1);u(ya,m);a=this.convexCapsule(d,ya,l,
q,a,b,e,g,f);this.enableFrictionReduction&&(this.enableFriction=n);if(f&&a)return!0;r+=a;this.enableFrictionReduction&&r&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(r));return r};l.prototype[e.LINE|e.LINE]=l.prototype.lineLine=function(a,b,e,g,d,m,l,q,p){return p?!1:0};l.prototype[e.PLANE|e.LINE]=l.prototype.planeLine=function(a,b,e,g,d,m,l,q,f){var n=0;p.set(E,-m.length/2,0);p.set(K,m.length/2,0);p.rotate(J,E,q);p.rotate(O,K,q);k(J,J,l);k(O,O,l);p.copy(E,J);p.copy(K,
O);y(Q,K,E);p.normalize(T,Q);p.rotate90cw(U,T);p.rotate(P,M,g);S[0]=E;S[1]=K;for(g=0;g<S.length;g++){q=S[g];y(R,q,e);var r=z(R,P);if(0>r){if(f)return!0;var t=this.createContactEquation(a,d,b,m);n++;p.copy(t.normalA,P);p.normalize(t.normalA,t.normalA);p.scale(R,P,r);y(t.contactPointA,q,R);y(t.contactPointA,t.contactPointA,a.position);y(t.contactPointB,q,l);k(t.contactPointB,t.contactPointB,l);y(t.contactPointB,t.contactPointB,d.position);this.contactEquations.push(t);this.enableFrictionReduction||
this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(t))}}if(f)return!1;this.enableFrictionReduction||n&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(n));return n};l.prototype[e.PARTICLE|e.CAPSULE]=l.prototype.particleCapsule=function(a,b,e,g,d,m,l,q,p){return this.circleLine(a,b,e,g,d,m,l,q,p,m.radius,0)};l.prototype[e.CIRCLE|e.LINE]=l.prototype.circleLine=function(a,b,e,g,d,m,l,q,f,n,r){n=n||0;r="undefined"!==typeof r?r:b.radius;p.set(P,
-m.length/2,0);p.set(U,m.length/2,0);p.rotate(Y,P,q);p.rotate(aa,U,q);k(Y,Y,l);k(aa,aa,l);p.copy(P,Y);p.copy(U,aa);y(T,U,P);p.normalize(R,T);p.rotate90cw(Q,R);y(F,e,P);q=z(F,Q);y(O,P,l);y(ba,e,l);g=r+n;if(Math.abs(q)<g){p.scale(E,Q,q);y(J,e,E);p.scale(K,Q,z(Q,ba));p.normalize(K,K);p.scale(K,K,n);k(J,J,K);q=z(R,J);var t=z(R,P),h=z(R,U);if(q>t&&q<h){if(f)return!0;b=this.createContactEquation(a,d,b,m);p.scale(b.normalA,E,-1);p.normalize(b.normalA,b.normalA);p.scale(b.contactPointA,b.normalA,r);k(b.contactPointA,
b.contactPointA,e);y(b.contactPointA,b.contactPointA,a.position);y(b.contactPointB,J,l);k(b.contactPointB,b.contactPointB,l);y(b.contactPointB,b.contactPointB,d.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));return 1}}S[0]=P;S[1]=U;for(t=0;t<S.length;t++)if(q=S[t],y(F,q,e),p.squaredLength(F)<Math.pow(g,2)){if(f)return!0;b=this.createContactEquation(a,d,b,m);p.copy(b.normalA,F);p.normalize(b.normalA,b.normalA);p.scale(b.contactPointA,
b.normalA,r);k(b.contactPointA,b.contactPointA,e);y(b.contactPointA,b.contactPointA,a.position);y(b.contactPointB,q,l);p.scale(W,b.normalA,-n);k(b.contactPointB,b.contactPointB,W);k(b.contactPointB,b.contactPointB,l);y(b.contactPointB,b.contactPointB,d.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));return 1}return 0};l.prototype[e.CIRCLE|e.CAPSULE]=l.prototype.circleCapsule=function(a,b,e,g,d,m,l,q,p){return this.circleLine(a,
b,e,g,d,m,l,q,p,m.radius)};l.prototype[e.CIRCLE|e.CONVEX]=l.prototype[e.CIRCLE|e.RECTANGLE]=l.prototype.circleConvex=function(a,b,e,g,d,m,l,q,n,f){f="number"===typeof f?f:b.radius;g=!1;for(var r=Number.MAX_VALUE,t=m.vertices,h=0;h!==t.length+1;h++){var s=t[(h+1)%t.length];p.rotate(E,t[h%t.length],q);p.rotate(K,s,q);k(E,E,l);k(K,K,l);y(J,K,E);p.normalize(O,J);p.rotate90cw(Q,O);p.scale(W,Q,-b.radius);k(W,W,e);v(W,m,l,q)&&(p.sub(I,E,W),s=Math.abs(p.dot(I,Q)),s<r&&(p.copy(N,W),r=s,p.scale(ba,Q,s),p.add(ba,
ba,W),g=!0))}if(g){if(n)return!0;b=this.createContactEquation(a,d,b,m);p.sub(b.normalA,N,e);p.normalize(b.normalA,b.normalA);p.scale(b.contactPointA,b.normalA,f);k(b.contactPointA,b.contactPointA,e);y(b.contactPointA,b.contactPointA,a.position);y(b.contactPointB,ba,l);k(b.contactPointB,b.contactPointB,l);y(b.contactPointB,b.contactPointB,d.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));return 1}if(0<f)for(h=0;h<t.length;h++)if(p.rotate(aa,
t[h],q),k(aa,aa,l),y(Y,aa,e),p.squaredLength(Y)<Math.pow(f,2)){if(n)return!0;b=this.createContactEquation(a,d,b,m);p.copy(b.normalA,Y);p.normalize(b.normalA,b.normalA);p.scale(b.contactPointA,b.normalA,f);k(b.contactPointA,b.contactPointA,e);y(b.contactPointA,b.contactPointA,a.position);y(b.contactPointB,aa,l);k(b.contactPointB,b.contactPointB,l);y(b.contactPointB,b.contactPointB,d.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));
return 1}return 0};var ja=p.create(),xa=p.create(),sa=p.create(),Fa=p.create();l.prototype[e.PARTICLE|e.CONVEX]=l.prototype[e.PARTICLE|e.RECTANGLE]=l.prototype.particleConvex=function(a,b,e,g,d,m,l,q,f){g=Number.MAX_VALUE;var n=!1,r=m.vertices;if(!v(e,m,l,q))return 0;if(f)return!0;for(f=0;f!==r.length+1;f++){var t=r[(f+1)%r.length];p.rotate(E,r[f%r.length],q);p.rotate(K,t,q);k(E,E,l);k(K,K,l);y(J,K,E);p.normalize(O,J);p.rotate90cw(Q,O);y(Y,e,E);z(Y,Q);y(T,E,l);y(R,e,l);p.sub(Z,E,e);t=Math.abs(p.dot(Z,
Q));t<g&&(g=t,p.scale(ba,Q,t),p.add(ba,ba,e),p.copy(ca,Q),n=!0)}return n?(b=this.createContactEquation(a,d,b,m),p.scale(b.normalA,ca,-1),p.normalize(b.normalA,b.normalA),p.set(b.contactPointA,0,0),k(b.contactPointA,b.contactPointA,e),y(b.contactPointA,b.contactPointA,a.position),y(b.contactPointB,ba,l),k(b.contactPointB,b.contactPointB,l),y(b.contactPointB,b.contactPointB,d.position),this.contactEquations.push(b),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b)),
1):0};l.prototype[e.CIRCLE]=l.prototype.circleCircle=function(a,b,e,g,d,m,l,q,f,n,r){n=n||b.radius;r=r||m.radius;y(E,e,l);g=n+r;if(p.squaredLength(E)>Math.pow(g,2))return 0;if(f)return!0;b=this.createContactEquation(a,d,b,m);y(b.normalA,l,e);p.normalize(b.normalA,b.normalA);p.scale(b.contactPointA,b.normalA,n);p.scale(b.contactPointB,b.normalA,-r);k(b.contactPointA,b.contactPointA,e);y(b.contactPointA,b.contactPointA,a.position);k(b.contactPointB,b.contactPointB,l);y(b.contactPointB,b.contactPointB,
d.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));return 1};l.prototype[e.PLANE|e.CONVEX]=l.prototype[e.PLANE|e.RECTANGLE]=l.prototype.planeConvex=function(a,b,e,g,d,m,l,q,f){var n=0;p.rotate(K,M,g);for(g=0;g!==m.vertices.length;g++)if(p.rotate(E,m.vertices[g],q),k(E,E,l),y(J,E,e),0>=z(J,K)){if(f)return!0;n++;var r=this.createContactEquation(a,d,b,m);y(J,E,e);p.copy(r.normalA,K);var t=z(J,r.normalA);p.scale(J,r.normalA,t);
y(r.contactPointB,E,d.position);y(r.contactPointA,E,J);y(r.contactPointA,r.contactPointA,a.position);this.contactEquations.push(r);this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(r))}this.enableFrictionReduction&&this.enableFriction&&n&&this.frictionEquations.push(this.createFrictionFromAverage(n));return n};l.prototype[e.PARTICLE|e.PLANE]=l.prototype.particlePlane=function(a,b,e,g,d,m,l,q,f){q=q||0;y(E,e,l);p.rotate(K,M,q);g=z(E,K);if(0<
g)return 0;if(f)return!0;b=this.createContactEquation(d,a,m,b);p.copy(b.normalA,K);p.scale(E,b.normalA,g);y(b.contactPointA,e,E);y(b.contactPointA,b.contactPointA,d.position);y(b.contactPointB,e,a.position);this.contactEquations.push(b);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(b));return 1};l.prototype[e.CIRCLE|e.PARTICLE]=l.prototype.circleParticle=function(a,b,e,g,d,m,l,q,f){y(E,l,e);if(p.squaredLength(E)>Math.pow(b.radius,2))return 0;if(f)return!0;g=this.createContactEquation(a,
d,b,m);p.copy(g.normalA,E);p.normalize(g.normalA,g.normalA);p.scale(g.contactPointA,g.normalA,b.radius);k(g.contactPointA,g.contactPointA,e);y(g.contactPointA,g.contactPointA,a.position);y(g.contactPointB,l,d.position);this.contactEquations.push(g);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g));return 1};var za=new a(1),ia=p.create(),pa=p.create();p.create();l.prototype[e.PLANE|e.CAPSULE]=l.prototype.planeCapsule=function(a,b,e,g,d,m,l,q,f){p.set(ia,-m.length/
2,0);p.rotate(ia,ia,q);k(ia,ia,l);p.set(pa,m.length/2,0);p.rotate(pa,pa,q);k(pa,pa,l);za.radius=m.radius;var n;this.enableFrictionReduction&&(n=this.enableFriction,this.enableFriction=!1);m=this.circlePlane(d,za,ia,0,a,b,e,g,f);a=this.circlePlane(d,za,pa,0,a,b,e,g,f);this.enableFrictionReduction&&(this.enableFriction=n);if(f)return m||a;f=m+a;this.enableFrictionReduction&&f&&this.frictionEquations.push(this.createFrictionFromAverage(f));return f};l.prototype[e.CIRCLE|e.PLANE]=l.prototype.circlePlane=
function(a,b,e,g,d,m,l,q,f){g=q||0;y(E,e,l);p.rotate(K,M,g);g=z(K,E);if(g>b.radius)return 0;if(f)return!0;m=this.createContactEquation(d,a,m,b);p.copy(m.normalA,K);p.scale(m.contactPointB,m.normalA,-b.radius);k(m.contactPointB,m.contactPointB,e);y(m.contactPointB,m.contactPointB,a.position);p.scale(J,m.normalA,g);y(m.contactPointA,E,J);k(m.contactPointA,m.contactPointA,l);y(m.contactPointA,m.contactPointA,d.position);this.contactEquations.push(m);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(m));
return 1};l.prototype[e.CONVEX]=l.prototype[e.CONVEX|e.RECTANGLE]=l.prototype[e.RECTANGLE]=l.prototype.convexConvex=function(a,b,e,g,d,m,q,f,n,r){var t=0;r="number"===typeof r?r:0;if(!l.findSeparatingAxis(b,e,g,m,q,f,E))return 0;y(P,q,e);0<z(E,P)&&p.scale(E,E,-1);var h=l.getClosestEdge(b,g,E,!0),v=l.getClosestEdge(m,f,E);if(-1===h||-1===v)return 0;for(var s=0;2>s;s++){var w=h,I=v,u=b,x=m,N=e,G=q,Z=g,ca=f,B=a,D=d;if(0===s){var M;M=w;w=I;I=M;M=u;u=x;x=M;M=N;N=G;G=M;M=Z;Z=ca;ca=M;M=B;B=D;D=M}for(M=I;M<
I+2;M++){p.rotate(K,x.vertices[(M+x.vertices.length)%x.vertices.length],ca);k(K,K,G);for(var C=0,L=w-1;L<w+2;L++){var S=u.vertices[(L+u.vertices.length)%u.vertices.length],V=u.vertices[(L+1+u.vertices.length)%u.vertices.length];p.rotate(J,S,Z);p.rotate(O,V,Z);k(J,J,N);k(O,O,N);y(Q,O,J);p.rotate90cw(U,Q);p.normalize(U,U);y(P,K,J);S=z(U,P);(L===w&&S<=r||L!==w&&0>=S)&&C++}if(3<=C){if(n)return!0;C=this.createContactEquation(B,D,u,x);t++;S=u.vertices[w%u.vertices.length];V=u.vertices[(w+1)%u.vertices.length];
p.rotate(J,S,Z);p.rotate(O,V,Z);k(J,J,N);k(O,O,N);y(Q,O,J);p.rotate90cw(C.normalA,Q);p.normalize(C.normalA,C.normalA);y(P,K,J);S=z(C.normalA,P);p.scale(R,C.normalA,S);y(C.contactPointA,K,N);y(C.contactPointA,C.contactPointA,R);k(C.contactPointA,C.contactPointA,N);y(C.contactPointA,C.contactPointA,B.position);y(C.contactPointB,K,G);k(C.contactPointB,C.contactPointB,G);y(C.contactPointB,C.contactPointB,D.position);this.contactEquations.push(C);this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}}}this.enableFrictionReduction&&
this.enableFriction&&t&&this.frictionEquations.push(this.createFrictionFromAverage(t));return t};var Ba=p.fromValues(0,0);l.projectConvexOntoAxis=function(a,b,e,g,d){var m=null,l=null,q;p.rotate(Ba,g,-e);for(e=0;e<a.vertices.length;e++){q=a.vertices[e];q=z(q,Ba);if(null===m||q>m)m=q;if(null===l||q<l)l=q}l>m&&(a=l,l=m,m=a);b=z(b,g);p.set(d,l+b,m+b)};var Ca=p.fromValues(0,0),da=p.fromValues(0,0),Aa=p.fromValues(0,0),$=p.fromValues(0,0),la=p.fromValues(0,0),X=p.fromValues(0,0);l.findSeparatingAxis=function(a,
b,e,g,d,m,q){var f=null,n=!1,r=!1;if(a instanceof G&&g instanceof G)for(var t=0;2!==t;t++){var h=a,v=e;1===t&&(v=m);for(var s=0;2!==s;s++){0===s?p.set($,0,1):1===s&&p.set($,1,0);0!==v&&p.rotate($,$,v);l.projectConvexOntoAxis(a,b,e,$,la);l.projectConvexOntoAxis(g,d,m,$,X);var n=la,w=X;la[0]>X[0]&&(w=la,n=X);w=w[0]-n[1];n=0>=w;if(null===f||w>f)p.copy(q,$),f=w,r=n}}else for(t=0;2!==t;t++)for(h=a,v=e,1===t&&(h=g,v=m),s=0;s!==h.vertices.length;s++)if(p.rotate(da,h.vertices[s],v),p.rotate(Aa,h.vertices[(s+
1)%h.vertices.length],v),y(Ca,Aa,da),p.rotate90cw($,Ca),p.normalize($,$),l.projectConvexOntoAxis(a,b,e,$,la),l.projectConvexOntoAxis(g,d,m,$,X),n=la,w=X,la[0]>X[0]&&(w=la,n=X),w=w[0]-n[1],n=0>=w,null===f||w>f)p.copy(q,$),f=w,r=n;return r};var Da=p.fromValues(0,0),Ga=p.fromValues(0,0),ga=p.fromValues(0,0);l.getClosestEdge=function(a,b,e,g){p.rotate(Da,e,-b);g&&p.scale(Da,Da,-1);b=-1;e=a.vertices.length;g=-1;for(var d=0;d!==e;d++){y(Ga,a.vertices[(d+1)%e],a.vertices[d%e]);p.rotate90cw(ga,Ga);p.normalize(ga,
ga);var m=z(ga,Da);if(-1===b||m>g)b=d%e,g=m}return b};var qa=p.create(),ma=p.create(),ea=p.create(),ta=p.create(),ua=p.create(),na=p.create(),Ea=p.create();l.prototype[e.CIRCLE|e.HEIGHTFIELD]=l.prototype.circleHeightfield=function(a,b,e,g,d,m,l,q,f,n){g=m.data;n=n||b.radius;q=m.elementWidth;var r=Math.floor((e[0]-n-l[0])/q),t=Math.ceil((e[0]+n-l[0])/q);0>r&&(r=0);t>=g.length&&(t=g.length-1);for(var h=g[r],v=g[t],s=r;s<t;s++)g[s]<v&&(v=g[s]),g[s]>h&&(h=g[s]);if(e[1]-n>h)return f?!1:0;h=!1;for(s=r;s<
t;s++)if(p.set(ea,s*q,g[s]),p.set(ta,(s+1)*q,g[s+1]),p.add(ea,ea,l),p.add(ta,ta,l),p.sub(na,ta,ea),p.rotate(na,na,Math.PI/2),p.normalize(na,na),p.scale(qa,na,-n),p.add(qa,qa,e),p.sub(ma,qa,ea),h=p.dot(ma,na),qa[0]>=ea[0]&&qa[0]<ta[0]&&0>=h){if(f)return!0;p.scale(ma,na,-h);p.add(ua,qa,ma);p.copy(Ea,na);v=this.createContactEquation(d,a,m,b);p.copy(v.normalA,Ea);p.scale(v.contactPointB,v.normalA,-n);k(v.contactPointB,v.contactPointB,e);y(v.contactPointB,v.contactPointB,a.position);p.copy(v.contactPointA,
ua);p.sub(v.contactPointA,v.contactPointA,d.position);this.contactEquations.push(v);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v))}h=!1;if(0<n)for(s=r;s<=t;s++)if(p.set(ea,s*q,g[s]),p.add(ea,ea,l),p.sub(ma,e,ea),p.squaredLength(ma)<Math.pow(n,2)){if(f)return!0;h=!0;v=this.createContactEquation(d,a,m,b);p.copy(v.normalA,ma);p.normalize(v.normalA,v.normalA);p.scale(v.contactPointB,v.normalA,-n);k(v.contactPointB,v.contactPointB,e);y(v.contactPointB,v.contactPointB,
a.position);y(v.contactPointA,ea,l);k(v.contactPointA,v.contactPointA,l);y(v.contactPointA,v.contactPointA,d.position);this.contactEquations.push(v);this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v))}return h?1:0};var ra=p.create(),va=p.create(),wa=p.create(),ka=new b([p.create(),p.create(),p.create(),p.create()]);l.prototype[e.RECTANGLE|e.HEIGHTFIELD]=l.prototype[e.CONVEX|e.HEIGHTFIELD]=l.prototype.convexHeightfield=function(a,b,e,g,d,m,l,q,f){q=m.data;m=m.elementWidth;
var n=Math.floor((a.aabb.lowerBound[0]-l[0])/m),r=Math.ceil((a.aabb.upperBound[0]-l[0])/m);0>n&&(n=0);r>=q.length&&(r=q.length-1);for(var t=q[n],h=q[r],v=n;v<r;v++)q[v]<h&&(h=q[v]),q[v]>t&&(t=q[v]);if(a.aabb.lowerBound[1]>t)return f?!1:0;t=0;for(v=n;v<r;v++)p.set(ra,v*m,q[v]),p.set(va,(v+1)*m,q[v+1]),p.add(ra,ra,l),p.add(va,va,l),p.set(wa,.5*(va[0]+ra[0]),.5*(va[1]+ra[1]-100)),p.sub(ka.vertices[0],va,wa),p.sub(ka.vertices[1],ra,wa),p.copy(ka.vertices[2],ka.vertices[1]),p.copy(ka.vertices[3],ka.vertices[0]),
ka.vertices[2][1]-=100,ka.vertices[3][1]-=100,t+=this.convexConvex(a,b,e,g,d,ka,wa,0,f);return t}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/Narrowphase.js","/collision")},{"../equations/ContactEquation":24,"../equations/Equation":25,"../equations/FrictionEquation":26,"../math/vec2":33,
"../objects/Body":34,"../shapes/Circle":40,"../shapes/Convex":41,"../shapes/Rectangle":46,"../shapes/Shape":47,"../utils/TupleDictionary":51,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],16:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(){v.call(this,v.SAP);this.axisList=[];this.world=null;this.axisIndex=0;var a=this.axisList;this._addBodyHandler=
function(b){a.push(b.body)};this._removeBodyHandler=function(b){b=a.indexOf(b.body);-1!==b&&a.splice(b,1)}}var u=d("../utils/Utils"),v=d("../collision/Broadphase");f.exports=l;l.prototype=new v;l.prototype.setWorld=function(a){this.axisList.length=0;u.appendArray(this.axisList,a.bodies);a.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler);a.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler);this.world=a};l.sortAxisList=function(a,b){b|=0;for(var e=
1,g=a.length;e<g;e++){for(var d=a[e],m=e-1;0<=m&&!(a[m].aabb.lowerBound[b]<=d.aabb.lowerBound[b]);m--)a[m+1]=a[m];a[m+1]=d}return a};l.prototype.getCollisionPairs=function(a){a=this.axisList;var b=this.result,e=this.axisIndex;b.length=0;for(var g=a.length;g--;){var d=a[g];d.aabbNeedsUpdate&&d.updateAABB()}l.sortAxisList(a,e);g=0;for(d=a.length|0;g!==d;g++)for(var m=a[g],q=g+1;q<d;q++){var n=a[q];if(!(n.aabb.lowerBound[e]<=m.aabb.upperBound[e]))break;v.canCollide(m,n)&&this.boundingVolumeCheck(m,n)&&
b.push(m,n)}return b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/collision/SAPBroadphase.js","/collision")},{"../collision/Broadphase":12,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],17:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a,b,e,g){this.type=e;g=u.defaults(g,{collideConnected:!0,wakeUpBodies:!0});this.equations=[];this.bodyA=a;this.bodyB=b;this.collideConnected=g.collideConnected;g.wakeUpBodies&&(a&&a.wakeUp(),b&&b.wakeUp())}f.exports=l;var u=d("../utils/Utils");l.prototype.update=function(){throw Error("method update() not implmemented in this Constraint subclass!");};l.DISTANCE=1;l.GEAR=2;l.LOCK=3;l.PRISMATIC=4;l.REVOLUTE=5;l.prototype.setStiffness=
function(a){for(var b=this.equations,e=0;e!==b.length;e++){var g=b[e];g.stiffness=a;g.needsUpdate=!0}};l.prototype.setRelaxation=function(a){for(var b=this.equations,e=0;e!==b.length;e++){var g=b[e];g.relaxation=a;g.needsUpdate=!0}}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/Constraint.js",
"/constraints")},{"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],18:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a,b,e){e=y.defaults(e,{localAnchorA:[0,0],localAnchorB:[0,0]});u.call(this,a,b,u.DISTANCE,e);this.localAnchorA=p.fromValues(e.localAnchorA[0],e.localAnchorA[1]);this.localAnchorB=p.fromValues(e.localAnchorB[0],e.localAnchorB[1]);var g=
this.localAnchorA,d=this.localAnchorB;this.distance=0;if("number"===typeof e.distance)this.distance=e.distance;else{var m=p.create(),l=p.create(),q=p.create();p.rotate(m,g,a.angle);p.rotate(l,d,b.angle);p.add(q,b.position,l);p.sub(q,q,m);p.sub(q,q,a.position);this.distance=p.length(q)}e="undefined"===typeof e.maxForce?Number.MAX_VALUE:e.maxForce;a=new v(a,b,-e,e);this.equations=[a];this.maxForce=e;var q=p.create(),n=p.create(),f=p.create(),r=this;a.computeGq=function(){var a=this.bodyA,b=this.bodyB,
e=a.position,m=b.position;p.rotate(n,g,a.angle);p.rotate(f,d,b.angle);p.add(q,m,f);p.sub(q,q,n);p.sub(q,q,e);return p.length(q)-r.distance};this.setMaxForce(e);this.upperLimitEnabled=!1;this.upperLimit=1;this.lowerLimitEnabled=!1;this.position=this.lowerLimit=0}var u=d("./Constraint"),v=d("../equations/Equation"),p=d("../math/vec2"),y=d("../utils/Utils");f.exports=l;l.prototype=new u;var k=p.create(),z=p.create(),D=p.create();l.prototype.update=function(){var a=this.bodyA,b=this.bodyB,e=a.position,
g=b.position,d=this.equations[0],m=this.equations[0].G;p.rotate(z,this.localAnchorA,a.angle);p.rotate(D,this.localAnchorB,b.angle);p.add(k,g,D);p.sub(k,k,z);p.sub(k,k,e);this.position=p.length(k);a=!1;this.upperLimitEnabled&&this.position>this.upperLimit&&(d.maxForce=0,d.minForce=-this.maxForce,this.distance=this.upperLimit,a=!0);this.lowerLimitEnabled&&this.position<this.lowerLimit&&(d.maxForce=this.maxForce,d.minForce=0,this.distance=this.lowerLimit,a=!0);!this.lowerLimitEnabled&&!this.upperLimitEnabled||
a?(d.enabled=!0,p.normalize(k,k),d=p.crossLength(z,k),a=p.crossLength(D,k),m[0]=-k[0],m[1]=-k[1],m[2]=-d,m[3]=k[0],m[4]=k[1],m[5]=a):d.enabled=!1};l.prototype.setMaxForce=function(a){var b=this.equations[0];b.minForce=-a;b.maxForce=a};l.prototype.getMaxForce=function(a){return this.equations[0].maxForce}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:
"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/DistanceConstraint.js","/constraints")},{"../equations/Equation":25,"../math/vec2":33,"../utils/Utils":52,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],19:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a,b,e){e=e||{};u.call(this,a,b,u.GEAR,e);this.ratio="number"===typeof e.ratio?
e.ratio:1;this.angle="number"===typeof e.angle?e.angle:b.angle-this.ratio*a.angle;e.angle=this.angle;e.ratio=this.ratio;this.equations=[new v(a,b,e)];"number"===typeof e.maxTorque&&this.setMaxTorque(e.maxTorque)}var u=d("./Constraint");d("../equations/Equation");var v=d("../equations/AngleLockEquation");d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.update=function(){var a=this.equations[0];a.ratio!==this.ratio&&a.setRatio(this.ratio);a.angle=this.angle};l.prototype.setMaxTorque=function(a){this.equations[0].setMaxTorque(a)};
l.prototype.getMaxTorque=function(a){return this.equations[0].maxForce}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/GearConstraint.js","/constraints")},{"../equations/AngleLockEquation":23,"../equations/Equation":25,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],20:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a,b,e){e=e||{};u.call(this,a,b,u.LOCK,e);var g="undefined"===typeof e.maxForce?Number.MAX_VALUE:e.maxForce,d=new p(a,b,-g,g),m=new p(a,b,-g,g),l=new p(a,b,-g,g),q=v.create(),n=v.create(),f=this;d.computeGq=function(){v.rotate(q,f.localOffsetB,a.angle);v.sub(n,b.position,a.position);v.sub(n,n,q);return n[0]};m.computeGq=function(){v.rotate(q,f.localOffsetB,a.angle);v.sub(n,b.position,a.position);v.sub(n,n,q);return n[1]};
var r=v.create(),t=v.create();l.computeGq=function(){v.rotate(r,f.localOffsetB,b.angle-f.localAngleB);v.scale(r,r,-1);v.sub(n,a.position,b.position);v.add(n,n,r);v.rotate(t,r,-Math.PI/2);v.normalize(t,t);return v.dot(n,t)};this.localOffsetB=v.create();e.localOffsetB?v.copy(this.localOffsetB,e.localOffsetB):(v.sub(this.localOffsetB,b.position,a.position),v.rotate(this.localOffsetB,this.localOffsetB,-a.angle));this.localAngleB=0;this.localAngleB="number"===typeof e.localAngleB?e.localAngleB:b.angle-
a.angle;this.equations.push(d,m,l);this.setMaxForce(g)}var u=d("./Constraint"),v=d("../math/vec2"),p=d("../equations/Equation");f.exports=l;l.prototype=new u;l.prototype.setMaxForce=function(a){for(var b=this.equations,e=0;e<this.equations.length;e++)b[e].maxForce=a,b[e].minForce=-a};l.prototype.getMaxForce=function(){return this.equations[0].maxForce};var y=v.create(),k=v.create(),z=v.create(),D=v.fromValues(1,0),C=v.fromValues(0,1);l.prototype.update=function(){var a=this.equations[0],b=this.equations[1],
e=this.equations[2],g=this.bodyB;v.rotate(y,this.localOffsetB,this.bodyA.angle);v.rotate(k,this.localOffsetB,g.angle-this.localAngleB);v.scale(k,k,-1);v.rotate(z,k,Math.PI/2);v.normalize(z,z);a.G[0]=-1;a.G[1]=0;a.G[2]=-v.crossLength(y,D);a.G[3]=1;b.G[0]=0;b.G[1]=-1;b.G[2]=-v.crossLength(y,C);b.G[4]=1;e.G[0]=-z[0];e.G[1]=-z[1];e.G[3]=z[0];e.G[4]=z[1];e.G[5]=v.crossLength(k,z)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/LockConstraint.js","/constraints")},{"../equations/Equation":25,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],21:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,x){function l(a,b,e){e=e||{};u.call(this,a,b,u.PRISMATIC,e);var g=y.fromValues(0,
0),d=y.fromValues(1,0),m=y.fromValues(0,0);e.localAnchorA&&y.copy(g,e.localAnchorA);e.localAxisA&&y.copy(d,e.localAxisA);e.localAnchorB&&y.copy(m,e.localAnchorB);this.localAnchorA=g;this.localAnchorB=m;this.localAxisA=d;var l=this.maxForce="undefined"!==typeof e.maxForce?e.maxForce:Number.MAX_VALUE,q=new p(a,b,-l,l),n=new y.create,f=new y.create,r=new y.create,t=new y.create;q.computeGq=function(){return y.dot(r,t)};q.updateJacobian=function(){var e=this.G,l=a.position,q=b.position;y.rotate(n,g,a.angle);
y.rotate(f,m,b.angle);y.add(r,q,f);y.sub(r,r,l);y.sub(r,r,n);y.rotate(t,d,a.angle+Math.PI/2);e[0]=-t[0];e[1]=-t[1];e[2]=-y.crossLength(n,t)+y.crossLength(t,r);e[3]=t[0];e[4]=t[1];e[5]=y.crossLength(f,t)};this.equations.push(q);e.disableRotationalLock||(q=new k(a,b,-l,l),this.equations.push(q));this.velocity=this.position=0;this.lowerLimitEnabled="undefined"!==typeof e.lowerLimit?!0:!1;this.upperLimitEnabled="undefined"!==typeof e.upperLimit?!0:!1;this.lowerLimit="undefined"!==typeof e.lowerLimit?
e.lowerLimit:0;this.upperLimit="undefined"!==typeof e.upperLimit?e.upperLimit:1;this.upperLimitEquation=new v(a,b);this.lowerLimitEquation=new v(a,b);this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0;this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=l;this.motorEquation=new p(a,b);this.motorEnabled=!1;this.motorSpeed=0;var h=this;e=this.motorEquation;e.computeGq=function(){return 0};e.computeGW=function(){var a=this.bodyA,b=this.bodyB;return this.gmult(this.G,a.velocity,
a.angularVelocity,b.velocity,b.angularVelocity)+h.motorSpeed}}var u=d("./Constraint"),v=d("../equations/ContactEquation"),p=d("../equations/Equation"),y=d("../math/vec2"),k=d("../equations/RotationalLockEquation");f.exports=l;l.prototype=new u;var z=y.create(),D=y.create(),C=y.create(),H=y.create(),B=y.create(),L=y.create();l.prototype.update=function(){var a=this.equations,b=this.upperLimit,e=this.lowerLimit,g=this.upperLimitEquation,d=this.lowerLimitEquation,m=this.bodyA,l=this.bodyB,q=this.localAxisA,
n=this.localAnchorA,f=this.localAnchorB;a[0].updateJacobian();y.rotate(z,q,m.angle);y.rotate(H,n,m.angle);y.add(D,H,m.position);y.rotate(B,f,l.angle);y.add(C,B,l.position);q=this.position=y.dot(C,z)-y.dot(D,z);this.motorEnabled&&(n=this.motorEquation.G,n[0]=z[0],n[1]=z[1],n[2]=y.crossLength(z,B),n[3]=-z[0],n[4]=-z[1],n[5]=-y.crossLength(z,H));this.upperLimitEnabled&&q>b?(y.scale(g.normalA,z,-1),y.sub(g.contactPointA,D,m.position),y.sub(g.contactPointB,C,l.position),y.scale(L,z,b),y.add(g.contactPointA,
g.contactPointA,L),-1===a.indexOf(g)&&a.push(g)):(b=a.indexOf(g),-1!==b&&a.splice(b,1));this.lowerLimitEnabled&&q<e?(y.scale(d.normalA,z,1),y.sub(d.contactPointA,D,m.position),y.sub(d.contactPointB,C,l.position),y.scale(L,z,e),y.sub(d.contactPointB,d.contactPointB,L),-1===a.indexOf(d)&&a.push(d)):(b=a.indexOf(d),-1!==b&&a.splice(b,1))};l.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)};l.prototype.disableMotor=function(){if(this.motorEnabled){var a=
this.equations.indexOf(this.motorEquation);this.equations.splice(a,1);this.motorEnabled=!1}};l.prototype.setLimits=function(a,b){"number"===typeof a?(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1);"number"===typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/PrismaticConstraint.js","/constraints")},{"../equations/ContactEquation":24,"../equations/Equation":25,"../equations/RotationalLockEquation":27,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],22:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,
s,r,x){function l(a,b,e){e=e||{};u.call(this,a,b,u.REVOLUTE,e);var g=this.maxForce="undefined"!==typeof e.maxForce?e.maxForce:Number.MAX_VALUE;this.pivotA=k.create();this.pivotB=k.create();e.worldPivot?(k.sub(this.pivotA,e.worldPivot,a.position),k.sub(this.pivotB,e.worldPivot,b.position),k.rotate(this.pivotA,this.pivotA,-a.angle),k.rotate(this.pivotB,this.pivotB,-b.angle)):(k.copy(this.pivotA,e.localPivotA),k.copy(this.pivotB,e.localPivotB));var d=this.equations=[new v(a,b,-g,g),new v(a,b,-g,g)];
e=d[0];var d=d[1],m=this;e.computeGq=function(){k.rotate(z,m.pivotA,a.angle);k.rotate(D,m.pivotB,b.angle);k.add(B,b.position,D);k.sub(B,B,a.position);k.sub(B,B,z);return k.dot(B,C)};d.computeGq=function(){k.rotate(z,m.pivotA,a.angle);k.rotate(D,m.pivotB,b.angle);k.add(B,b.position,D);k.sub(B,B,a.position);k.sub(B,B,z);return k.dot(B,H)};d.minForce=e.minForce=-g;d.maxForce=e.maxForce=g;this.motorEquation=new p(a,b);this.motorEnabled=!1;this.angle=0;this.upperLimitEnabled=this.lowerLimitEnabled=!1;
this.upperLimit=this.lowerLimit=0;this.upperLimitEquation=new y(a,b);this.lowerLimitEquation=new y(a,b);this.upperLimitEquation.minForce=0;this.lowerLimitEquation.maxForce=0}var u=d("./Constraint"),v=d("../equations/Equation"),p=d("../equations/RotationalVelocityEquation"),y=d("../equations/RotationalLockEquation"),k=d("../math/vec2");f.exports=l;var z=k.create(),D=k.create(),C=k.fromValues(1,0),H=k.fromValues(0,1),B=k.create();l.prototype=new u;l.prototype.setLimits=function(a,b){"number"===typeof a?
(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1);"number"===typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)};l.prototype.update=function(){var a=this.bodyA,b=this.bodyB,e=this.pivotA,g=this.pivotB,d=this.equations,m=d[0],l=d[1],q=this.upperLimit,n=this.lowerLimit,f=this.upperLimitEquation,r=this.lowerLimitEquation,t=this.angle=b.angle-a.angle;this.upperLimitEnabled&&t>q?(f.angle=q,-1===d.indexOf(f)&&d.push(f)):
(q=d.indexOf(f),-1!==q&&d.splice(q,1));this.lowerLimitEnabled&&t<n?(r.angle=n,-1===d.indexOf(r)&&d.push(r)):(q=d.indexOf(r),-1!==q&&d.splice(q,1));k.rotate(z,e,a.angle);k.rotate(D,g,b.angle);m.G[0]=-1;m.G[1]=0;m.G[2]=-k.crossLength(z,C);m.G[3]=1;m.G[4]=0;m.G[5]=k.crossLength(D,C);l.G[0]=0;l.G[1]=-1;l.G[2]=-k.crossLength(z,H);l.G[3]=0;l.G[4]=1;l.G[5]=k.crossLength(D,H)};l.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)};l.prototype.disableMotor=
function(){if(this.motorEnabled){var a=this.equations.indexOf(this.motorEquation);this.equations.splice(a,1);this.motorEnabled=!1}};l.prototype.motorIsEnabled=function(){return!!this.motorEnabled};l.prototype.setMotorSpeed=function(a){if(this.motorEnabled){var b=this.equations.indexOf(this.motorEquation);this.equations[b].relativeVelocity=a}};l.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/constraints/RevoluteConstraint.js","/constraints")},{"../equations/Equation":25,"../equations/RotationalLockEquation":27,"../equations/RotationalVelocityEquation":28,"../math/vec2":33,"./Constraint":17,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],23:[function(d,f,k,h,a,b,e){(function(a,
b,e,n,h,t,s,r,k){function l(a,b,e){e=e||{};u.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE);this.angle=e.angle||0;this.ratio="number"===typeof e.ratio?e.ratio:1;this.setRatio(this.ratio)}var u=d("./Equation");d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.constructor=l;l.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle};l.prototype.setRatio=function(a){var b=this.G;b[2]=a;b[5]=-1;this.ratio=a};l.prototype.setMaxTorque=function(a){this.maxForce=
a;this.minForce=-a}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/equations/AngleLockEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],24:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){u.call(this,a,b,0,Number.MAX_VALUE);this.contactPointA=v.create();this.penetrationVec=v.create();this.contactPointB=v.create();this.normalA=v.create();this.restitution=0;this.firstImpact=!1;this.shapeB=this.shapeA=null}var u=d("./Equation"),v=d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.constructor=l;l.prototype.computeB=function(a,b,e){var g=this.contactPointA,d=this.contactPointB,m=this.bodyA.position,
l=this.bodyB.position,q=this.penetrationVec,n=this.normalA,f=this.G,r=v.crossLength(g,n),t=v.crossLength(d,n);f[0]=-n[0];f[1]=-n[1];f[2]=-r;f[3]=n[0];f[4]=n[1];f[5]=t;v.add(q,l,d);v.sub(q,q,m);v.sub(q,q,g);this.firstImpact&&0!==this.restitution?(d=0,g=1/b*(1+this.restitution)*this.computeGW()):(d=v.dot(n,q)+this.offset,g=this.computeGW());m=this.computeGiMf();return-d*a-g*b-e*m}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/equations/ContactEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],25:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e,g){this.minForce="undefined"===typeof e?-Number.MAX_VALUE:e;this.maxForce="undefined"===
typeof g?Number.MAX_VALUE:g;this.bodyA=a;this.bodyB=b;this.stiffness=l.DEFAULT_STIFFNESS;this.relaxation=l.DEFAULT_RELAXATION;this.G=new v.ARRAY_TYPE(6);for(a=0;6>a;a++)this.G[a]=0;this.epsilon=this.b=this.a=this.offset=0;this.timeStep=1/60;this.needsUpdate=!0;this.relativeVelocity=this.multiplier=0;this.enabled=!0}f.exports=l;var u=d("../math/vec2"),v=d("../utils/Utils");d("../objects/Body");l.prototype.constructor=l;l.DEFAULT_STIFFNESS=1E6;l.DEFAULT_RELAXATION=4;l.prototype.update=function(){var a=
this.stiffness,b=this.relaxation,e=this.timeStep;this.a=4/(e*(1+4*b));this.b=4*b/(1+4*b);this.epsilon=4/(e*e*a*(1+4*b));this.needsUpdate=!1};l.prototype.gmult=function(a,b,e,g,d){return a[0]*b[0]+a[1]*b[1]+a[2]*e+a[3]*g[0]+a[4]*g[1]+a[5]*d};l.prototype.computeB=function(a,b,e){var g=this.computeGW(),d=this.computeGq(),m=this.computeGiMf();return-d*a-g*b-m*e};var p=u.create(),y=u.create();l.prototype.computeGq=function(){return this.gmult(this.G,p,this.bodyA.angle,y,this.bodyB.angle)+this.offset};
l.prototype.computeGW=function(){var a=this.bodyA,b=this.bodyB;return this.gmult(this.G,a.velocity,a.angularVelocity,b.velocity,b.angularVelocity)+this.relativeVelocity};l.prototype.computeGWlambda=function(){var a=this.bodyA,b=this.bodyB;return this.gmult(this.G,a.vlambda,a.wlambda,b.vlambda,b.wlambda)};var A=u.create(),z=u.create();l.prototype.computeGiMf=function(){var a=this.bodyA,b=this.bodyB,e=a.angularForce,g=b.force,d=b.angularForce,m=b.invMassSolve,l=a.invInertiaSolve,b=b.invInertiaSolve,
q=this.G;u.scale(A,a.force,a.invMassSolve);u.scale(z,g,m);return this.gmult(q,A,e*l,z,d*b)};l.prototype.computeGiMGt=function(){var a=this.bodyA,b=this.bodyB,e=a.invMassSolve,g=b.invMassSolve,d=this.G;return d[0]*d[0]*e+d[1]*d[1]*e+d[2]*d[2]*a.invInertiaSolve+d[3]*d[3]*g+d[4]*d[4]*g+d[5]*d[5]*b.invInertiaSolve};var D=u.create(),C=u.create(),H=u.create();u.create();u.create();u.create();l.prototype.addToWlambda=function(a){var b=this.bodyA,e=this.bodyB,g=b.invMassSolve,d=e.invMassSolve,m=b.invInertiaSolve,
l=e.invInertiaSolve,q=this.G;C[0]=q[0];C[1]=q[1];H[0]=q[3];H[1]=q[4];u.scale(D,C,g*a);u.add(b.vlambda,b.vlambda,D);b.wlambda+=m*q[2]*a;u.scale(D,H,d*a);u.add(e.vlambda,e.vlambda,D);e.wlambda+=l*q[5]*a};l.prototype.computeInvC=function(a){return 1/(this.computeGiMGt()+a)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{},d("buffer").Buffer,h,a,b,e,"/equations/Equation.js","/equations")},{"../math/vec2":33,"../objects/Body":34,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],26:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){v.call(this,a,b,-e,e);this.contactPointA=u.create();this.contactPointB=u.create();this.t=u.create();this.contactEquations=[];this.shapeB=
this.shapeA=null;this.frictionCoefficient=.3}var u=d("../math/vec2"),v=d("./Equation");d("../utils/Utils");f.exports=l;l.prototype=new v;l.prototype.constructor=l;l.prototype.setSlipForce=function(a){this.maxForce=a;this.minForce=-a};l.prototype.getSlipForce=function(){return this.maxForce};l.prototype.computeB=function(a,b,e){a=this.contactPointA;var g=this.contactPointB,d=this.t,m=this.G;m[0]=-d[0];m[1]=-d[1];m[2]=-u.crossLength(a,d);m[3]=d[0];m[4]=d[1];m[5]=u.crossLength(g,d);a=this.computeGW();
g=this.computeGiMf();return-a*b-e*g}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/equations/FrictionEquation.js","/equations")},{"../math/vec2":33,"../utils/Utils":52,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],27:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){e=e||{};u.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE);this.angle=e.angle||0;a=this.G;a[2]=1;a[5]=-1}var u=d("./Equation"),v=d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.constructor=l;var p=v.create(),y=v.create(),A=v.fromValues(1,0),z=v.fromValues(0,1);l.prototype.computeGq=function(){v.rotate(p,A,this.bodyA.angle+this.angle);v.rotate(y,z,this.bodyB.angle);return v.dot(p,y)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/equations/RotationalLockEquation.js","/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],28:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){u.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE);this.ratio=this.relativeVelocity=
1}var u=d("./Equation");d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.constructor=l;l.prototype.computeB=function(a,b,e){a=this.G;a[2]=-1;a[5]=this.ratio;a=this.computeGiMf();return-this.computeGW()*b-e*a}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/equations/RotationalVelocityEquation.js",
"/equations")},{"../math/vec2":33,"./Equation":25,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],29:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){a=function(){};f.exports=a;a.prototype={constructor:a,on:function(a,b,e){b.context=e||this;void 0===this._listeners&&(this._listeners={});e=this._listeners;void 0===e[a]&&(e[a]=[]);-1===e[a].indexOf(b)&&e[a].push(b);return this},has:function(a,
b){if(void 0===this._listeners)return!1;var e=this._listeners;if(b){if(void 0!==e[a]&&-1!==e[a].indexOf(b))return!0}else if(void 0!==e[a])return!0;return!1},off:function(a,b){if(void 0===this._listeners)return this;var e=this._listeners,g=e[a].indexOf(b);-1!==g&&e[a].splice(g,1);return this},emit:function(a){if(void 0===this._listeners)return this;var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var e=0,g=b.length;e<g;e++){var d=b[e];d.call(d.context,a)}}return this}}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/events/EventEmitter.js","/events")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],30:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){e=e||{};if(!(a instanceof u&&b instanceof u))throw Error("First two arguments must be Material instances.");this.id=l.idCounter++;
this.materialA=a;this.materialB=b;this.friction="undefined"!==typeof e.friction?Number(e.friction):.3;this.restitution="undefined"!==typeof e.restitution?Number(e.restitution):0;this.stiffness="undefined"!==typeof e.stiffness?Number(e.stiffness):v.DEFAULT_STIFFNESS;this.relaxation="undefined"!==typeof e.relaxation?Number(e.relaxation):v.DEFAULT_RELAXATION;this.frictionStiffness="undefined"!==typeof e.frictionStiffness?Number(e.frictionStiffness):v.DEFAULT_STIFFNESS;this.frictionRelaxation="undefined"!==
typeof e.frictionRelaxation?Number(e.frictionRelaxation):v.DEFAULT_RELAXATION;this.surfaceVelocity="undefined"!==typeof e.surfaceVelocity?Number(e.surfaceVelocity):0;this.contactSkinSize=.005}var u=d("./Material"),v=d("../equations/Equation");f.exports=l;l.idCounter=0}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},
d("buffer").Buffer,h,a,b,e,"/material/ContactMaterial.js","/material")},{"../equations/Equation":25,"./Material":31,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],31:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){function l(a){this.id=a||l.idCounter++}f.exports=l;l.idCounter=0}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/material/Material.js","/material")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],32:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){var l={GetArea:function(a){if(6>a.length)return 0;for(var b=a.length-2,e=0,g=0;g<b;g+=2)e+=(a[g+2]-a[g])*(a[g+1]+a[g+3]);e+=(a[0]-a[b])*(a[b+1]+a[1]);
return.5*-e},Triangulate:function(a){var b=a.length>>1;if(3>b)return[];for(var e=[],g=[],d=0;d<b;d++)g.push(d);for(d=0;3<b;){var m=g[(d+0)%b],q=g[(d+1)%b],n=g[(d+2)%b],f=a[2*m],r=a[2*m+1],t=a[2*q],h=a[2*q+1],s=a[2*n],w=a[2*n+1],k=!1;if(l._convex(f,r,t,h,s,w))for(var k=!0,x=0;x<b;x++){var O=g[x];if(O!=m&&O!=q&&O!=n&&l._PointInTriangle(a[2*O],a[2*O+1],f,r,t,h,s,w)){k=!1;break}}if(k)e.push(m,q,n),g.splice((d+1)%b,1),b--,d=0;else if(d++>3*b)break}e.push(g[0],g[1],g[2]);return e},_PointInTriangle:function(a,
b,e,g,d,m,q,l){q-=e;l-=g;d-=e;m-=g;a-=e;e=b-g;b=q*q+l*l;g=q*d+l*m;q=q*a+l*e;l=d*d+m*m;d=d*a+m*e;m=1/(b*l-g*g);l=(l*q-g*d)*m;q=(b*d-g*q)*m;return 0<=l&&0<=q&&1>l+q},_convex:function(a,b,e,g,d,m){return 0<=(b-g)*(d-e)+(e-a)*(m-g)}};f.exports=l}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,
"/math/polyk.js","/math")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],33:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){var l=f.exports={},u=d("../utils/Utils");l.crossLength=function(a,b){return a[0]*b[1]-a[1]*b[0]};l.crossVZ=function(a,b,e){l.rotate(a,b,-Math.PI/2);l.scale(a,a,e);return a};l.crossZV=function(a,b,e){l.rotate(a,e,Math.PI/2);l.scale(a,a,b);return a};l.rotate=
function(a,b,e){if(0!==e){var g=Math.cos(e);e=Math.sin(e);var d=b[0];b=b[1];a[0]=g*d-e*b;a[1]=e*d+g*b}else a[0]=b[0],a[1]=b[1]};l.rotate90cw=function(a,b){var e=b[0];a[0]=b[1];a[1]=-e};l.toLocalFrame=function(a,b,e,g){l.copy(a,b);l.sub(a,a,e);l.rotate(a,a,-g)};l.toGlobalFrame=function(a,b,e,g){l.copy(a,b);l.rotate(a,a,g);l.add(a,a,e)};l.centroid=function(a,b,e,g){l.add(a,b,e);l.add(a,a,g);l.scale(a,a,1/3);return a};l.create=function(){var a=new u.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a};l.clone=function(a){var b=
new u.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b};l.fromValues=function(a,b){var e=new u.ARRAY_TYPE(2);e[0]=a;e[1]=b;return e};l.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};l.set=function(a,b,e){a[0]=b;a[1]=e;return a};l.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];return a};l.subtract=function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];return a};l.sub=l.subtract;l.multiply=function(a,b,e){a[0]=b[0]*e[0];a[1]=b[1]*e[1];return a};l.mul=l.multiply;l.divide=function(a,b,e){a[0]=b[0]/e[0];a[1]=b[1]/
e[1];return a};l.div=l.divide;l.scale=function(a,b,e){a[0]=b[0]*e;a[1]=b[1]*e;return a};l.distance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1];return Math.sqrt(e*e+g*g)};l.dist=l.distance;l.squaredDistance=function(a,b){var e=b[0]-a[0],g=b[1]-a[1];return e*e+g*g};l.sqrDist=l.squaredDistance;l.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};l.len=l.length;l.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};l.sqrLen=l.squaredLength;l.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];
return a};l.normalize=function(a,b){var e=b[0],g=b[1],e=e*e+g*g;0<e&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e);return a};l.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};l.str=function(a){return"vec2("+a[0]+", "+a[1]+")"}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/math/vec2.js","/math")},
{"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],34:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){a=a||{};A.call(this);this.id=++l._idCounter;this.world=null;this.shapes=[];this.shapeOffsets=[];this.shapeAngles=[];this.mass=a.mass||0;this.invInertiaSolve=this.invMassSolve=this.invInertia=this.inertia=this.invMass=0;this.fixedRotation=!!a.fixedRotation||
!1;this.position=u.fromValues(0,0);a.position&&u.copy(this.position,a.position);this.interpolatedPosition=u.fromValues(0,0);this.interpolatedAngle=0;this.previousPosition=u.fromValues(0,0);this.previousAngle=0;this.velocity=u.fromValues(0,0);a.velocity&&u.copy(this.velocity,a.velocity);this.vlambda=u.fromValues(0,0);this.wlambda=0;this.angle=a.angle||0;this.angularVelocity=a.angularVelocity||0;this.force=u.create();a.force&&u.copy(this.force,a.force);this.angularForce=a.angularForce||0;this.damping=
"number"===typeof a.damping?a.damping:.1;this.angularDamping="number"===typeof a.angularDamping?a.angularDamping:.1;this.type=l.STATIC;this.type="undefined"!==typeof a.type?a.type:a.mass?l.DYNAMIC:l.STATIC;this.boundingRadius=0;this.aabb=new y;this.allowSleep=this.aabbNeedsUpdate=!0;this.wantsToSleep=!1;this.sleepState=l.AWAKE;this.sleepSpeedLimit=.2;this.gravityScale=this.sleepTimeLimit=1;this.timeLastSleepy=0;this.concavePath=null;this.lastAngularDampingScale=this.lastDampingScale=1;this.lastDampingTimeStep=
-1;this._wakeUpAfterNarrowphase=!1;this.updateMassProperties()}var u=d("../math/vec2"),v=d("poly-decomp"),p=d("../shapes/Convex"),y=d("../collision/AABB"),A=d("../events/EventEmitter");f.exports=l;l.prototype=new A;l._idCounter=0;l.prototype.updateSolveMassProperties=function(){this.sleepState===l.SLEEPING||this.type===l.KINEMATIC?this.invInertiaSolve=this.invMassSolve=0:(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)};l.prototype.setDensity=function(a){this.mass=this.getArea()*
a;this.updateMassProperties()};l.prototype.getArea=function(){for(var a=0,b=0;b<this.shapes.length;b++)a+=this.shapes[b].area;return a};l.prototype.getAABB=function(){this.aabbNeedsUpdate&&this.updateAABB();return this.aabb};var z=new y,D=u.create();l.prototype.updateAABB=function(){for(var a=this.shapes,b=this.shapeOffsets,e=this.shapeAngles,g=a.length,d=this.angle,m=0;m!==g;m++){var q=a[m],l=e[m]+d;u.rotate(D,b[m],d);u.add(D,D,this.position);q.computeAABB(z,D,l);0===m?this.aabb.copy(z):this.aabb.extend(z)}this.aabbNeedsUpdate=
!1};l.prototype.updateBoundingRadius=function(){for(var a=this.shapes,b=this.shapeOffsets,e=a.length,g=0,d=0;d!==e;d++){var m=a[d],q=u.length(b[d]),m=m.boundingRadius;q+m>g&&(g=q+m)}this.boundingRadius=g};l.prototype.addShape=function(a,b,e){e=e||0;b=b?u.fromValues(b[0],b[1]):u.fromValues(0,0);this.shapes.push(a);this.shapeOffsets.push(b);this.shapeAngles.push(e);this.updateMassProperties();this.updateBoundingRadius();this.aabbNeedsUpdate=!0};l.prototype.removeShape=function(a){a=this.shapes.indexOf(a);
return-1!==a?(this.shapes.splice(a,1),this.shapeOffsets.splice(a,1),this.shapeAngles.splice(a,1),this.aabbNeedsUpdate=!0):!1};l.prototype.updateMassProperties=function(){if(this.type===l.STATIC||this.type===l.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var a=this.shapes,b=a.length,e=this.mass/b,g=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var d=0;d<b;d++)var m=a[d],q=u.squaredLength(this.shapeOffsets[d]),
m=m.computeMomentOfInertia(e),g=g+(m+e*q);this.inertia=g;this.invInertia=0<g?1/g:0}this.invMass=1/this.mass}};var C=u.create();l.prototype.applyForce=function(a,b){u.sub(C,b,this.position);u.add(this.force,this.force,a);var e=u.crossLength(C,a);this.angularForce+=e};l.prototype.toLocalFrame=function(a,b){u.toLocalFrame(a,b,this.position,this.angle)};l.prototype.toWorldFrame=function(a,b){u.toGlobalFrame(a,b,this.position,this.angle)};l.prototype.fromPolygon=function(a,b){b=b||{};for(var e=this.shapes.length;0<=
e;--e)this.removeShape(this.shapes[e]);var g=new v.Polygon;g.vertices=a;g.makeCCW();"number"===typeof b.removeCollinearPoints&&g.removeCollinearPoints(b.removeCollinearPoints);if("undefined"===typeof b.skipSimpleCheck&&!g.isSimple())return!1;this.concavePath=g.vertices.slice(0);for(e=0;e<this.concavePath.length;e++){var d=[0,0];u.copy(d,this.concavePath[e]);this.concavePath[e]=d}for(var g=b.optimalDecomp?g.decomp():g.quickDecomp(),m=u.create(),e=0;e!==g.length;e++){for(var q=new p(g[e].vertices),
l=0;l!==q.vertices.length;l++)d=q.vertices[l],u.sub(d,d,q.centerOfMass);u.scale(m,q.centerOfMass,1);q.updateTriangles();q.updateCenterOfMass();q.updateBoundingRadius();this.addShape(q,m)}this.adjustCenterOfMass();return this.aabbNeedsUpdate=!0};u.fromValues(0,0);var H=u.fromValues(0,0),B=u.fromValues(0,0),L=u.fromValues(0,0);l.prototype.adjustCenterOfMass=function(){var a=0;u.set(B,0,0);for(var b=0;b!==this.shapes.length;b++){var e=this.shapes[b],g=this.shapeOffsets[b];u.scale(H,g,e.area);u.add(B,
B,H);a+=e.area}u.scale(L,B,1/a);for(b=0;b!==this.shapes.length;b++)(g=this.shapeOffsets[b])||(g=this.shapeOffsets[b]=u.create()),u.sub(g,g,L);u.add(this.position,this.position,L);for(b=0;this.concavePath&&b<this.concavePath.length;b++)u.sub(this.concavePath[b],this.concavePath[b],L);this.updateMassProperties();this.updateBoundingRadius()};l.prototype.setZeroForce=function(){u.set(this.force,0,0);this.angularForce=0};l.prototype.resetConstraintVelocity=function(){u.set(this.vlambda,0,0);this.wlambda=
0};l.prototype.addConstraintVelocity=function(){var a=this.velocity;u.add(a,a,this.vlambda);this.angularVelocity+=this.wlambda};l.prototype.applyDamping=function(a){this.type===l.DYNAMIC&&(a!==this.lastDampingTimeStep&&(this.lastDampingScale=Math.pow(1-this.damping,a),this.lastAngularDampingScale=Math.pow(1-this.angularDamping,a),this.lastDampingTimeStep=a),a=this.velocity,u.scale(a,a,this.lastDampingScale),this.angularVelocity*=this.lastAngularDampingScale)};l.prototype.wakeUp=function(){var a=this.sleepState;
this.sleepState=l.AWAKE;this.idleTime=0;a!==l.AWAKE&&this.emit(l.wakeUpEvent)};l.prototype.sleep=function(){this.sleepState=l.SLEEPING;this.angularForce=this.angularVelocity=0;u.set(this.velocity,0,0);u.set(this.force,0,0);this.emit(l.sleepEvent)};l.prototype.sleepTick=function(a,b,e){if(this.allowSleep&&this.type!==l.SLEEPING){this.wantsToSleep=!1;a=u.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2);var g=Math.pow(this.sleepSpeedLimit,2);a>=g?(this.idleTime=0,this.sleepState=l.AWAKE):
(this.idleTime+=e,this.sleepState=l.SLEEPY);this.idleTime>this.sleepTimeLimit&&(b?this.wantsToSleep=!0:this.sleep())}};l.prototype.getVelocityFromPosition=function(a,b){a=a||u.create();u.sub(a,this.position,this.previousPosition);u.scale(a,a,1/b);return a};l.prototype.getAngularVelocityFromPosition=function(a){return(this.angle-this.previousAngle)/a};l.prototype.overlaps=function(a){return this.world.overlapKeeper.bodiesAreOverlapping(this,a)};l.sleepyEvent={type:"sleepy"};l.sleepEvent={type:"sleep"};
l.wakeUpEvent={type:"wakeup"};l.DYNAMIC=1;l.STATIC=2;l.KINEMATIC=4;l.AWAKE=0;l.SLEEPY=1;l.SLEEPING=2}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/objects/Body.js","/objects")},{"../collision/AABB":11,"../events/EventEmitter":29,"../math/vec2":33,"../shapes/Convex":41,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1,"poly-decomp":9}],35:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){e=e||{};v.call(this,a,b,e);this.localAnchorA=u.fromValues(0,0);this.localAnchorB=u.fromValues(0,0);e.localAnchorA&&u.copy(this.localAnchorA,e.localAnchorA);e.localAnchorB&&u.copy(this.localAnchorB,e.localAnchorB);e.worldAnchorA&&this.setWorldAnchorA(e.worldAnchorA);e.worldAnchorB&&this.setWorldAnchorB(e.worldAnchorB);a=u.create();b=u.create();this.getWorldAnchorA(a);this.getWorldAnchorB(b);a=u.distance(a,
b);this.restLength="number"===typeof e.restLength?e.restLength:a}var u=d("../math/vec2"),v=d("./Spring");d("../utils/Utils");f.exports=l;l.prototype=new v;l.prototype.setWorldAnchorA=function(a){this.bodyA.toLocalFrame(this.localAnchorA,a)};l.prototype.setWorldAnchorB=function(a){this.bodyB.toLocalFrame(this.localAnchorB,a)};l.prototype.getWorldAnchorA=function(a){this.bodyA.toWorldFrame(a,this.localAnchorA)};l.prototype.getWorldAnchorB=function(a){this.bodyB.toWorldFrame(a,this.localAnchorB)};var p=
u.create(),y=u.create(),A=u.create(),z=u.create(),D=u.create(),C=u.create(),H=u.create(),B=u.create(),L=u.create();l.prototype.applyForce=function(){var a=this.stiffness,b=this.damping,e=this.restLength,g=this.bodyA,d=this.bodyB;this.getWorldAnchorA(D);this.getWorldAnchorB(C);u.sub(H,D,g.position);u.sub(B,C,d.position);u.sub(p,C,D);var m=u.len(p);u.normalize(y,p);u.sub(A,d.velocity,g.velocity);u.crossZV(L,d.angularVelocity,B);u.add(A,A,L);u.crossZV(L,g.angularVelocity,H);u.sub(A,A,L);u.scale(z,y,
-a*(m-e)-b*u.dot(A,y));u.sub(g.force,g.force,z);u.add(d.force,d.force,z);a=u.crossLength(H,z);b=u.crossLength(B,z);g.angularForce-=a;d.angularForce+=b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/objects/LinearSpring.js","/objects")},{"../math/vec2":33,"../utils/Utils":52,"./Spring":37,
"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],36:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){e=e||{};u.call(this,a,b,e);this.restAngle="number"===typeof e.restAngle?e.restAngle:b.angle-a.angle}d("../math/vec2");var u=d("./Spring");f.exports=l;l.prototype=new u;l.prototype.applyForce=function(){var a=this.bodyA,b=this.bodyB,e=-this.stiffness*(b.angle-a.angle-
this.restAngle)-this.damping*(b.angularVelocity-a.angularVelocity)*0;a.angularForce-=e;b.angularForce+=e}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/objects/RotationalSpring.js","/objects")},{"../math/vec2":33,"./Spring":37,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],37:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b,e){e=u.defaults(e,{stiffness:100,damping:1});this.stiffness=e.stiffness;this.damping=e.damping;this.bodyA=a;this.bodyB=b}d("../math/vec2");var u=d("../utils/Utils");f.exports=l;l.prototype.applyForce=function(){}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==
typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/objects/Spring.js","/objects")},{"../math/vec2":33,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],38:[function(d,f,k,h,a,b,e){d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js");d("buffer");f.exports={AABB:d("./collision/AABB"),
AngleLockEquation:d("./equations/AngleLockEquation"),Body:d("./objects/Body"),Broadphase:d("./collision/Broadphase"),Capsule:d("./shapes/Capsule"),Circle:d("./shapes/Circle"),Constraint:d("./constraints/Constraint"),ContactEquation:d("./equations/ContactEquation"),ContactMaterial:d("./material/ContactMaterial"),Convex:d("./shapes/Convex"),DistanceConstraint:d("./constraints/DistanceConstraint"),Equation:d("./equations/Equation"),EventEmitter:d("./events/EventEmitter"),FrictionEquation:d("./equations/FrictionEquation"),
GearConstraint:d("./constraints/GearConstraint"),GridBroadphase:d("./collision/GridBroadphase"),GSSolver:d("./solver/GSSolver"),Heightfield:d("./shapes/Heightfield"),Line:d("./shapes/Line"),LockConstraint:d("./constraints/LockConstraint"),Material:d("./material/Material"),Narrowphase:d("./collision/Narrowphase"),NaiveBroadphase:d("./collision/NaiveBroadphase"),Particle:d("./shapes/Particle"),Plane:d("./shapes/Plane"),RevoluteConstraint:d("./constraints/RevoluteConstraint"),PrismaticConstraint:d("./constraints/PrismaticConstraint"),
Rectangle:d("./shapes/Rectangle"),RotationalVelocityEquation:d("./equations/RotationalVelocityEquation"),SAPBroadphase:d("./collision/SAPBroadphase"),Shape:d("./shapes/Shape"),Solver:d("./solver/Solver"),Spring:d("./objects/Spring"),LinearSpring:d("./objects/LinearSpring"),RotationalSpring:d("./objects/RotationalSpring"),Utils:d("./utils/Utils"),World:d("./world/World"),vec2:d("./math/vec2"),version:d("../package.json").version}},{"../package.json":10,"./collision/AABB":11,"./collision/Broadphase":12,
"./collision/GridBroadphase":13,"./collision/NaiveBroadphase":14,"./collision/Narrowphase":15,"./collision/SAPBroadphase":16,"./constraints/Constraint":17,"./constraints/DistanceConstraint":18,"./constraints/GearConstraint":19,"./constraints/LockConstraint":20,"./constraints/PrismaticConstraint":21,"./constraints/RevoluteConstraint":22,"./equations/AngleLockEquation":23,"./equations/ContactEquation":24,"./equations/Equation":25,"./equations/FrictionEquation":26,"./equations/RotationalVelocityEquation":28,
"./events/EventEmitter":29,"./material/ContactMaterial":30,"./material/Material":31,"./math/vec2":33,"./objects/Body":34,"./objects/LinearSpring":35,"./objects/RotationalSpring":36,"./objects/Spring":37,"./shapes/Capsule":39,"./shapes/Circle":40,"./shapes/Convex":41,"./shapes/Heightfield":42,"./shapes/Line":43,"./shapes/Particle":44,"./shapes/Plane":45,"./shapes/Rectangle":46,"./shapes/Shape":47,"./solver/GSSolver":48,"./solver/Solver":49,"./utils/Utils":52,"./world/World":56,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],39:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){this.length=a||1;this.radius=b||1;u.call(this,u.CAPSULE)}var u=d("./Shape"),v=d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.computeMomentOfInertia=function(a){var b=this.radius,e=this.length+b,b=2*b;return a*(b*b+e*e)/12};l.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2};l.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*
this.length};var p=v.create();l.prototype.computeAABB=function(a,b,e){var g=this.radius;v.set(p,this.length/2,0);0!==e&&v.rotate(p,p,e);v.set(a.upperBound,Math.max(p[0]+g,-p[0]+g),Math.max(p[1]+g,-p[1]+g));v.set(a.lowerBound,Math.min(p[0]-g,-p[0]-g),Math.min(p[1]-g,-p[1]-g));v.add(a.lowerBound,a.lowerBound,b);v.add(a.upperBound,a.upperBound,b)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Capsule.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],40:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){this.radius=a||1;u.call(this,u.CIRCLE)}var u=d("./Shape"),v=d("../math/vec2");f.exports=l;l.prototype=new u;
l.prototype.computeMomentOfInertia=function(a){var b=this.radius;return a*b*b/2};l.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius};l.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius};l.prototype.computeAABB=function(a,b,e){e=this.radius;v.set(a.upperBound,e,e);v.set(a.lowerBound,-e,-e);b&&(v.add(a.lowerBound,a.lowerBound,b),v.add(a.upperBound,a.upperBound,b))}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Circle.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],41:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){this.vertices=[];this.axes=[];for(var e=0;e<a.length;e++){var g=v.create();v.copy(g,a[e]);this.vertices.push(g)}if(b)for(e=
0;e<b.length;e++)g=v.create(),v.copy(g,b[e]),this.axes.push(g);else for(e=0;e<a.length;e++){var g=a[e],d=a[(e+1)%a.length],m=v.create();v.sub(m,d,g);v.rotate90cw(m,m);v.normalize(m,m);this.axes.push(m)}this.centerOfMass=v.fromValues(0,0);this.triangles=[];this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass());this.boundingRadius=0;u.call(this,u.CONVEX);this.updateBoundingRadius();this.updateArea();if(0>this.area)throw Error("Convex vertices must be given in conter-clockwise winding.");
}var u=d("./Shape"),v=d("../math/vec2"),p=d("../math/polyk");d("poly-decomp");f.exports=l;l.prototype=new u;var y=v.create(),A=v.create();l.prototype.projectOntoLocalAxis=function(a,b){var e=null,g=null,d;a=y;for(var m=0;m<this.vertices.length;m++){d=this.vertices[m];d=v.dot(d,a);if(null===e||d>e)e=d;if(null===g||d<g)g=d}g>e&&(m=g,g=e,e=m);v.set(b,g,e)};l.prototype.projectOntoWorldAxis=function(a,b,e,g){var d=A;this.projectOntoLocalAxis(a,g);0!==e?v.rotate(d,a,e):d=a;a=v.dot(b,d);v.set(g,g[0]+a,g[1]+
a)};l.prototype.updateTriangles=function(){this.triangles.length=0;for(var a=[],b=0;b<this.vertices.length;b++){var e=this.vertices[b];a.push(e[0],e[1])}a=p.Triangulate(a);for(b=0;b<a.length;b+=3)this.triangles.push([a[b],a[b+1],a[b+2]])};var z=v.create(),D=v.create(),C=v.create(),H=v.create(),B=v.create();v.create();v.create();v.create();v.create();l.prototype.updateCenterOfMass=function(){var a=this.triangles,b=this.vertices,e=this.centerOfMass,g=C,d=H,m=B;v.set(e,0,0);for(var q=0,n=0;n!==a.length;n++)m=
a[n],g=b[m[0]],d=b[m[1]],m=b[m[2]],v.centroid(z,g,d,m),g=l.triangleArea(g,d,m),q+=g,v.scale(D,z,g),v.add(e,e,D);v.scale(e,e,1/q)};l.prototype.computeMomentOfInertia=function(a){for(var b=0,e=0,g=this.vertices.length,d=g-1,m=0;m<g;d=m,m++)var q=this.vertices[d],l=this.vertices[m],d=Math.abs(v.crossLength(q,l)),q=v.dot(l,l)+v.dot(l,q)+v.dot(q,q),b=b+d*q,e=e+d;return a/6*(b/e)};l.prototype.updateBoundingRadius=function(){for(var a=this.vertices,b=0,e=0;e!==a.length;e++){var g=v.squaredLength(a[e]);g>
b&&(b=g)}this.boundingRadius=Math.sqrt(b)};l.triangleArea=function(a,b,e){return.5*((b[0]-a[0])*(e[1]-a[1])-(e[0]-a[0])*(b[1]-a[1]))};l.prototype.updateArea=function(){this.updateTriangles();this.area=0;for(var a=this.triangles,b=this.vertices,e=0;e!==a.length;e++){var g=a[e],g=l.triangleArea(b[g[0]],b[g[1]],b[g[2]]);this.area+=g}};l.prototype.computeAABB=function(a,b,e){a.setFromPoints(this.vertices,b,e,0)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Convex.js","/shapes")},{"../math/polyk":32,"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1,"poly-decomp":9}],42:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){b=v.defaults(b,{maxValue:null,minValue:null,elementWidth:.1});if(null===
b.minValue||null===b.maxValue){b.maxValue=a[0];b.minValue=a[0];for(var e=0;e!==a.length;e++){var g=a[e];g>b.maxValue&&(b.maxValue=g);g<b.minValue&&(b.minValue=g)}}this.data=a;this.maxValue=b.maxValue;this.minValue=b.minValue;this.elementWidth=b.elementWidth;u.call(this,u.HEIGHTFIELD)}var u=d("./Shape");d("../math/vec2");var v=d("../utils/Utils");f.exports=l;l.prototype=new u;l.prototype.computeMomentOfInertia=function(a){return Number.MAX_VALUE};l.prototype.updateBoundingRadius=function(){this.boundingRadius=
Number.MAX_VALUE};l.prototype.updateArea=function(){for(var a=this.data,b=0,e=0;e<a.length-1;e++)b+=(a[e]+a[e+1])/2*this.elementWidth;this.area=b};l.prototype.computeAABB=function(a,b,e){a.upperBound[0]=this.elementWidth*this.data.length+b[0];a.upperBound[1]=this.maxValue+b[1];a.lowerBound[0]=b[0];a.lowerBound[1]=-Number.MAX_VALUE}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Heightfield.js","/shapes")},{"../math/vec2":33,"../utils/Utils":52,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],43:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){this.length=a||1;u.call(this,u.LINE)}var u=d("./Shape"),v=d("../math/vec2");f.exports=l;l.prototype=
new u;l.prototype.computeMomentOfInertia=function(a){return a*Math.pow(this.length,2)/12};l.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var p=[v.create(),v.create()];l.prototype.computeAABB=function(a,b,e){var g=this.length/2;v.set(p[0],-g,0);v.set(p[1],g,0);a.setFromPoints(p,b,e,0)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Line.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],44:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(){u.call(this,u.PARTICLE)}var u=d("./Shape"),v=d("../math/vec2");f.exports=l;l.prototype=new u;l.prototype.computeMomentOfInertia=function(a){return 0};
l.prototype.updateBoundingRadius=function(){this.boundingRadius=0};l.prototype.computeAABB=function(a,b,e){v.copy(a.lowerBound,b);v.copy(a.upperBound,b)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Particle.js","/shapes")},{"../math/vec2":33,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],45:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(){u.call(this,u.PLANE)}var u=d("./Shape"),v=d("../math/vec2");d("../utils/Utils");f.exports=l;l.prototype=new u;l.prototype.computeMomentOfInertia=function(a){return 0};l.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE};l.prototype.computeAABB=function(a,b,e){var g=0,d=v.set;"number"===typeof e&&(g=e%(2*Math.PI));0===g?(d(a.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),d(a.upperBound,Number.MAX_VALUE,
0)):g===Math.PI/2?(d(a.lowerBound,0,-Number.MAX_VALUE),d(a.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):g===Math.PI?(d(a.lowerBound,-Number.MAX_VALUE,0),d(a.upperBound,Number.MAX_VALUE,Number.MAX_VALUE)):g===3*Math.PI/2?(d(a.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),d(a.upperBound,0,Number.MAX_VALUE)):(d(a.lowerBound,-Number.MAX_VALUE,-Number.MAX_VALUE),d(a.upperBound,Number.MAX_VALUE,Number.MAX_VALUE));v.add(a.lowerBound,a.lowerBound,b);v.add(a.upperBound,a.upperBound,b)};l.prototype.updateArea=
function(){this.area=Number.MAX_VALUE}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Plane.js","/shapes")},{"../math/vec2":33,"../utils/Utils":52,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],46:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){this.width=a||1;this.height=b||1;var e=[u.fromValues(-a/2,-b/2),u.fromValues(a/2,-b/2),u.fromValues(a/2,b/2),u.fromValues(-a/2,b/2)],g=[u.fromValues(1,0),u.fromValues(0,1)];p.call(this,e,g);this.type=v.RECTANGLE}var u=d("../math/vec2"),v=d("./Shape"),p=d("./Convex");f.exports=l;l.prototype=new p([]);l.prototype.computeMomentOfInertia=function(a){var b=this.width,e=this.height;return a*(e*e+b*b)/12};l.prototype.updateBoundingRadius=
function(){var a=this.width,b=this.height;this.boundingRadius=Math.sqrt(a*a+b*b)/2};u.create();u.create();u.create();u.create();l.prototype.computeAABB=function(a,b,e){a.setFromPoints(this.vertices,b,e,0)};l.prototype.updateArea=function(){this.area=this.width*this.height}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{},d("buffer").Buffer,h,a,b,e,"/shapes/Rectangle.js","/shapes")},{"../math/vec2":33,"./Convex":41,"./Shape":47,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],47:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){function l(a){this.type=a;this.id=l.idCounter++;this.boundingRadius=0;this.collisionMask=this.collisionGroup=1;a&&this.updateBoundingRadius();this.material=null;this.area=
0;this.sensor=!1;this.updateArea()}f.exports=l;l.idCounter=0;l.CIRCLE=1;l.PARTICLE=2;l.PLANE=4;l.CONVEX=8;l.LINE=16;l.RECTANGLE=32;l.CAPSULE=64;l.HEIGHTFIELD=128;l.prototype.computeMomentOfInertia=function(a){throw Error("Shape.computeMomentOfInertia is not implemented in this Shape...");};l.prototype.updateBoundingRadius=function(){throw Error("Shape.updateBoundingRadius is not implemented in this Shape...");};l.prototype.updateArea=function(){};l.prototype.computeAABB=function(a,b,e){}}).call(this,
d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/shapes/Shape.js","/shapes")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],48:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){u.call(this,
a,u.GS);a=a||{};this.iterations=a.iterations||10;this.tolerance=a.tolerance||1E-10;this.arrayStep=30;this.lambda=new v.ARRAY_TYPE(this.arrayStep);this.Bs=new v.ARRAY_TYPE(this.arrayStep);this.invCs=new v.ARRAY_TYPE(this.arrayStep);this.useZeroRHS=!1;this.usedIterations=this.frictionIterations=0}d("../math/vec2");var u=d("./Solver"),v=d("../utils/Utils"),p=d("../equations/FrictionEquation");f.exports=l;l.prototype=new u;l.prototype.solve=function(a,b){this.sortEquations();var e=0,g=this.iterations,
d=this.frictionIterations,m=this.equations,q=m.length,n=Math.pow(this.tolerance*q,2),f=b.bodies,r=b.bodies.length,t=this.useZeroRHS,h=this.lambda;this.usedIterations=0;if(q)for(var s=0;s!==r;s++)e=f[s],e.updateSolveMassProperties();h.length<q&&(h=this.lambda=new v.ARRAY_TYPE(q+this.arrayStep),this.Bs=new v.ARRAY_TYPE(q+this.arrayStep),this.invCs=new v.ARRAY_TYPE(q+this.arrayStep));for(var k=h.length;k--;)h[k]=0;for(var k=this.invCs,w=this.Bs,h=this.lambda,s=0;s!==m.length;s++){var x=m[s];if(x.timeStep!==
a||x.needsUpdate)x.timeStep=a,x.update();w[s]=x.computeB(x.a,x.b,a);k[s]=x.computeInvC(x.epsilon)}var u;if(0!==q){for(s=0;s!==r;s++)e=f[s],e.resetConstraintVelocity();if(d){for(e=0;e!==d;e++){for(s=u=0;s!==q;s++)x=m[s],x=l.iterateEquation(s,x,x.epsilon,w,k,h,t,a,e),u+=Math.abs(x);this.usedIterations++;if(u*u<=n)break}l.updateMultipliers(m,h,1/a);for(s=0;s!==q;s++)if(d=m[s],d instanceof p){for(x=e=0;x!==d.contactEquations.length;x++)e+=d.contactEquations[x].multiplier;e*=d.frictionCoefficient/d.contactEquations.length;
d.maxForce=e;d.minForce=-e}}for(e=0;e!==g;e++){for(s=u=0;s!==q;s++)x=m[s],x=l.iterateEquation(s,x,x.epsilon,w,k,h,t,a,e),u+=Math.abs(x);this.usedIterations++;if(u*u<=n)break}for(s=0;s!==r;s++)f[s].addConstraintVelocity();l.updateMultipliers(m,h,1/a)}};l.updateMultipliers=function(a,b,e){for(var g=a.length;g--;)a[g].multiplier=b[g]*e};l.iterateEquation=function(a,b,e,g,d,m,q,l,n){var f=g[a],r=d[a];d=m[a];var t=b.computeGWlambda();g=b.maxForce;n=b.minForce;q&&(f=0);e=r*(f-t-e*d);q=d+e;q<n*l?e=n*l-d:
q>g*l&&(e=g*l-d);m[a]+=e;b.addToWlambda(e);return e}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/solver/GSSolver.js","/solver")},{"../equations/FrictionEquation":26,"../math/vec2":33,"../utils/Utils":52,"./Solver":49,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],49:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a,b){a=a||{};u.call(this);this.type=b;this.equations=[];this.equationSortFunction=a.equationSortFunction||!1}d("../utils/Utils");var u=d("../events/EventEmitter");f.exports=l;l.prototype=new u;l.prototype.solve=function(a,b){throw Error("Solver.solve should be implemented by subclasses!");};var v={bodies:[]};l.prototype.solveIsland=function(a,b){this.removeAllEquations();b.equations.length&&(this.addEquations(b.equations),
v.bodies.length=0,b.getBodies(v.bodies),v.bodies.length&&this.solve(a,v))};l.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)};l.prototype.addEquation=function(a){a.enabled&&this.equations.push(a)};l.prototype.addEquations=function(a){for(var b=0,e=a.length;b!==e;b++){var g=a[b];g.enabled&&this.equations.push(g)}};l.prototype.removeEquation=function(a){a=this.equations.indexOf(a);-1!==a&&this.equations.splice(a,1)};l.prototype.removeAllEquations=
function(){this.equations.length=0};l.GS=1;l.ISLAND=2}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/solver/Solver.js","/solver")},{"../events/EventEmitter":29,"../utils/Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],50:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(){this.overlappingShapesLastState=new v;this.overlappingShapesCurrentState=new v;this.recordPool=[];this.tmpDict=new v;this.tmpArray1=[]}function u(a,b,e,g){this.shapeA=b;this.shapeB=g;this.bodyA=a;this.bodyB=e}var v=d("./TupleDictionary");d("./Utils");f.exports=l;l.prototype.tick=function(){for(var a=this.overlappingShapesLastState,b=this.overlappingShapesCurrentState,e=a.keys.length;e--;){var g=a.keys[e],d=a.getByKey(g),
g=b.getByKey(g);d&&!g&&this.recordPool.push(d)}a.reset();a.copy(b);b.reset()};l.prototype.setOverlapping=function(a,b,e,g){var d=this.overlappingShapesCurrentState;if(!d.get(b.id,g.id)){var m;this.recordPool.length?(m=this.recordPool.pop(),m.set(a,b,e,g)):m=new u(a,b,e,g);d.set(b.id,g.id,m)}};l.prototype.getNewOverlaps=function(a){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,a)};l.prototype.getEndOverlaps=function(a){return this.getDiff(this.overlappingShapesCurrentState,
this.overlappingShapesLastState,a)};l.prototype.bodiesAreOverlapping=function(a,b){for(var e=this.overlappingShapesCurrentState,g=e.keys.length;g--;){var d=e.data[e.keys[g]];if(d.bodyA===a&&d.bodyB===b||d.bodyA===b&&d.bodyB===a)return!0}return!1};l.prototype.getDiff=function(a,b,e){e=e||[];e.length=0;for(var g=b.keys.length;g--;){var d=b.keys[g],m=b.data[d];if(!m)throw Error("Key "+d+" had no data!");a.data[d]||e.push(m)}return e};l.prototype.isNewOverlap=function(a,b){var e=a.id|0,g=b.id|0,d=this.overlappingShapesCurrentState;
return!this.overlappingShapesLastState.get(e,g)&&!!d.get(e,g)};l.prototype.getNewBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)};l.prototype.getEndBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)};l.prototype.getBodyDiff=function(a,b){b=b||[];for(var e=this.tmpDict,g=a.length;g--;){var d=a[g];e.set(d.bodyA.id|0,d.bodyB.id|0,d)}for(g=e.keys.length;g--;)(d=
e.getByKey(e.keys[g]))&&b.push(d.bodyA,d.bodyB);e.reset();return b};u.prototype.set=function(a,b,e,g){u.call(this,a,b,e,g)}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/utils/OverlapKeeper.js","/utils")},{"./TupleDictionary":51,"./Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}],51:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(){this.data={};this.keys=[]}var u=d("./Utils");f.exports=l;l.prototype.getKey=function(a,b){a|=0;b|=0;return(a|0)===(b|0)?-1:((a|0)>(b|0)?a<<16|b&65535:b<<16|a&65535)|0};l.prototype.getByKey=function(a){return this.data[a|0]};l.prototype.get=function(a,b){return this.data[this.getKey(a,b)]};l.prototype.set=function(a,b,e){if(!e)throw Error("No data!");a=this.getKey(a,b);this.data[a]||this.keys.push(a);this.data[a]=e;return a};
l.prototype.reset=function(){for(var a=this.data,b=this.keys,e=b.length;e--;)delete a[b[e]];b.length=0};l.prototype.copy=function(a){this.reset();u.appendArray(this.keys,a.keys);for(var b=a.keys.length;b--;){var e=a.keys[b];this.data[e]=a.data[e]}}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,
h,a,b,e,"/utils/TupleDictionary.js","/utils")},{"./Utils":52,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],52:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){function l(){}f.exports=l;l.appendArray=function(a,b){if(15E4>b.length)a.push.apply(a,b);else for(var e=0,g=b.length;e!==g;++e)a.push(b[e])};l.splice=function(a,b,e){e=e||1;for(var g=a.length-e;b<g;b++)a[b]=a[b+e];a.length=
g};l.ARRAY_TYPE="undefined"!==typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!==typeof Float32Array?Float32Array:Array;l.extend=function(a,b){for(var e in b)a[e]=b[e]};l.defaults=function(a,b){a=a||{};for(var e in b)e in a||(a[e]=b[e]);return a}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,
b,e,"/utils/Utils.js","/utils")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],53:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(){this.equations=[];this.bodies=[]}var u=d("../objects/Body");f.exports=l;l.prototype.reset=function(){this.equations.length=this.bodies.length=0};var v=[];l.prototype.getBodies=function(a){a=a||[];for(var b=this.equations,e=v.length=0;e!==
b.length;e++){var g=b[e];-1===v.indexOf(g.bodyA.id)&&(a.push(g.bodyA),v.push(g.bodyA.id));-1===v.indexOf(g.bodyB.id)&&(a.push(g.bodyB),v.push(g.bodyB.id))}return a};l.prototype.wantsToSleep=function(){for(var a=0;a<this.bodies.length;a++){var b=this.bodies[a];if(b.type===u.DYNAMIC&&!b.wantsToSleep)return!1}return!0};l.prototype.sleep=function(){for(var a=0;a<this.bodies.length;a++)this.bodies[a].sleep();return!0}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/world/Island.js","/world")},{"../objects/Body":34,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],54:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){this._nodePool=[];this._islandPool=[];this.equations=[];this.islands=[];this.nodes=[];this.queue=[]}d("../math/vec2");var u=
d("./Island"),v=d("./IslandNode"),p=d("../objects/Body");f.exports=l;l.getUnvisitedNode=function(a){for(var b=a.length,e=0;e!==b;e++){var g=a[e];if(!g.visited&&g.body.type===p.DYNAMIC)return g}return!1};l.prototype.visit=function(a,b,e){b.push(a.body);b=a.equations.length;for(var g=0;g!==b;g++){var d=a.equations[g];-1===e.indexOf(d)&&e.push(d)}};l.prototype.bfs=function(a,b,e){var g=this.queue;g.length=0;g.push(a);a.visited=!0;for(this.visit(a,b,e);g.length;){a=g.pop();for(var d;d=l.getUnvisitedNode(a.neighbors);)d.visited=
!0,this.visit(d,b,e),d.body.type===p.DYNAMIC&&g.push(d)}};l.prototype.split=function(a){var b=a.bodies;a=this.nodes;for(var e=this.equations;a.length;)this._nodePool.push(a.pop());for(var g=0;g!==b.length;g++)if(this._nodePool.length){var d=this._nodePool.pop();d.reset();d.body=b[g];a.push(d)}else a.push(new v(b[g]));for(d=0;d!==e.length;d++){var m=e[d],g=b.indexOf(m.bodyA),q=b.indexOf(m.bodyB),g=a[g],q=a[q];g.neighbors.push(q);q.neighbors.push(g);g.equations.push(m);q.equations.push(m)}for(b=this.islands;b.length;)e=
b.pop(),e.reset(),this._islandPool.push(e);for(;d=l.getUnvisitedNode(a);)e=this._islandPool.length?this._islandPool.pop():new u,this.bfs(d,e.bodies,e.equations),b.push(e);return b}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/world/IslandManager.js","/world")},{"../math/vec2":33,"../objects/Body":34,
"./Island":53,"./IslandNode":55,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],55:[function(d,f,k,h,a,b,e){(function(a,b,e,d,h,t,s,r,k){function l(a){this.body=a;this.neighbors=[];this.equations=[];this.visited=!1}f.exports=l;l.prototype.reset=function(){this.equations.length=0;this.neighbors.length=0;this.visited=!1;this.body=null}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/world/IslandNode.js","/world")},{"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,buffer:1}],56:[function(d,f,k,h,a,b,e){(function(a,b,e,n,h,t,s,r,k){function l(a){H.apply(this);a=a||{};this.springs=[];this.bodies=[];this.disabledBodyCollisionPairs=[];this.solver=a.solver||new u;this.narrowphase=new M(this);
this.islandManager=new J;this.gravity=p.fromValues(0,-9.78);a.gravity&&p.copy(this.gravity,a.gravity);this.frictionGravity=p.length(this.gravity)||10;this.useFrictionGravityOnZeroGravity=this.useWorldGravityAsFrictionGravity=!0;this.doProfiling=a.doProfiling||!1;this.lastStepTime=0;this.broadphase=a.broadphase||new v;this.broadphase.setWorld(this);this.constraints=[];this.defaultMaterial=new L;this.defaultContactMaterial=new G(this.defaultMaterial,this.defaultMaterial);this.lastTimeStep=1/60;this.solveConstraints=
this.applyGravity=this.applyDamping=this.applySpringForces=!0;this.contactMaterials=[];this.time=0;this.stepping=!1;this.bodiesToBeRemoved=[];this.fixedStepTime=0;this.islandSplit="undefined"!==typeof a.islandSplit?!!a.islandSplit:!1;this.emitImpactEvent=!0;this._bodyIdCounter=this._constraintIdCounter=0;this.postStepEvent={type:"postStep"};this.addBodyEvent={type:"addBody",body:null};this.removeBodyEvent={type:"removeBody",body:null};this.addSpringEvent={type:"addSpring",spring:null};this.impactEvent=
{type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null};this.postBroadphaseEvent={type:"postBroadphase",pairs:null};this.sleepMode=l.NO_SLEEPING;this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]};this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null};this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null};this.overlappingShapesLastState={keys:[]};this.overlappingShapesCurrentState=
{keys:[]};this.overlapKeeper=new K}var u=d("../solver/GSSolver");d("../solver/Solver");var v=d("../collision/NaiveBroadphase"),p=d("../math/vec2"),y=d("../shapes/Circle");d("../shapes/Rectangle");var A=d("../shapes/Convex");d("../shapes/Line");var z=d("../shapes/Plane"),D=d("../shapes/Capsule"),C=d("../shapes/Particle"),H=d("../events/EventEmitter"),B=d("../objects/Body");d("../shapes/Shape");d("../objects/LinearSpring");var L=d("../material/Material"),G=d("../material/ContactMaterial");d("../constraints/DistanceConstraint");
d("../constraints/Constraint");d("../constraints/LockConstraint");d("../constraints/RevoluteConstraint");d("../constraints/PrismaticConstraint");d("../constraints/GearConstraint");d("../../package.json");d("../collision/Broadphase");d("../collision/SAPBroadphase");var M=d("../collision/Narrowphase"),E=d("../utils/Utils"),K=d("../utils/OverlapKeeper"),J=d("./IslandManager");d("../objects/RotationalSpring");f.exports=l;"undefined"===typeof performance&&(performance={});if(!performance.now){var O=Date.now();
performance.timing&&performance.timing.navigationStart&&(O=performance.timing.navigationStart);performance.now=function(){return Date.now()-O}}l.prototype=Object(H.prototype);l.NO_SLEEPING=1;l.BODY_SLEEPING=2;l.ISLAND_SLEEPING=4;l.prototype.addConstraint=function(a){this.constraints.push(a)};l.prototype.addContactMaterial=function(a){this.contactMaterials.push(a)};l.prototype.removeContactMaterial=function(a){a=this.contactMaterials.indexOf(a);-1!==a&&E.splice(this.contactMaterials,a,1)};l.prototype.getContactMaterial=
function(a,b){for(var e=this.contactMaterials,g=0,d=e.length;g!==d;g++){var m=e[g];if(m.materialA.id===a.id&&m.materialB.id===b.id||m.materialA.id===b.id&&m.materialB.id===a.id)return m}return!1};l.prototype.removeConstraint=function(a){a=this.constraints.indexOf(a);-1!==a&&E.splice(this.constraints,a,1)};p.create();p.create();p.create();p.create();p.create();p.create();var Q=p.create(),T=p.fromValues(0,0),R=p.fromValues(0,0);p.fromValues(0,0);var P=p.fromValues(0,0);l.prototype.step=function(a,b,
e){e=e||10;b=b||0;if(0===b)this.internalStep(a),this.time+=a;else{var g=Math.floor((this.time+b)/a)-Math.floor(this.time/a),g=Math.min(g,e);e=performance.now();for(var d=0;d!==g&&!(this.internalStep(a),performance.now()-e>1E3*a);d++);this.time+=b;a=this.time%a/a;for(b=0;b!==this.bodies.length;b++)g=this.bodies[b],g.type!==B.STATIC&&g.sleepState!==B.SLEEPING?(p.sub(P,g.position,g.previousPosition),p.scale(P,P,a),p.add(g.interpolatedPosition,g.position,P),g.interpolatedAngle=g.angle+(g.angle-g.previousAngle)*
a):(p.copy(g.interpolatedPosition,g.position),g.interpolatedAngle=g.angle)}};var U=[];l.prototype.internalStep=function(a){this.stepping=!0;var b=this.doProfiling,e=this.springs.length,g=this.springs,d=this.bodies,m=this.gravity,q=this.solver,n=this.bodies.length,f=this.broadphase,r=this.narrowphase,t=this.constraints,h,s=p.add,k=this.islandManager;this.overlapKeeper.tick();this.lastTimeStep=a;b&&(h=performance.now());if(this.useWorldGravityAsFrictionGravity){var w=p.length(this.gravity);0===w&&this.useFrictionGravityOnZeroGravity||
(this.frictionGravity=w)}if(this.applyGravity)for(w=0;w!==n;w++){var x=d[w],u=x.force;x.type===B.DYNAMIC&&x.sleepState!==B.SLEEPING&&(p.scale(Q,m,x.mass*x.gravityScale),s(u,u,Q))}if(this.applySpringForces)for(w=0;w!==e;w++)g[w].applyForce();if(this.applyDamping)for(w=0;w!==n;w++)x=d[w],x.type===B.DYNAMIC&&x.applyDamping(a);e=f.getCollisionPairs(this);m=this.disabledBodyCollisionPairs;for(w=m.length-2;0<=w;w-=2)for(g=e.length-2;0<=g;g-=2)(m[w]===e[g]&&m[w+1]===e[g+1]||m[w+1]===e[g]&&m[w]===e[g+1])&&
e.splice(g,2);m=t.length;for(w=0;w!==m;w++)if(f=t[w],!f.collideConnected)for(g=e.length-2;0<=g;g-=2)(f.bodyA===e[g]&&f.bodyB===e[g+1]||f.bodyB===e[g]&&f.bodyA===e[g+1])&&e.splice(g,2);this.postBroadphaseEvent.pairs=e;this.emit(this.postBroadphaseEvent);r.reset(this);w=0;for(m=e.length;w!==m;w+=2)for(f=e[w],s=e[w+1],x=0,u=f.shapes.length;x!==u;x++)for(var v=f.shapes[x],y=f.shapeOffsets[x],z=f.shapeAngles[x],g=0,A=s.shapes.length;g!==A;g++){var C=s.shapes[g],D=s.shapeOffsets[g],G=s.shapeAngles[g],H=
this.defaultContactMaterial;if(v.material&&C.material){var F=this.getContactMaterial(v.material,C.material);F&&(H=F)}this.runNarrowphase(r,f,v,y,z,s,C,D,G,H,this.frictionGravity)}for(w=0;w!==n;w++)e=d[w],e._wakeUpAfterNarrowphase&&(e.wakeUp(),e._wakeUpAfterNarrowphase=!1);if(this.has("endContact"))for(this.overlapKeeper.getEndOverlaps(U),w=this.endContactEvent,g=U.length;g--;)e=U[g],w.shapeA=e.shapeA,w.shapeB=e.shapeB,w.bodyA=e.bodyA,w.bodyB=e.bodyB,this.emit(w);w=this.preSolveEvent;w.contactEquations=
r.contactEquations;w.frictionEquations=r.frictionEquations;this.emit(w);m=t.length;for(w=0;w!==m;w++)t[w].update();if(r.contactEquations.length||r.frictionEquations.length||t.length)if(this.islandSplit){k.equations.length=0;E.appendArray(k.equations,r.contactEquations);E.appendArray(k.equations,r.frictionEquations);for(w=0;w!==m;w++)E.appendArray(k.equations,t[w].equations);k.split(this);for(w=0;w!==k.islands.length;w++)t=k.islands[w],t.equations.length&&q.solveIsland(a,t)}else{q.addEquations(r.contactEquations);
q.addEquations(r.frictionEquations);for(w=0;w!==m;w++)q.addEquations(t[w].equations);this.solveConstraints&&q.solve(a,this);q.removeAllEquations()}for(w=0;w!==n;w++)e=d[w],e.sleepState!==B.SLEEPING&&e.type!==B.STATIC&&l.integrateBody(e,a);for(w=0;w!==n;w++)d[w].setZeroForce();b&&(b=performance.now(),this.lastStepTime=b-h);if(this.emitImpactEvent&&this.has("impact"))for(h=this.impactEvent,w=0;w!==r.contactEquations.length;w++)b=r.contactEquations[w],b.firstImpact&&(h.bodyA=b.bodyA,h.bodyB=b.bodyB,
h.shapeA=b.shapeA,h.shapeB=b.shapeB,h.contactEquation=b,this.emit(h));if(this.sleepMode===l.BODY_SLEEPING)for(w=0;w!==n;w++)d[w].sleepTick(this.time,!1,a);else if(this.sleepMode===l.ISLAND_SLEEPING&&this.islandSplit){for(w=0;w!==n;w++)d[w].sleepTick(this.time,!0,a);for(w=0;w<this.islandManager.islands.length;w++)t=this.islandManager.islands[w],t.wantsToSleep()&&t.sleep()}this.stepping=!1;if(this.bodiesToBeRemoved.length){for(w=0;w!==this.bodiesToBeRemoved.length;w++)this.removeBody(this.bodiesToBeRemoved[w]);
this.bodiesToBeRemoved.length=0}this.emit(this.postStepEvent)};var Y=p.create(),aa=p.create();l.integrateBody=function(a,b){var e=a.invMass,g=a.force,d=a.position,m=a.velocity;p.copy(a.previousPosition,a.position);a.previousAngle=a.angle;a.fixedRotation||(a.angularVelocity+=a.angularForce*a.invInertia*b,a.angle+=a.angularVelocity*b);p.scale(Y,g,b*e);p.add(m,Y,m);p.scale(aa,m,b);p.add(d,d,aa);a.aabbNeedsUpdate=!0};l.prototype.runNarrowphase=function(a,b,e,g,d,m,q,l,n,f,r){if(0!==(e.collisionGroup&
q.collisionMask)&&0!==(q.collisionGroup&e.collisionMask)&&(p.rotate(T,g,b.angle),p.rotate(R,l,m.angle),p.add(T,T,b.position),p.add(R,R,m.position),g=d+b.angle,n+=m.angle,a.enableFriction=0<f.friction,a.frictionCoefficient=f.friction,a.slipForce=f.friction*r*(b.type===B.STATIC||b.type===B.KINEMATIC?m.mass:m.type===B.STATIC||m.type===B.KINEMATIC?b.mass:b.mass*m.mass/(b.mass+m.mass)),a.restitution=f.restitution,a.surfaceVelocity=f.surfaceVelocity,a.frictionStiffness=f.frictionStiffness,a.frictionRelaxation=
f.frictionRelaxation,a.stiffness=f.stiffness,a.relaxation=f.relaxation,a.contactSkinSize=f.contactSkinSize,r=a[e.type|q.type],f=0,r&&(f=e.sensor||q.sensor,d=a.frictionEquations.length,f=e.type<q.type?r.call(a,b,e,T,g,m,q,R,n,f):r.call(a,m,q,R,n,b,e,T,g,f),g=a.frictionEquations.length-d,f))){b.allowSleep&&b.type===B.DYNAMIC&&b.sleepState===B.SLEEPING&&m.sleepState===B.AWAKE&&m.type!==B.STATIC&&(r=p.squaredLength(m.velocity)+Math.pow(m.angularVelocity,2),n=Math.pow(m.sleepSpeedLimit,2),r>=2*n&&(b._wakeUpAfterNarrowphase=
!0));m.allowSleep&&m.type===B.DYNAMIC&&m.sleepState===B.SLEEPING&&b.sleepState===B.AWAKE&&b.type!==B.STATIC&&(r=p.squaredLength(b.velocity)+Math.pow(b.angularVelocity,2),n=Math.pow(b.sleepSpeedLimit,2),r>=2*n&&(m._wakeUpAfterNarrowphase=!0));this.overlapKeeper.setOverlapping(b,e,m,q);if(this.has("beginContact")&&this.overlapKeeper.isNewOverlap(e,q)){r=this.beginContactEvent;r.shapeA=e;r.shapeB=q;r.bodyA=b;r.bodyB=m;r.contactEquations.length=0;if("number"===typeof f)for(b=a.contactEquations.length-
f;b<a.contactEquations.length;b++)r.contactEquations.push(a.contactEquations[b]);this.emit(r)}if("number"===typeof f&&1<g)for(b=a.frictionEquations.length-g;b<a.frictionEquations.length;b++)e=a.frictionEquations[b],e.setSlipForce(e.getSlipForce()/g)}};l.prototype.addSpring=function(a){this.springs.push(a);this.addSpringEvent.spring=a;this.emit(this.addSpringEvent)};l.prototype.removeSpring=function(a){a=this.springs.indexOf(a);-1!==a&&E.splice(this.springs,a,1)};l.prototype.addBody=function(a){-1===
this.bodies.indexOf(a)&&(this.bodies.push(a),a.world=this,this.addBodyEvent.body=a,this.emit(this.addBodyEvent))};l.prototype.removeBody=function(a){if(this.stepping)this.bodiesToBeRemoved.push(a);else{a.world=null;var b=this.bodies.indexOf(a);-1!==b&&(E.splice(this.bodies,b,1),this.removeBodyEvent.body=a,a.resetConstraintVelocity(),this.emit(this.removeBodyEvent))}};l.prototype.getBodyById=function(a){for(var b=this.bodies,e=0;e<b.length;e++){var g=b[e];if(g.id===a)return g}return!1};l.prototype.disableBodyCollision=
function(a,b){this.disabledBodyCollisionPairs.push(a,b)};l.prototype.enableBodyCollision=function(a,b){for(var e=this.disabledBodyCollisionPairs,g=0;g<e.length;g+=2)if(e[g]===a&&e[g+1]===b||e[g+1]===a&&e[g]===b){e.splice(g,2);break}};l.prototype.clear=function(){this.fixedStepTime=this.time=0;this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var a=this.constraints,b=a.length-1;0<=b;b--)this.removeConstraint(a[b]);a=this.bodies;for(b=a.length-1;0<=b;b--)this.removeBody(a[b]);
a=this.springs;for(b=a.length-1;0<=b;b--)this.removeSpring(a[b]);a=this.contactMaterials;for(b=a.length-1;0<=b;b--)this.removeContactMaterial(a[b]);l.apply(this)};l.prototype.clone=function(){var a=new l;a.fromJSON(this.toJSON());return a};var F=p.create(),ba=p.fromValues(0,0),W=p.fromValues(0,0);l.prototype.hitTest=function(a,b,e){e=e||0;var g=new B({position:a}),d=new C;g.addShape(d);for(var m=this.narrowphase,q=[],l=0,n=b.length;l!==n;l++)for(var f=b[l],r=0,t=f.shapes.length;r!==t;r++){var h=f.shapes[r],
s=f.shapeAngles[r]||0;p.rotate(F,f.shapeOffsets[r]||ba,f.angle);p.add(F,F,f.position);s+=f.angle;(h instanceof y&&m.circleParticle(f,h,F,s,g,d,a,0,!0)||h instanceof A&&m.particleConvex(g,d,a,0,f,h,F,s,!0)||h instanceof z&&m.particlePlane(g,d,a,0,f,h,F,s,!0)||h instanceof D&&m.particleCapsule(g,d,a,0,f,h,F,s,!0)||h instanceof C&&p.squaredLength(p.sub(W,F,a))<e*e)&&q.push(f)}return q};l.prototype.setGlobalEquationParameters=function(a){a=a||{};for(var b=0;b!==this.constraints.length;b++)for(var e=this.constraints[b],
g=0;g!==e.equations.length;g++){var d=e.equations[g];"undefined"!==typeof a.stiffness&&(d.stiffness=a.stiffness);"undefined"!==typeof a.relaxation&&(d.relaxation=a.relaxation);d.needsUpdate=!0}for(b=0;b!==this.contactMaterials.length;b++)e=this.contactMaterials[b],"undefined"!==typeof a.stiffness&&(e.stiffness=a.stiffness,e.frictionStiffness=a.stiffness),"undefined"!==typeof a.relaxation&&(e.relaxation=a.relaxation,e.frictionRelaxation=a.relaxation);e=this.defaultContactMaterial;"undefined"!==typeof a.stiffness&&
(e.stiffness=a.stiffness,e.frictionStiffness=a.stiffness);"undefined"!==typeof a.relaxation&&(e.relaxation=a.relaxation,e.frictionRelaxation=a.relaxation)};l.prototype.setGlobalStiffness=function(a){this.setGlobalEquationParameters({stiffness:a})};l.prototype.setGlobalRelaxation=function(a){this.setGlobalEquationParameters({relaxation:a})}}).call(this,d("/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},d("buffer").Buffer,h,a,b,e,"/world/World.js","/world")},{"../../package.json":10,"../collision/Broadphase":12,"../collision/NaiveBroadphase":14,"../collision/Narrowphase":15,"../collision/SAPBroadphase":16,"../constraints/Constraint":17,"../constraints/DistanceConstraint":18,"../constraints/GearConstraint":19,"../constraints/LockConstraint":20,"../constraints/PrismaticConstraint":21,"../constraints/RevoluteConstraint":22,"../events/EventEmitter":29,
"../material/ContactMaterial":30,"../material/Material":31,"../math/vec2":33,"../objects/Body":34,"../objects/LinearSpring":35,"../objects/RotationalSpring":36,"../shapes/Capsule":39,"../shapes/Circle":40,"../shapes/Convex":41,"../shapes/Line":43,"../shapes/Particle":44,"../shapes/Plane":45,"../shapes/Rectangle":46,"../shapes/Shape":47,"../solver/GSSolver":48,"../solver/Solver":49,"../utils/OverlapKeeper":50,"../utils/Utils":52,"./IslandManager":54,"/Users/schteppe/git/p2.js/node_modules/grunt-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,
buffer:1}]},{},[38])(38)});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;
(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,d,f){var k=function(a){var b,e=[],c=a.length;for(b=0;b!==c;e.push(a[b++]));return e},h=function(a,b,e){f.call(this,a,b,e);this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._dirty=!0;this.render=h.prototype.render},a=f._internals,b=a.isSelector,e=a.isArray,g=h.prototype=f.to({},
.1,{}),m=[];h.version="1.13.2";g.constructor=h;g.kill()._gc=!1;h.killTweensOf=h.killDelayedCallsTo=f.killTweensOf;h.getTweensOf=f.getTweensOf;h.lagSmoothing=f.lagSmoothing;h.ticker=f.ticker;h.render=f.render;g.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),f.prototype.invalidate.call(this)};g.updateTo=function(a,b){var e,c=this.ratio;b&&this._startTime<this._timeline._time&&(this._startTime=
this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(e in a)this.vars[e]=a[e];if(this._initted)if(b)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&f._onPluginEvent("_onDisable",this),.998<this._time/this._duration)e=this._time,this.render(0,!0,!1),this._initted=!1,this.render(e,!0,!1);else if(0<this._time){this._initted=!1;this._init();for(var c=1/(1-c),g=this._firstPT;g;)e=
g.s+g.c,g.c*=c,g.s=e-g.c,g=g._next}return this};g.render=function(b,e,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var g,d,q,f,n,h,w,k=this._dirty?this.totalDuration():this._totalDuration,D=this._time,C=this._totalTime,H=this._cycle,B=this._duration,L=this._rawPrevTime;if(b>=k?(this._totalTime=k,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=B,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):
1),this._reversed||(g=!0,d="onComplete"),0===B&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(b=0),(0===b||0>L||1E-10===L)&&L!==b&&(c=!0,1E-10<L&&(d="onReverseComplete")),this._rawPrevTime=w=!e||b||L===b?b:1E-10)):1E-7>b?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==C||0===B&&0<L&&1E-10!==L)&&(d="onReverseComplete",g=this._reversed),0>b&&(this._active=!1,0===B&&(this._initted||!this.vars.lazy||c)&&(0<=L&&
(c=!0),this._rawPrevTime=w=!e||b||L===b?b:1E-10)),this._initted||(c=!0)):(this._totalTime=this._time=b,0!==this._repeat&&(q=B+this._repeatDelay,this._cycle=this._totalTime/q>>0,0!==this._cycle&&this._cycle===this._totalTime/q&&this._cycle--,this._time=this._totalTime-this._cycle*q,this._yoyo&&0!==(1&this._cycle)&&(this._time=B-this._time),this._time>B?this._time=B:0>this._time&&(this._time=0)),this._easeType?(f=this._time/B,n=this._easeType,h=this._easePower,(1===n||3===n&&.5<=f)&&(f=1-f),3===n&&
(f*=2),1===h?f*=f:2===h?f*=f*f:3===h?f*=f*f*f:4===h&&(f*=f*f*f*f),this.ratio=1===n?1-f:2===n?f:.5>this._time/B?f/2:1-f/2):this.ratio=this._ease.getRatio(this._time/B)),D===this._time&&!c&&H===this._cycle)return C!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||m)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=
D,this._totalTime=C,this._rawPrevTime=L,this._cycle=H,a.lazyTweens.push(this),this._lazy=[b,e],void 0;this._time&&!g?this.ratio=this._ease.getRatio(this._time/B):g&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==D&&0<=b&&(this._active=!0);0!==C||(2===this._initted&&0<b&&this._init(),this._startAt&&(0<=b?this._startAt.render(b,e,c):d||(d="_dummyGS")),!this.vars.onStart||0===this._totalTime&&0!==B||
!e&&this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||m));for(q=this._firstPT;q;)q.f?q.t[q.p](q.c*this.ratio+q.s):q.t[q.p]=q.c*this.ratio+q.s,q=q._next;this._onUpdate&&(0>b&&this._startAt&&this._startTime&&this._startAt.render(b,e,c),e||(this._totalTime!==C||g)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||m));this._cycle!==H&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||
m));d&&(!this._gc||c)&&(0>b&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(b,e,c),g&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[d]&&this.vars[d].apply(this.vars[d+"Scope"]||this,this.vars[d+"Params"]||m),0===B&&1E-10===this._rawPrevTime&&1E-10!==w&&(this._rawPrevTime=0))};h.to=function(a,b,e){return new h(a,b,e)};h.from=function(a,b,e){return e.runBackwards=!0,e.immediateRender=0!=e.immediateRender,new h(a,b,e)};h.fromTo=function(a,
b,e,c){return c.startAt=e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,new h(a,b,c)};h.staggerTo=h.allTo=function(a,c,g,d,q,n,w){d=d||0;var p,y,A,z,D=g.delay||0,C=[],H=function(){g.onComplete&&g.onComplete.apply(g.onCompleteScope||this,arguments);q.apply(w||this,n||m)};e(a)||("string"==typeof a&&(a=f.selector(a)||a),b(a)&&(a=k(a)));p=a.length;for(A=0;p>A;A++){y={};for(z in g)y[z]=g[z];y.delay=D;A===p-1&&q&&(y.onComplete=H);C[A]=new h(a[A],c,y);D+=d}return C};h.staggerFrom=h.allFrom=
function(a,b,e,c,g,d,m){return e.runBackwards=!0,e.immediateRender=0!=e.immediateRender,h.staggerTo(a,b,e,c,g,d,m)};h.staggerFromTo=h.allFromTo=function(a,b,e,c,g,d,m,q){return c.startAt=e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,h.staggerTo(a,b,c,g,d,m,q)};h.delayedCall=function(a,b,e,c,g){return new h(b,0,{delay:a,onComplete:b,onCompleteParams:e,onCompleteScope:c,onReverseComplete:b,onReverseCompleteParams:e,onReverseCompleteScope:c,immediateRender:!1,useFrames:g,overwrite:0})};
h.set=function(a,b){return new h(a,0,b)};h.isTweening=function(a){return 0<f.getTweensOf(a,!0).length};var q=function(a,b){for(var e=[],c=0,g=a._first;g;)g instanceof f?e[c++]=g:(b&&(e[c++]=g),e=e.concat(q(g,b)),c=e.length),g=g._next;return e},n=h.getAllTweens=function(a){return q(c._rootTimeline,a).concat(q(c._rootFramesTimeline,a))};h.killAll=function(a,b,e,c){null==b&&(b=!0);null==e&&(e=!0);var g,m,q=n(0!=c),f=q.length,h=b&&e&&c;for(m=0;f>m;m++)c=q[m],(h||c instanceof d||(g=c.target===c.vars.onComplete)&&
e||b&&!g)&&(a?c.totalTime(c._reversed?0:c.totalDuration()):c._enabled(!1,!1))};h.killChildTweensOf=function(c,g){if(null!=c){var d,m,q,n=a.tweenLookup;if("string"==typeof c&&(c=f.selector(c)||c),b(c)&&(c=k(c)),e(c))for(m=c.length;-1<--m;)h.killChildTweensOf(c[m],g);else{d=[];for(q in n)for(m=n[q].target.parentNode;m;)m===c&&(d=d.concat(n[q].tweens)),m=m.parentNode;q=d.length;for(m=0;q>m;m++)g&&d[m].totalTime(d[m].totalDuration()),d[m]._enabled(!1,!1)}}};var w=function(a,b,e,c){b=!1!==b;e=!1!==e;c=
!1!==c;for(var g,m=n(c),q=b&&e&&c,f=m.length;-1<--f;)c=m[f],(q||c instanceof d||(g=c.target===c.vars.onComplete)&&e||b&&!g)&&c.paused(a)};return h.pauseAll=function(a,b,e){w(!0,a,b,e)},h.resumeAll=function(a,b,e){w(!1,a,b,e)},h.globalTimeScale=function(a){var b=c._rootTimeline,e=f.ticker.time;return arguments.length?(a=a||1E-10,b._startTime=e-(e-b._startTime)*b._timeScale/a,b=c._rootFramesTimeline,e=f.ticker.frame,b._startTime=e-(e-b._startTime)*b._timeScale/a,b._timeScale=c._rootTimeline._timeScale=
a,a):b._timeScale},g.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},g.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},g.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-
a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},g.duration=function(a){return arguments.length?c.prototype.duration.call(this,a):this._duration},g.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*
this._repeat,this._dirty=!1),this._totalDuration)},g.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},g.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},g.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},h},!0);_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(c,d,f){var k=function(a){d.call(this,a);this._labels={};this.autoRemoveChildren=
!0===this.vars.autoRemoveChildren;this.smoothChildTiming=!0===this.vars.smoothChildTiming;this._sortChildren=!0;this._onUpdate=this.vars.onUpdate;var e,c=this.vars;for(e in c)a=c[e],b(a)&&-1!==a.join("").indexOf("{self}")&&(c[e]=this._swapSelfInParams(a));b(c.tweens)&&this.add(c.tweens,0,c.align,c.stagger)},h=f._internals,a=h.isSelector,b=h.isArray,e=h.lazyTweens,g=h.lazyRender,m=[],q=_gsScope._gsDefine.globals,n=function(a){var b,e={};for(b in a)e[b]=a[b];return e},w=function(a,b,e,c){var g=a._timeline._totalTime;
(b||!this._forcingPlayhead)&&(a._timeline.pause(a._startTime),b&&b.apply(c||a._timeline,e||m),this._forcingPlayhead&&a._timeline.seek(g))},h=k.prototype=new d;return k.version="1.13.2",h.constructor=k,h.kill()._gc=h._forcingPlayhead=!1,h.to=function(a,b,e,c){var g=e.repeat&&q.TweenMax||f;return b?this.add(new g(a,b,e),c):this.set(a,e,c)},h.from=function(a,b,e,c){return this.add((e.repeat&&q.TweenMax||f).from(a,b,e),c)},h.fromTo=function(a,b,e,c,g){var d=c.repeat&&q.TweenMax||f;return b?this.add(d.fromTo(a,
b,e,c),g):this.set(a,c,g)},h.staggerTo=function(b,e,c,g,d,m,q,h){m=new k({onComplete:m,onCompleteParams:q,onCompleteScope:h,smoothChildTiming:this.smoothChildTiming});"string"==typeof b&&(b=f.selector(b)||b);if(a(b)){h=[];var w=b.length;for(q=0;q!==w;h.push(b[q++]));b=h}g=g||0;for(q=0;b.length>q;q++)c.startAt&&(c.startAt=n(c.startAt)),m.to(b[q],e,n(c),q*g);return this.add(m,d)},h.staggerFrom=function(a,b,e,c,g,d,m,q){return e.immediateRender=0!=e.immediateRender,e.runBackwards=!0,this.staggerTo(a,
b,e,c,g,d,m,q)},h.staggerFromTo=function(a,b,e,c,g,d,m,q,f){return c.startAt=e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,this.staggerTo(a,b,c,g,d,m,q,f)},h.call=function(a,b,e,c){return this.add(f.delayedCall(0,a,b,e),c)},h.set=function(a,b,e){return e=this._parseTimeOrLabel(e,0,!0),null==b.immediateRender&&(b.immediateRender=e===this._time&&!this._paused),this.add(new f(a,0,b),e)},k.exportRoot=function(a,b){a=a||{};null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,c,g=
new k(a),d=g._timeline;null==b&&(b=!0);d._remove(g,!0);g._startTime=0;g._rawPrevTime=g._time=g._totalTime=d._time;for(e=d._first;e;)c=e._next,b&&e instanceof f&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=c;return d.add(g,0),g},h.add=function(a,e,g,m){var q,n,h;if("number"!=typeof e&&(e=this._parseTimeOrLabel(e,0,!0,a)),!(a instanceof c)){if(a instanceof Array||a&&a.push&&b(a)){g=g||"normal";m=m||0;q=a.length;for(n=0;q>n;n++)b(h=a[n])&&(h=new k({tweens:h})),this.add(h,e),"string"!=
typeof h&&"function"!=typeof h&&("sequence"===g?e=h._startTime+h.totalDuration()/h._timeScale:"start"===g&&(h._startTime-=h.delay())),e+=m;return this._uncache(!0)}if("string"==typeof a)return this.addLabel(a,e);if("function"!=typeof a)throw"Cannot add "+a+" into the timeline; it is not a tween, timeline, function, or string.";a=f.delayedCall(0,a)}if(d.prototype.add.call(this,a,e),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=this,a=g.rawTime()>a._startTime;g._timeline;)a&&
g._timeline.smoothChildTiming?g.totalTime(g._totalTime,!0):g._gc&&g._enabled(!0,!1),g=g._timeline;return this},h.remove=function(a){if(a instanceof c)return this._remove(a,!1);if(a instanceof Array||a&&a.push&&b(a)){for(var e=a.length;-1<--e;)this.remove(a[e]);return this}return"string"==typeof a?this.removeLabel(a):this.kill(null,a)},h._remove=function(a,b){d.prototype._remove.call(this,a,b);var e=this._last;return e?this._time>e._startTime+e._totalDuration/e._timeScale&&(this._time=this.duration(),
this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},h.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},h.insert=h.insertMultiple=function(a,b,e,c){return this.add(a,b||0,e,c)},h.appendMultiple=function(a,b,e,c){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),e,c)},h.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},h.addPause=function(a,b,e,c){return this.call(w,["{self}",b,e,c],this,
a)},h.removeLabel=function(a){return delete this._labels[a],this},h.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},h._parseTimeOrLabel=function(a,e,g,d){var m;if(d instanceof c&&d.timeline===this)this.remove(d);else if(d&&(d instanceof Array||d.push&&b(d)))for(m=d.length;-1<--m;)d[m]instanceof c&&d[m].timeline===this&&this.remove(d[m]);if("string"==typeof e)return this._parseTimeOrLabel(e,g&&"number"==typeof a&&null==this._labels[e]?a-this.duration():0,g);if(e=e||0,"string"!=
typeof a||!isNaN(a)&&null==this._labels[a])null==a&&(a=this.duration());else{if(m=a.indexOf("="),-1===m)return null==this._labels[a]?g?this._labels[a]=this.duration()+e:e:this._labels[a]+e;e=parseInt(a.charAt(m-1)+"1",10)*Number(a.substr(m+1));a=1<m?this._parseTimeOrLabel(a.substr(0,m-1),0,g):this.duration()}return Number(a)+e},h.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),!1!==b)},h.stop=function(){return this.paused(!0)},h.gotoAndPlay=function(a,b){return this.play(a,
b)},h.gotoAndStop=function(a,b){return this.pause(a,b)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,q,f,n,h=this._dirty?this.totalDuration():this._totalDuration,w=this._time,k=this._startTime,z=this._timeScale,D=this._paused;if(a>=h?(this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(q=!0,n="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime||1E-10===this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(d=!0,1E-10<this._rawPrevTime&&(n="onReverseComplete"))),
this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=h+1E-4):1E-7>a?(this._totalTime=this._time=0,(0!==w||0===this._duration&&1E-10!==this._rawPrevTime&&(0<this._rawPrevTime||0>a&&0<=this._rawPrevTime))&&(n="onReverseComplete",q=this._reversed),0>a?(this._active=!1,0<=this._rawPrevTime&&this._first&&(d=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a||this._rawPrevTime===a?a:1E-10,a=0,this._initted||(d=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==
w&&this._first||c||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==w&&0<a&&(this._active=!0),0===w&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||m)),this._time>=w)for(d=this._first;d&&(f=d._next,!this._paused||D);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*
d._timeScale,b,c)),d=f;else for(d=this._last;d&&(f=d._prev,!this._paused||D);)(d._active||w>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=f;this._onUpdate&&(b||(e.length&&g(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||m)));n&&(this._gc||(k===this._startTime||z!==this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(q&&
(e.length&&g(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||m)))}},h._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof k&&a._hasPausedChild())return!0;a=a._next}return!1},h.getChildren=function(a,b,e,c){c=c||-9999999999;for(var g=[],d=this._first,m=0;d;)c>d._startTime||(d instanceof f?!1!==b&&(g[m++]=d):(!1!==e&&(g[m++]=d),!1!==a&&(g=g.concat(d.getChildren(!0,
b,e)),m=g.length))),d=d._next;return g},h.getTweensOf=function(a,b){var e,c,g=this._gc,d=[],m=0;g&&this._enabled(!0,!0);e=f.getTweensOf(a);for(c=e.length;-1<--c;)(e[c].timeline===this||b&&this._contains(e[c]))&&(d[m++]=e[c]);return g&&this._enabled(!1,!0),d},h._contains=function(a){for(a=a.timeline;a;){if(a===this)return!0;a=a.timeline}return!1},h.shiftChildren=function(a,b,e){e=e||0;for(var c,g=this._first,d=this._labels;g;)g._startTime>=e&&(g._startTime+=a),g=g._next;if(b)for(c in d)d[c]>=e&&(d[c]+=
a);return this._uncache(!0)},h._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var e=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),c=e.length,g=!1;-1<--c;)e[c]._kill(a,b)&&(g=!0);return g},h.clear=function(a){var b=this.getChildren(!1,!0,!0),e=b.length;for(this._time=this._totalTime=0;-1<--e;)b[e]._enabled(!1,!1);return!1!==a&&(this._labels={}),this._uncache(!0)},h.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return c.prototype.invalidate.call(this)},h._enabled=
function(a,b){if(a===this._gc)for(var e=this._first;e;)e._enabled(a,!0),e=e._next;return d.prototype._enabled.call(this,a,b)},h.totalTime=function(){this._forcingPlayhead=!0;var a=c.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,a},h.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},h.totalDuration=function(a){if(!arguments.length){if(this._dirty){var b,e,c=
0;e=this._last;for(var g=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>g&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):g=e._startTime,0>e._startTime&&!e._paused&&(c-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),g=0),e=e._startTime+e._totalDuration/e._timeScale,e>c&&(c=e),e=b;this._duration=this._totalDuration=c;this._dirty=!1}return this._totalDuration}return 0!==
this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},h.usesFrames=function(){for(var a=this._timeline;a._timeline;)a=a._timeline;return a===c._rootFramesTimeline},h.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},k},!0);_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(c,d,f){var k=function(a){c.call(this,a);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||
0;this._cycle=0;this._yoyo=!0===this.vars.yoyo;this._dirty=!0},h=[],a=d._internals,b=a.lazyTweens,e=a.lazyRender,g=new f(null,null,1,0);f=k.prototype=new c;return f.constructor=k,f.kill()._gc=!1,k.version="1.13.2",f.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},f.addCallback=function(a,b,e,c){return this.add(d.delayedCall(0,a,e,c),b)},f.removeCallback=function(a,
b){if(a)if(null==b)this._kill(null,a);else for(var e=this.getTweensOf(a,!1),c=e.length,g=this._parseTimeOrLabel(b);-1<--c;)e[c]._startTime===g&&e[c]._enabled(!1,!1);return this},f.tweenTo=function(a,b){b=b||{};var e,c,f,k={ease:g,overwrite:b.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(c in b)k[c]=b[c];return k.time=this._parseTimeOrLabel(a),e=Math.abs(Number(k.time)-this._time)/this._timeScale||.001,f=new d(this,e,k),k.onStart=function(){f.target.paused(!0);f.vars.time!==f.target.time()&&
e===f.duration()&&f.duration(Math.abs(f.vars.time-f.target.time())/f.target._timeScale);b.onStart&&b.onStart.apply(b.onStartScope||f,b.onStartParams||h)},f},f.tweenFromTo=function(a,b,e){e=e||{};a=this._parseTimeOrLabel(a);e.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this};e.immediateRender=!1!==e.immediateRender;b=this.tweenTo(b,e);return b.duration(Math.abs(b.vars.time-a)/this._timeScale||.001)},f.render=function(a,c,g){this._gc&&this._enabled(!0,!1);var d,f,k,r,x,l=this._dirty?
this.totalDuration():this._totalDuration,u=this._duration,v=this._time,p=this._totalTime,y=this._startTime,A=this._timeScale,z=this._rawPrevTime,D=this._paused,C=this._cycle;if(a>=l?(this._locked||(this._totalTime=l,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(f=!0,r="onComplete",0===this._duration&&(0===a||0>z||1E-10===z)&&z!==a&&this._first&&(d=!0,1E-10<z&&(r="onReverseComplete"))),this._rawPrevTime=this._duration||!c||a||this._rawPrevTime===a?a:1E-10,this._yoyo&&0!==(1&this._cycle)?
this._time=a=0:(this._time=u,a=u+1E-4)):1E-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==v||0===u&&1E-10!==z&&(0<z||0>a&&0<=z)&&!this._locked)&&(r="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0<=z&&this._first&&(d=!0),this._rawPrevTime=a):(this._rawPrevTime=u||!c||a||this._rawPrevTime===a?a:1E-10,a=0,this._initted||(d=!0))):(0===u&&0>z&&(d=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(x=u+this._repeatDelay,this._cycle=this._totalTime/
x>>0,0!==this._cycle&&this._cycle===this._totalTime/x&&this._cycle--,this._time=this._totalTime-this._cycle*x,this._yoyo&&0!==(1&this._cycle)&&(this._time=u-this._time),this._time>u?(this._time=u,a=u+1E-4):0>this._time?this._time=a=0:a=this._time))),this._cycle!==C&&!this._locked){x=this._yoyo&&0!==(1&C);var H=x===(this._yoyo&&0!==(1&this._cycle)),B=this._totalTime,L=this._cycle,G=this._rawPrevTime,M=this._time;if(this._totalTime=C*u,C>this._cycle?x=!x:this._totalTime+=u,this._time=v,this._rawPrevTime=
0===u?z-1E-4:z,this._cycle=C,this._locked=!0,v=x?0:u,this.render(v,c,0===u),c||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||h),H&&(v=x?u+1E-4:-1E-4,this.render(v,!0,!1)),this._locked=!1,this._paused&&!D)return;this._time=M;this._totalTime=B;this._cycle=L;this._rawPrevTime=G}if(!(this._time!==v&&this._first||g||d))return p!==this._totalTime&&this._onUpdate&&(c||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||
h)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==p&&0<a&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._totalTime&&(c||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=v)for(d=this._first;d&&(k=d._next,!this._paused||D);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,c,g):d.render((a-d._startTime)*
d._timeScale,c,g)),d=k;else for(d=this._last;d&&(k=d._prev,!this._paused||D);)(d._active||v>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,c,g):d.render((a-d._startTime)*d._timeScale,c,g)),d=k;this._onUpdate&&(c||(b.length&&e(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)));r&&(this._locked||this._gc||(y===this._startTime||A!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&
(f&&(b.length&&e(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!c&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||h)))},f.getActive=function(a,b,e){null==a&&(a=!0);null==b&&(b=!0);null==e&&(e=!1);var c=[];e=this.getChildren(a,b,e);var g=0,d=e.length;for(a=0;d>a;a++)b=e[a],b.isActive()&&(c[g++]=b);return c},f.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,e=this.getLabelsArray(),c=e.length;for(b=0;c>b;b++)if(e[b].time>a)return e[b].name;
return null},f.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),e=b.length;-1<--e;)if(a>b[e].time)return b[e].name;return null},f.getLabelsArray=function(){var a,b=[],e=0;for(a in this._labels)b[e++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},f.progress=function(a,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),b):this._time/this.duration()},
f.totalProgress=function(a,b){return arguments.length?this.totalTime(this.totalDuration()*a,b):this._totalTime/this.totalDuration()},f.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(c.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},f.time=function(a,b){return arguments.length?
(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},f.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},f.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},f.yoyo=function(a){return arguments.length?
(this._yoyo=a,this):this._yoyo},f.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1E-8)},k},!0);(function(){var c=180/Math.PI,d=[],f=[],k=[],h={},a=function(a,b,e,c){this.a=a;this.b=b;this.c=e;this.d=c;this.da=c-a;this.ca=e-a;this.ba=b-a},b=function(a,b,e,c){var g={a:a},d={},m={},f={c:c},h=(a+b)/2,k=(b+e)/2;e=(e+c)/2;b=(h+k)/2;var k=(k+e)/2,p=(k-b)/8;return g.b=h+(a-h)/4,d.b=b+p,g.c=d.a=(g.b+d.b)/2,d.c=m.a=(b+k)/2,m.b=k-p,f.b=e+(c-e)/4,m.c=f.a=(m.b+
f.b)/2,[g,d,m,f]},e=function(e,c,g,m,s,r){var x,l,u,v,p={},y=[],A=r||e[0];s="string"==typeof s?","+s+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,";null==c&&(c=1);for(l in e[0])y.push(l);if(1<e.length){u=e[e.length-1];v=!0;for(x=y.length;-1<--x;)if(l=y[x],.05<Math.abs(A[l]-u[l])){v=!1;break}v&&(e=e.concat(),r&&e.unshift(r),e.push(e[1]),r=e[e.length-3])}d.length=f.length=k.length=
0;for(x=y.length;-1<--x;){l=y[x];h[l]=-1!==s.indexOf(","+l+",");u=l;var A=e,z=l,D=h[l],C=r,H=void 0,B=void 0,L=void 0,G=void 0,M=void 0,L=void 0,E=[];if(C)for(A=[C].concat(A),B=A.length;-1<--B;)"string"==typeof(L=A[B][z])&&"="===L.charAt(1)&&(A[B][z]=C[z]+Number(L.charAt(0)+L.substr(2)));if(H=A.length-2,0>H)A=(E[0]=new a(A[0][z],0,0,A[-1>H?0:1][z]),E);else{for(B=0;H>B;B++)L=A[B][z],G=A[B+1][z],E[B]=new a(L,0,0,G),D&&(M=A[B+2][z],d[B]=(d[B]||0)+(G-L)*(G-L),f[B]=(f[B]||0)+(M-G)*(M-G));A=(E[B]=new a(A[B][z],
0,0,A[B+1][z]),E)}p[u]=A}for(x=d.length;-1<--x;)d[x]=Math.sqrt(d[x]),f[x]=Math.sqrt(f[x]);if(!m){for(x=y.length;-1<--x;)if(h[l])for(e=p[y[x]],u=e.length-1,s=0;u>s;s++)r=e[s+1].da/f[s]+e[s].da/d[s],k[s]=(k[s]||0)+r*r;for(x=k.length;-1<--x;)k[x]=Math.sqrt(k[x])}x=y.length;for(s=g?4:1;-1<--x;){l=y[x];r=e=p[l];u=c;A=g;z=m;l=h[l];for(var K=H=C=D=void 0,J=G=K=L=E=M=B=void 0,O=void 0,Q=void 0,T=r.length-1,R=0,P=r[0].a,D=0;T>D;D++)B=r[R],C=B.a,H=B.d,K=r[R+1].d,l?(J=d[D],O=f[D],Q=.25*(O+J)*u/(z?.5:k[D]||.5),
M=H-(H-C)*(z?.5*u:0!==J?Q/J:0),E=H+(K-H)*(z?.5*u:0!==O?Q/O:0),L=H-(M+((E-M)*(3*J/(J+O)+.5)/4||0))):(M=H-.5*(H-C)*u,E=H+.5*(K-H)*u,L=H-(M+E)/2),M+=L,E+=L,B.c=K=M,B.b=0!==D?P:P=B.a+.6*(B.c-B.a),B.da=H-C,B.ca=K-C,B.ba=P-C,A?(G=b(C,P,K,H),r.splice(R,1,G[0],G[1],G[2],G[3]),R+=4):R++,P=E;B=r[R];B.b=P;B.c=P+.4*(B.d-P);B.da=B.d-B.a;B.ca=B.c-B.a;B.ba=P-B.a;A&&(G=b(B.a,P,B.c,B.d),r.splice(R,1,G[0],G[1],G[2],G[3]));v&&(e.splice(0,s),e.splice(e.length-s,s))}return p},g=_gsScope._gsDefine.plugin({propName:"bezier",
priority:-1,version:"1.3.3",API:2,global:!0,init:function(b,c,g){this._target=b;c instanceof Array&&(c={values:c});this._func={};this._round={};this._props=[];this._timeRes=null==c.timeResolution?6:parseInt(c.timeResolution,10);var d,m,f,h,l,k=c.values||[],v={};f=k[0];this._autoRotate=(m=c.autoRotate||g.vars.orientToBezier)?m instanceof Array?m:[["x","y","rotation",!0===m?0:Number(m)||0]]:null;for(d in f)this._props.push(d);for(f=this._props.length;-1<--f;)d=this._props[f],this._overwriteProps.push(d),
m=this._func[d]="function"==typeof b[d],v[d]=m?b[d.indexOf("set")||"function"!=typeof b["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(b[d]),l||v[d]!==k[0][d]&&(l=v);if("cubic"!==c.type&&"quadratic"!==c.type&&"soft"!==c.type)v=e(k,isNaN(c.curviness)?1:c.curviness,!1,"thruBasic"===c.type,c.correlate,l);else{f=k;var k=(k=c.type)||"soft",p,y,A,z,D,C,H;c={};l="cubic"===k?3:2;var B="soft"===k,L=[];if(B&&v&&(f=[v].concat(f)),null==f||l+1>f.length)throw"invalid Bezier data";for(p in f[0])L.push(p);
for(z=L.length;-1<--z;){p=L[z];c[p]=m=[];H=0;C=f.length;for(D=0;C>D;D++)k=null==v?f[D][p]:"string"==typeof(y=f[D][p])&&"="===y.charAt(1)?v[p]+Number(y.charAt(0)+y.substr(2)):Number(y),B&&1<D&&C-1>D&&(m[H++]=(k+m[H-2])/2),m[H++]=k;C=H-l+1;for(D=H=0;C>D;D+=l)k=m[D],p=m[D+1],y=m[D+2],A=2===l?0:m[D+3],m[H++]=y=3===l?new a(k,p,y,A):new a(k,(2*p+k)/3,(2*p+y)/3,y);m.length=H}v=c}if(this._beziers=v,this._segCount=this._beziers[d].length,this._timeRes){m=this._beziers;d=this._timeRes;d=d>>0||6;v=[];p=[];f=
y=0;c=d-1;l=[];k=[];for(h in m){z=m[h];D=v;C=d;var G=void 0,M=void 0,E=B=H=M=void 0,K=G=void 0,J=void 0,J=E=void 0,L=1/C;for(A=z.length;-1<--A;)for(E=z[A],M=E.a,H=E.d-M,B=E.c-M,E=E.b-M,M=0,K=1;C>=K;K++)G=L*K,J=1-G,G=M-(M=(G*G*H+3*J*(G*B+J*E))*G),J=A*C+K-1,D[J]=(D[J]||0)+G*G}m=v.length;for(h=0;m>h;h++)y+=Math.sqrt(v[h]),z=h%d,k[z]=y,z===c&&(f+=y,z=h/d>>0,l[z]=k,p[z]=f,y=0,k=[]);this._length=f;this._lengths=p;this._segments=l;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=
this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(m=this._autoRotate)for(this._initialRotations=[],m[0]instanceof Array||(this._autoRotate=m=[m]),f=m.length;-1<--f;){for(h=0;3>h;h++)d=m[f][h],this._func[d]="function"==typeof b[d]?b[d.indexOf("set")||"function"!=typeof b["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;d=m[f][2];this._initialRotations[f]=this._func[d]?this._func[d].call(this._target):this._target[d]}return this._startRatio=g.vars.runBackwards?1:0,!0},set:function(a){var b,
e,g,d,m,f;m=this._segCount;var l=this._func,h=this._target,k=a!==this._startRatio;if(this._timeRes){if(b=this._lengths,d=this._curSeg,a*=this._length,g=this._li,a>this._l2&&m-1>g){for(m-=1;m>g&&a>=(this._l2=b[++g]););this._l1=b[g-1];this._li=g;this._curSeg=d=this._segments[g];this._s2=d[this._s1=this._si=0]}else if(this._l1>a&&0<g){for(;0<g&&(this._l1=b[--g])>=a;);0===g&&this._l1>a?this._l1=0:g++;this._l2=b[g];this._li=g;this._curSeg=d=this._segments[g];this._s1=d[(this._si=d.length-1)-1]||0;this._s2=
d[this._si]}if(b=g,a-=this._l1,g=this._si,a>this._s2&&d.length-1>g){for(m=d.length-1;m>g&&a>=(this._s2=d[++g]););this._s1=d[g-1];this._si=g}else if(this._s1>a&&0<g){for(;0<g&&(this._s1=d[--g])>=a;);0===g&&this._s1>a?this._s1=0:g++;this._s2=d[g];this._si=g}m=(g+(a-this._s1)/(this._s2-this._s1))*this._prec}else b=0>a?0:1<=a?m-1:m*a>>0,m*=a-1/m*b;e=1-m;for(g=this._props.length;-1<--g;)a=this._props[g],d=this._beziers[a][b],f=(m*m*d.da+3*e*(m*d.ca+e*d.ba))*m+d.a,this._round[a]&&(f=Math.round(f)),l[a]?
h[a](f):h[a]=f;if(this._autoRotate){var p,y,A,z,D,C,H=this._autoRotate;for(g=H.length;-1<--g;)a=H[g][2],D=H[g][3]||0,C=!0===H[g][4]?1:c,d=this._beziers[H[g][0]],e=this._beziers[H[g][1]],d&&e&&(d=d[b],e=e[b],p=d.a+(d.b-d.a)*m,A=d.b+(d.c-d.b)*m,p+=(A-p)*m,A+=(d.c+(d.d-d.c)*m-A)*m,y=e.a+(e.b-e.a)*m,z=e.b+(e.c-e.b)*m,y+=(z-y)*m,z+=(e.c+(e.d-e.c)*m-z)*m,f=k?Math.atan2(z-y,A-p)*C+D:this._initialRotations[g],l[a]?h[a](f):h[a]=f)}}}),m=g.prototype;g.bezierThrough=e;g.cubicToQuadratic=b;g._autoCSS=!0;g.quadraticToCubic=
function(b,e,c){return new a(b,(2*e+b)/3,(2*e+c)/3,c)};g._cssRegister=function(){var a=_gsScope._gsDefine.globals.CSSPlugin;if(a){var a=a._internals,b=a._parseToProxy,e=a._setPluginRatio,c=a.CSSPropTween;a._registerComplexSpecialProp("bezier",{parser:function(a,d,m,f,q,h){d instanceof Array&&(d={values:d});h=new g;var k,y,A=d.values,z=A.length-1,D=[],C={};if(0>z)return q;for(m=0;z>=m;m++)y=b(a,A[m],f,q,h,z!==m),D[m]=y.end;for(k in d)C[k]=d[k];return C.values=D,q=new c(a,"bezier",0,0,y.pt,2),q.data=
y,q.plugin=h,q.setRatio=e,0===C.autoRotate&&(C.autoRotate=!0),!C.autoRotate||C.autoRotate instanceof Array||(m=!0===C.autoRotate?0:Number(C.autoRotate),C.autoRotate=null!=y.end.left?[["left","top","rotation",m,!1]]:null!=y.end.x?[["x","y","rotation",m,!1]]:!1),C.autoRotate&&(f._transform||f._enableTransforms(!1),y.autoRotate=f._target._gsTransform),h._onInitTween(y.proxy,C,f._tween),q}})}};m._roundProps=function(a,b){for(var e=this._overwriteProps,c=e.length;-1<--c;)(a[e[c]]||a.bezier||a.bezierThrough)&&
(this._round[e[c]]=b)};m._kill=function(a){var b,e,c=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],e=c.length;-1<--e;)c[e]===b&&c.splice(e,1);return this._super._kill.call(this,a)}})();_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(c,d){var f,k,h,a,b=function(){c.call(this,"css");this._overwriteProps.length=0;this.setRatio=b.prototype.setRatio},e={},g=b.prototype=new c("css");g.constructor=b;b.version="1.13.2";b.API=
2;b.defaultTransformPerspective=0;b.defaultSkewType="compensated";g="px";b.suffixMap={top:g,right:g,bottom:g,left:g,width:g,height:g,fontSize:g,padding:g,margin:g,perspective:g,lineHeight:""};var m,q,n,w,t,s,r=/(?:\d|\-\d|\.\d|\-\.\d)+/g,x=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,l=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,u=/[^\d\-\.]/g,v=/(?:\d|\-|\+|=|#|\.)*/g,p=/opacity *= *([^)]*)/i,y=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,z=/^(rgb|hsl)/,D=/([A-Z])/g,C=/-([a-z])/gi,
H=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},L=/(?:Left|Right|Width)/i,G=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,M=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,E=/,(?=[^\)]*(?:\(|$))/gi,K=Math.PI/180,J=180/Math.PI,O={},Q=document,T=Q.createElement("div"),R=Q.createElement("img"),P=b._internals={_specialProps:e},U=navigator.userAgent,Y=function(){var a,b=U.indexOf("Android"),e=Q.createElement("div");return n=-1!==U.indexOf("Safari")&&-1===U.indexOf("Chrome")&&
(-1===b||3<Number(U.substr(b+8,1))),t=n&&6>Number(U.substr(U.indexOf("Version/")+8,1)),w=-1!==U.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(U)&&(s=parseFloat(RegExp.$1)),e.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=e.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),aa=function(a){return p.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},F="",ba="",W=function(a,b){b=b||T;var e,c,g=b.style;if(void 0!==
g[a])return a;a=a.charAt(0).toUpperCase()+a.substr(1);e=["O","Moz","ms","Ms","Webkit"];for(c=5;-1<--c&&void 0===g[e[c]+a];);return 0<=c?(ba=3===c?"ms":e[c],F="-"+ba.toLowerCase()+"-",ba+a):null},I=Q.defaultView?Q.defaultView.getComputedStyle:function(){},N=b.getStyle=function(a,b,e,c,g){var d;return Y||"opacity"!==b?(!c&&a.style[b]?d=a.style[b]:(e=e||I(a))?d=e[b]||e.getPropertyValue(b)||e.getPropertyValue(b.replace(D,"-$1").toLowerCase()):a.currentStyle&&(d=a.currentStyle[b]),null==g||d&&"none"!==
d&&"auto"!==d&&"auto auto"!==d?d:g):aa(a)},Z=P.convertToPixels=function(a,e,c,g,m){if("px"===g||!g)return c;if("auto"===g||!c)return 0;var f,q,l,h=L.test(e),n=a;f=T.style;var r=0>c;if(r&&(c=-c),"%"===g&&-1!==e.indexOf("border"))f=c/100*(h?a.clientWidth:a.clientHeight);else{if(f.cssText="border:0 solid red;position:"+N(a,"position")+";line-height:0;","%"!==g&&n.appendChild)f[h?"borderLeftWidth":"borderTopWidth"]=c+g;else{if(n=a.parentNode||Q.body,q=n._gsCache,l=d.ticker.frame,q&&h&&q.time===l)return q.width*
c/100;f[h?"width":"height"]=c+g}n.appendChild(T);f=parseFloat(T[h?"offsetWidth":"offsetHeight"]);n.removeChild(T);h&&"%"===g&&!1!==b.cacheWidths&&(q=n._gsCache=n._gsCache||{},q.time=l,q.width=f/c*100);0!==f||m||(f=Z(a,e,c,g,!0))}return r?-f:f},ca=P.calculateOffset=function(a,b,e){if("absolute"!==N(a,"position",e))return 0;var c="left"===b?"Left":"Top";e=N(a,"margin"+c,e);return a["offset"+c]-(Z(a,b,parseFloat(e),e.replace(v,""))||0)},S=function(a,b){var e,c,g={};if(b=b||I(a,null))if(e=b.length)for(;-1<
--e;)g[b[e].replace(C,B)]=b.getPropertyValue(b[e]);else for(e in b)g[e]=b[e];else if(b=a.currentStyle||a.style)for(e in b)"string"==typeof e&&void 0===g[e]&&(g[e.replace(C,B)]=b[e]);return Y||(g.opacity=aa(a)),c=ua(a,b,!1),g.rotation=c.rotation,g.skewX=c.skewX,g.scaleX=c.scaleX,g.scaleY=c.scaleY,g.x=c.x,g.y=c.y,ea&&(g.z=c.z,g.rotationX=c.rotationX,g.rotationY=c.rotationY,g.scaleZ=c.scaleZ),g.filters&&delete g.filters,g},V=function(a,b,e,c,g){var d,m,f,q={},l=a.style;for(m in e)"cssText"!==m&&"length"!==
m&&isNaN(m)&&(b[m]!==(d=e[m])||g&&g[m])&&-1===m.indexOf("Origin")&&("number"==typeof d||"string"==typeof d)&&(q[m]="auto"!==d||"left"!==m&&"top"!==m?""!==d&&"auto"!==d&&"none"!==d||"string"!=typeof b[m]||""===b[m].replace(u,"")?d:0:ca(a,m),void 0!==l[m]&&(f=new Ca(l,m,l[m],f)));if(c)for(m in c)"className"!==m&&(q[m]=c[m]);return{difs:q,firstMPT:f}},ha={width:["Left","Right"],height:["Top","Bottom"]},fa=["marginLeft","marginRight","marginTop","marginBottom"],oa=function(a,b){null!=a&&""!==a&&"auto"!==
a&&"auto auto"!==a||(a="0 0");var e=a.split(" "),c=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":e[0],g=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":e[1];return null==g?g="0":"center"===g&&(g="50%"),("center"===c||isNaN(parseFloat(c))&&-1===(c+"").indexOf("="))&&(c="50%"),b&&(b.oxp=-1!==c.indexOf("%"),b.oyp=-1!==g.indexOf("%"),b.oxr="="===c.charAt(1),b.oyr="="===g.charAt(1),b.ox=parseFloat(c.replace(u,"")),b.oy=parseFloat(g.replace(u,""))),c+" "+g+(2<e.length?" "+e[2]:"")},
ya=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},ja=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},xa=function(a,b,e,c){var g,d,m;return null==a?m=b:"number"==typeof a?m=a:(g=a.split("_"),d=Number(g[0].replace(u,""))*(-1===a.indexOf("rad")?1:J)-("="===a.charAt(1)?0:b),g.length&&(c&&(c[e]=b+d),-1!==a.indexOf("short")&&
(d%=360,d!==d%180&&(d=0>d?d+360:d-360)),-1!==a.indexOf("_cw")&&0>d?d=(d+3599999999640)%360-360*(0|d/360):-1!==a.indexOf("ccw")&&0<d&&(d=(d-3599999999640)%360-360*(0|d/360))),m=b+d),1E-6>m&&-1E-6<m&&(m=0),m},sa={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,
0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},Fa=function(a,b,e){return a=0>a?a+1:1<a?a-1:a,0|255*(1>6*a?b+6*(e-b)*a:.5>a?e:2>3*a?b+6*(e-b)*(2/3-a):b)+.5},za=function(a){var b,e,c,g,d,m;return a&&""!==a?"number"==typeof a?[a>>16,255&a>>8,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),sa[a]?sa[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),e=a.charAt(2),c=a.charAt(3),a="#"+b+b+e+e+c+c),a=parseInt(a.substr(1),16),[a>>16,255&a>>8,255&a]):"hsl"===a.substr(0,
3)?(a=a.match(r),g=Number(a[0])%360/360,d=Number(a[1])/100,m=Number(a[2])/100,e=.5>=m?m*(d+1):m+d-m*d,b=2*m-e,3<a.length&&(a[3]=Number(a[3])),a[0]=Fa(g+1/3,b,e),a[1]=Fa(g,b,e),a[2]=Fa(g-1/3,b,e),a):(a=a.match(r)||sa.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),3<a.length&&(a[3]=Number(a[3])),a)):sa.black},ia="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(g in sa)ia+="|"+g+"\\b";var ia=RegExp(ia+")","gi"),pa=function(a,b,e,c){if(null==a)return function(a){return a};
var g,d=b?(a.match(ia)||[""])[0]:"",m=a.split(d).join("").match(l)||[],f=a.substr(0,a.indexOf(m[0])),q=")"===a.charAt(a.length-1)?")":"",h=-1!==a.indexOf(" ")?" ":",",n=m.length,k=0<n?m[0].replace(r,""):"";return n?g=b?function(a){var b,r,w;if("number"==typeof a)a+=k;else if(c&&E.test(a)){a=a.replace(E,"|").split("|");for(w=0;a.length>w;w++)a[w]=g(a[w]);return a.join(",")}if(b=(a.match(ia)||[d])[0],r=a.split(b).join("").match(l)||[],w=r.length,n>w--)for(;n>++w;)r[w]=e?r[0|(w-1)/2]:m[w];return f+r.join(h)+
h+b+q+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,d;if("number"==typeof a)a+=k;else if(c&&E.test(a)){a=a.replace(E,"|").split("|");for(d=0;a.length>d;d++)a[d]=g(a[d]);return a.join(",")}if(b=a.match(l)||[],d=b.length,n>d--)for(;n>++d;)b[d]=e?b[0|(d-1)/2]:m[d];return f+b.join(h)+q}:function(a){return a}},Ba=function(a){return a=a.split(","),function(b,e,c,g,d,m,f){c=(e+"").split(" ");f={};for(e=0;4>e;e++)f[a[e]]=c[e]=c[e]||c[(e-1)/2>>0];return g.parse(b,f,d,m)}},Ca=(P._setPluginRatio=
function(a){this.plugin.setRatio(a);for(var b,e,c=this.data,g=c.proxy,d=c.firstMPT;d;)b=g[d.v],d.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),d.t[d.p]=b,d=d._next;if(c.autoRotate&&(c.autoRotate.rotation=g.rotation),1===a)for(d=c.firstMPT;d;){if(e=d.t,e.type){if(1===e.type){b=e.xs0+e.s+e.xs1;for(a=1;e.l>a;a++)b+=e["xn"+a]+e["xs"+(a+1)];e.e=b}}else e.e=e.s+e.xs0;d=d._next}},function(a,b,e,c,g){this.t=a;this.p=b;this.v=e;this.r=g;c&&(c._prev=this,this._next=c)}),da=(P._parseToProxy=function(a,b,e,c,g,d){var m,
f,q,l=c,h={},n={};f=e._transform;var r=O;e._transform=null;O=b;c=a=e.parse(a,b,c,g);O=r;for(d&&(e._transform=f,l&&(l._prev=null,l._prev&&(l._prev._next=null)));c&&c!==l;){if(1>=c.type&&(m=c.p,n[m]=c.s+c.c,h[m]=c.s,d||(q=new Ca(c,"s",m,q,c.r),c.c=0),1===c.type))for(e=c.l;0<--e;)f="xn"+e,m=c.p+"_"+f,n[m]=c.data[f],h[m]=c[f],d||(q=new Ca(c,f,m,q,c.rxp[f]));c=c._next}return{proxy:h,end:n,firstMPT:q,pt:a}},P.CSSPropTween=function(b,e,c,g,d,m,q,l,h,n,r){this.t=b;this.p=e;this.s=c;this.c=g;this.n=q||e;b instanceof
da||a.push(this.n);this.r=l;this.type=m||0;h&&(this.pr=h,f=!0);this.b=void 0===n?c:n;this.e=void 0===r?c+g:r;d&&(this._next=d,d._prev=this)}),Aa=b.parseComplex=function(a,b,e,c,g,d,f,q,l,h){e=e||d||"";f=new da(a,b,0,0,f,h?2:1,null,!1,q,e,c);c+="";var n,k,w,p,t;a=e.split(", ").join(",").split(" ");b=c.split(", ").join(",").split(" ");q=a.length;var s=!1!==m;(-1!==c.indexOf(",")||-1!==e.indexOf(","))&&(a=a.join(" ").replace(E,", ").split(" "),b=b.join(" ").replace(E,", ").split(" "),q=a.length);q!==
b.length&&(a=(d||"").split(" "),q=a.length);f.plugin=l;f.setRatio=h;for(e=0;q>e;e++)if(n=a[e],l=b[e],w=parseFloat(n),w||0===w)f.appendXtra("",w,ya(l,w),l.replace(x,""),s&&-1!==l.indexOf("px"),!0);else if(g&&("#"===n.charAt(0)||sa[n]||z.test(n)))h=","===l.charAt(l.length-1)?"),":")",n=za(n),l=za(l),(d=6<n.length+l.length)&&!Y&&0===l[3]?(f["xs"+f.l]+=f.l?" transparent":"transparent",f.e=f.e.split(b[e]).join("transparent")):(Y||(d=!1),f.appendXtra(d?"rgba(":"rgb(",n[0],l[0]-n[0],",",!0,!0).appendXtra("",
n[1],l[1]-n[1],",",!0).appendXtra("",n[2],l[2]-n[2],d?",":h,!0),d&&(n=4>n.length?1:n[3],f.appendXtra("",n,(4>l.length?1:l[3])-n,h,!1)));else if(d=n.match(r)){if(k=l.match(x),!k||k.length!==d.length)return f;for(l=h=0;d.length>l;l++)t=d[l],p=n.indexOf(t,h),f.appendXtra(n.substr(h,p-h),Number(t),ya(k[l],t),"",s&&"px"===n.substr(p+t.length,2),0===l),h=p+t.length;f["xs"+f.l]+=n.substr(h)}else f["xs"+f.l]+=f.l?" "+n:n;if(-1!==c.indexOf("=")&&f.data){h=f.xs0+f.data.s;for(e=1;f.l>e;e++)h+=f["xs"+e]+f.data["xn"+
e];f.e=h+f["xs"+e]}return f.l||(f.type=-1,f.xs0=f.e),f.xfirst||f},$=9,g=da.prototype;for(g.l=g.pr=0;0<--$;)g["xn"+$]=0,g["xs"+$]="";g.xs0="";g._next=g._prev=g.xfirst=g.data=g.plugin=g.setRatio=g.rxp=null;g.appendXtra=function(a,b,e,c,g,d){var m=this.l;return this["xs"+m]+=d&&m?" "+a:a||"",e||0===m||this.plugin?(this.l++,this.type=this.setRatio?2:1,this["xs"+this.l]=c||"",0<m?(this.data["xn"+m]=b+e,this.rxp["xn"+m]=g,this["xn"+m]=b,this.plugin||(this.xfirst=new da(this,"xn"+m,b,e,this.xfirst||this,
0,this.n,g,this.pr),this.xfirst.xs0=0),this):(this.data={s:b+e},this.rxp={},this.s=b,this.c=e,this.r=g,this)):(this["xs"+m]+=b+(c||""),this)};var la=function(a,b){b=b||{};this.p=b.prefix?W(a)||a:a;e[a]=e[this.p]=this;this.format=b.formatter||pa(b.defaultValue,b.color,b.collapsible,b.multi);b.parser&&(this.parse=b.parser);this.clrs=b.color;this.multi=b.multi;this.keyword=b.keyword;this.dflt=b.defaultValue;this.pr=b.priority||0},X=P._registerComplexSpecialProp=function(a,b,e){"object"!=typeof b&&(b=
{parser:e});var c=a.split(","),g=b.defaultValue;e=e||[g];for(a=0;c.length>a;a++)b.prefix=0===a&&b.prefix,b.defaultValue=e[a]||g,new la(c[a],b)},Da=function(a){if(!e[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";X(a,{parser:function(a,c,g,d,m,f,q){var l=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[b];l?a=(l._cssRegister(),e[g].parse(a,c,g,d,m,f,q)):(window.console&&console.log("Error: "+b+" js file not loaded."),a=m);return a}})}},g=la.prototype;g.parseComplex=function(a,
b,e,c,g,d){var m,f,q,l,n,h,r=this.keyword;if(this.multi&&(E.test(e)||E.test(b)?(f=b.replace(E,"|").split("|"),q=e.replace(E,"|").split("|")):r&&(f=[b],q=[e])),q){l=q.length>f.length?q.length:f.length;for(m=0;l>m;m++)b=f[m]=f[m]||this.dflt,e=q[m]=q[m]||this.dflt,r&&(n=b.indexOf(r),h=e.indexOf(r),n!==h&&(e=-1===h?q:f,e[m]+=" "+r));b=f.join(", ");e=q.join(", ")}return Aa(a,this.p,b,e,this.clrs,this.dflt,c,this.pr,g,d)};g.parse=function(a,b,e,c,g,d){return this.parseComplex(a.style,this.format(N(a,this.p,
h,!1,this.dflt)),this.format(b),g,d)};b.registerSpecialProp=function(a,b,e){X(a,{parser:function(a,c,g,d,m,f){m=new da(a,g,0,0,m,2,g,!1,e);return m.plugin=f,m.setRatio=b(a,c,d._tween,g),m},priority:e})};var Ga="scaleX scaleY scaleZ x y z skewX skewY rotation rotationX rotationY perspective xPercent yPercent".split(" "),ga=W("transform"),qa=F+"transform",ma=W("transformOrigin"),ea=null!==W("perspective"),ta=P.Transform=function(){this.skewY=0},ua=P.getTransform=function(a,e,c,g){if(a._gsTransform&&
c&&!g)return a._gsTransform;var d,m,f,q,l,n,h,r,k,w,p,t=c?a._gsTransform||new ta:new ta,s=0>t.scaleX;l=179.99*K;var I=ea?parseFloat(N(a,ma,e,!1,"0 0 0").split(" ")[2])||t.zOrigin||0:0,u=parseFloat(b.defaultTransformPerspective)||0;if(ga?d=N(a,qa,e,!0):a.currentStyle&&(d=a.currentStyle.filter.match(G),d=d&&4===d.length?[d[0].substr(4),Number(d[2].substr(4)),Number(d[1].substr(4)),d[3].substr(4),t.x||0,t.y||0].join():""),d&&"none"!==d&&"matrix(1, 0, 0, 1, 0, 0)"!==d){m=(d||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||
[];for(d=m.length;-1<--d;)f=Number(m[d]),m[d]=(q=f-(f|=0))?(0|1E5*q+(0>q?-.5:.5))/1E5+f:f;if(16===m.length){u=m[8];s=m[9];e=m[10];q=m[12];f=m[13];var v=m[14];if(t.zOrigin&&(v=-t.zOrigin,q=u*v-m[12],f=s*v-m[13],v=e*v+t.zOrigin-m[14]),!c||g||null==t.rotationX){var x;g=m[0];var y=m[1],Z=m[2],ca=m[3],z=m[4],S=m[5],A=m[6],B=m[7];m=m[11];var V=Math.atan2(A,e),C=-l>V||V>l;t.rotationX=V*J;V&&(k=Math.cos(-V),w=Math.sin(-V),n=z*k+u*w,h=S*k+s*w,r=A*k+e*w,u=z*-w+u*k,s=S*-w+s*k,e=A*-w+e*k,m=B*-w+m*k,z=n,S=h,A=
r);V=Math.atan2(u,g);t.rotationY=V*J;V&&(p=-l>V||V>l,k=Math.cos(-V),w=Math.sin(-V),n=g*k-u*w,h=y*k-s*w,r=Z*k-e*w,s=y*w+s*k,e=Z*w+e*k,m=ca*w+m*k,g=n,y=h,Z=r);V=Math.atan2(y,S);t.rotation=V*J;V&&(x=-l>V||V>l,k=Math.cos(-V),w=Math.sin(-V),g=g*k+z*w,h=y*k+S*w,S=y*-w+S*k,A=Z*-w+A*k,y=h);x&&C?t.rotation=t.rotationX=0:x&&p?t.rotation=t.rotationY=0:p&&C&&(t.rotationY=t.rotationX=0);t.scaleX=(0|1E5*Math.sqrt(g*g+y*y)+.5)/1E5;t.scaleY=(0|1E5*Math.sqrt(S*S+s*s)+.5)/1E5;t.scaleZ=(0|1E5*Math.sqrt(A*A+e*e)+.5)/
1E5;t.skewX=0;t.perspective=m?1/(0>m?-m:m):0;t.x=q;t.y=f;t.z=v}}else ea&&!g&&m.length&&t.x===m[4]&&t.y===m[5]&&(t.rotationX||t.rotationY)||void 0!==t.x&&"none"===N(a,"display",e)||(n=(l=6<=m.length)?m[0]:1,r=m[1]||0,h=m[2]||0,k=l?m[3]:1,t.x=m[4]||0,t.y=m[5]||0,m=Math.sqrt(n*n+r*r),l=Math.sqrt(k*k+h*h),n=n||r?Math.atan2(r,n)*J:t.rotation||0,h=h||k?Math.atan2(h,k)*J+n:t.skewX||0,r=m-Math.abs(t.scaleX||0),k=l-Math.abs(t.scaleY||0),90<Math.abs(h)&&270>Math.abs(h)&&(s?(m*=-1,h+=0>=n?180:-180,n+=0>=n?180:
-180):(l*=-1,h+=0>=h?180:-180)),w=(n-t.rotation)%180,p=(h-t.skewX)%180,(void 0===t.skewX||2E-5<r||-2E-5>r||2E-5<k||-2E-5>k||-179.99<w&&179.99>w&&0|1E5*w||-179.99<p&&179.99>p&&0|1E5*p)&&(t.scaleX=m,t.scaleY=l,t.rotation=n,t.skewX=h),ea&&(t.rotationX=t.rotationY=t.z=0,t.perspective=u,t.scaleZ=1));t.zOrigin=I;for(d in t)2E-5>t[d]&&-2E-5<t[d]&&(t[d]=0)}else t={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,perspective:u,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return c&&(a._gsTransform=t),t.xPercent=
t.yPercent=0,t},na=function(a){var b,e,c=this.data,g=-c.rotation*K,d=g+c.skewX*K,m=(0|Math.cos(g)*c.scaleX*1E5)/1E5,f=(0|Math.sin(g)*c.scaleX*1E5)/1E5,q=(0|Math.sin(d)*-c.scaleY*1E5)/1E5,l=(0|Math.cos(d)*c.scaleY*1E5)/1E5,d=this.t.style;if(g=this.t.currentStyle){e=f;f=-q;q=-e;b=g.filter;d.filter="";var h,n;e=this.t.offsetWidth;var k=this.t.offsetHeight,r="absolute"!==g.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+m+", M12="+f+", M21="+q+", M22="+l,t=c.x+e*c.xPercent/100,I=c.y+k*c.yPercent/
100;if(null!=c.ox&&(h=(c.oxp?.01*e*c.ox:c.ox)-e/2,n=(c.oyp?.01*k*c.oy:c.oy)-k/2,t+=h-(h*m+n*f),I+=n-(h*q+n*l)),r?(h=e/2,n=k/2,w+=", Dx="+(h-(h*m+n*f)+t)+", Dy="+(n-(h*q+n*l)+I)+")"):w+=", sizingMethod='auto expand')",d.filter=-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?b.replace(M,w):w+" "+b,(0===a||1===a)&&1===m&&0===f&&0===q&&1===l&&(r&&-1===w.indexOf("Dx=0, Dy=0")||p.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf(b.indexOf("Alpha"))&&d.removeAttribute("filter")),!r)for(a=8>s?1:-1,
h=c.ieOffsetX||0,n=c.ieOffsetY||0,c.ieOffsetX=Math.round((e-((0>m?-m:m)*e+(0>f?-f:f)*k))/2+t),c.ieOffsetY=Math.round((k-((0>l?-l:l)*k+(0>q?-q:q)*e))/2+I),$=0;4>$;$++)m=fa[$],f=g[m],e=-1!==f.indexOf("px")?parseFloat(f):Z(this.t,m,parseFloat(f),f.replace(v,""))||0,f=e!==c[m]?2>$?-c.ieOffsetX:-c.ieOffsetY:2>$?h-c.ieOffsetX:n-c.ieOffsetY,d[m]=(c[m]=Math.round(e-f*(0===$||2===$?1:a)))+"px"}},Ea=P.set3DTransformRatio=function(a){var b,e,c,g,d,m,f,q,l,h,n,k,r,p,t,s,I,u,v,x,y,N=this.data,Z=this.t.style,z=
N.rotation*K,ca=N.scaleX,S=N.scaleY,A=N.scaleZ,V=N.x,B=N.y,C=N.z,fa=N.perspective;if(!(1!==a&&0!==a||"auto"!==N.force3D||N.rotationY||N.rotationX||1!==A||fa||C))return ra.call(this,a),void 0;w&&(1E-4>ca&&-1E-4<ca&&(ca=A=2E-5),1E-4>S&&-1E-4<S&&(S=A=2E-5),!fa||N.z||N.rotationX||N.rotationY||(fa=0));if(z||N.skewX)s=Math.cos(z),I=Math.sin(z),a=s,g=I,N.skewX&&(z-=N.skewX*K,s=Math.cos(z),I=Math.sin(z),"simple"===N.skewType&&(u=Math.tan(N.skewX*K),u=Math.sqrt(1+u*u),s*=u,I*=u)),b=-I,d=s;else{if(!(N.rotationY||
N.rotationX||1!==A||fa))return Z[ga]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) translate3d(":"translate3d(")+V+"px,"+B+"px,"+C+"px)"+(1!==ca||1!==S?" scale("+ca+","+S+")":""),void 0;a=d=1;b=g=0}h=1;e=c=m=f=q=l=n=k=r=0;p=fa?-1/fa:0;t=N.zOrigin;(z=N.rotationY*K)&&(s=Math.cos(z),I=Math.sin(z),q=h*-I,k=p*-I,e=a*I,m=g*I,h*=s,p*=s,a*=s,g*=s);(z=N.rotationX*K)&&(s=Math.cos(z),I=Math.sin(z),u=b*s+e*I,v=d*s+m*I,x=l*s+h*I,y=r*s+p*I,e=b*-I+e*s,m=d*-I+m*s,h=l*-I+h*s,p=r*-I+p*s,b=u,d=
v,l=x,r=y);1!==A&&(e*=A,m*=A,h*=A,p*=A);1!==S&&(b*=S,d*=S,l*=S,r*=S);1!==ca&&(a*=ca,g*=ca,q*=ca,k*=ca);t&&(n-=t,c=e*n,f=m*n,n=h*n+t);c=(u=(c+=V)-(c|=0))?(0|1E5*u+(0>u?-.5:.5))/1E5+c:c;f=(u=(f+=B)-(f|=0))?(0|1E5*u+(0>u?-.5:.5))/1E5+f:f;n=(u=(n+=C)-(n|=0))?(0|1E5*u+(0>u?-.5:.5))/1E5+n:n;Z[ga]=(N.xPercent||N.yPercent?"translate("+N.xPercent+"%,"+N.yPercent+"%) matrix3d(":"matrix3d(")+[(0|1E5*a)/1E5,(0|1E5*g)/1E5,(0|1E5*q)/1E5,(0|1E5*k)/1E5,(0|1E5*b)/1E5,(0|1E5*d)/1E5,(0|1E5*l)/1E5,(0|1E5*r)/1E5,(0|1E5*
e)/1E5,(0|1E5*m)/1E5,(0|1E5*h)/1E5,(0|1E5*p)/1E5,c,f,n,fa?1+-n/fa:1].join()+")"},ra=P.set2DTransformRatio=function(a){var b,e,c,g,d=this.data,m=this.t.style,f=d.x,q=d.y;return d.rotationX||d.rotationY||d.z||!0===d.force3D||"auto"===d.force3D&&1!==a&&0!==a?(this.setRatio=Ea,Ea.call(this,a),void 0):(d.rotation||d.skewX?(b=d.rotation*K,e=b-d.skewX*K,c=1E5*d.scaleX,g=1E5*d.scaleY,m[ga]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+(0|Math.cos(b)*c)/1E5+","+(0|
Math.sin(b)*c)/1E5+","+(0|Math.sin(e)*-g)/1E5+","+(0|Math.cos(e)*g)/1E5+","+f+","+q+")"):m[ga]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+d.scaleX+",0,0,"+d.scaleY+","+f+","+q+")",void 0)};X("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(a,
e,c,g,d,m,f){if(g._transform)return d;var q,l,n,k,r,w;e=g._transform=ua(a,h,!0,f.parseTransform);var p=a.style,t=Ga.length,s={};if("string"==typeof f.transform&&ga)n=T.style,n[ga]=f.transform,n.display="block",n.position="absolute",Q.body.appendChild(T),q=ua(T,null,!1),Q.body.removeChild(T);else if("object"==typeof f){if(q={scaleX:ja(null!=f.scaleX?f.scaleX:f.scale,e.scaleX),scaleY:ja(null!=f.scaleY?f.scaleY:f.scale,e.scaleY),scaleZ:ja(f.scaleZ,e.scaleZ),x:ja(f.x,e.x),y:ja(f.y,e.y),z:ja(f.z,e.z),
xPercent:ja(f.xPercent,e.xPercent),yPercent:ja(f.yPercent,e.yPercent),perspective:ja(f.transformPerspective,e.perspective)},w=f.directionalRotation,null!=w)if("object"==typeof w)for(n in w)f[n]=w[n];else f.rotation=w;"string"==typeof f.x&&-1!==f.x.indexOf("%")&&(q.x=0,q.xPercent=ja(f.x,e.xPercent));"string"==typeof f.y&&-1!==f.y.indexOf("%")&&(q.y=0,q.yPercent=ja(f.y,e.yPercent));q.rotation=xa("rotation"in f?f.rotation:"shortRotation"in f?f.shortRotation+"_short":"rotationZ"in f?f.rotationZ:e.rotation,
e.rotation,"rotation",s);ea&&(q.rotationX=xa("rotationX"in f?f.rotationX:"shortRotationX"in f?f.shortRotationX+"_short":e.rotationX||0,e.rotationX,"rotationX",s),q.rotationY=xa("rotationY"in f?f.rotationY:"shortRotationY"in f?f.shortRotationY+"_short":e.rotationY||0,e.rotationY,"rotationY",s));q.skewX=null==f.skewX?e.skewX:xa(f.skewX,e.skewX);q.skewY=null==f.skewY?e.skewY:xa(f.skewY,e.skewY);(l=q.skewY-e.skewY)&&(q.skewX+=l,q.rotation+=l)}ea&&null!=f.force3D&&(e.force3D=f.force3D,r=!0);e.skewType=
f.skewType||e.skewType||b.defaultSkewType;for((l=e.force3D||e.z||e.rotationX||e.rotationY||q.z||q.rotationX||q.rotationY||q.perspective)||null==f.scale||(q.scaleZ=1);-1<--t;)c=Ga[t],k=q[c]-e[c],(1E-6<k||-1E-6>k||null!=O[c])&&(r=!0,d=new da(e,c,e[c],k,d),c in s&&(d.e=s[c]),d.xs0=0,d.plugin=m,g._overwriteProps.push(d.n));return k=f.transformOrigin,(k||ea&&l&&e.zOrigin)&&(ga?(r=!0,c=ma,k=(k||N(a,c,h,!1,"50% 50%"))+"",d=new da(p,c,0,0,d,-1,"transformOrigin"),d.b=p[c],d.plugin=m,ea?(n=e.zOrigin,k=k.split(" "),
e.zOrigin=(2<k.length&&(0===n||"0px"!==k[2])?parseFloat(k[2]):n)||0,d.xs0=d.e=k[0]+" "+(k[1]||"50%")+" 0px",d=new da(e,"zOrigin",0,0,d,-1,d.n),d.b=n,d.xs0=d.e=e.zOrigin):d.xs0=d.e=k):oa(k+"",e)),r&&(g._transformType=l||3===this._transformType?3:2),d},prefix:!0});X("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"});X("borderRadius",{defaultValue:"0px",parser:function(a,b,e,c,g){b=this.format(b);var d,m,f,q,n,l,r,w,p,t,s,I,u,v,x=["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],y=a.style;c=parseFloat(a.offsetWidth);w=parseFloat(a.offsetHeight);b=b.split(" ");for(d=0;x.length>d;d++)this.p.indexOf("border")&&(x[d]=W(x[d])),q=f=N(a,x[d],h,!1,"0px"),-1!==q.indexOf(" ")&&(f=q.split(" "),q=f[0],f=f[1]),n=m=b[d],l=parseFloat(q),t=q.substr((l+"").length),(s="="===n.charAt(1))?(r=parseInt(n.charAt(0)+"1",10),n=n.substr(2),r*=parseFloat(n),p=n.substr((r+"").length-(0>r?1:0))||""):(r=parseFloat(n),p=n.substr((r+"").length)),""===
p&&(p=k[e]||t),p!==t&&(I=Z(a,"borderLeft",l,t),u=Z(a,"borderTop",l,t),"%"===p?(q=I/c*100+"%",f=u/w*100+"%"):"em"===p?(v=Z(a,"borderLeft",1,"em"),q=I/v+"em",f=u/v+"em"):(q=I+"px",f=u+"px"),s&&(n=parseFloat(q)+r+p,m=parseFloat(f)+r+p)),g=Aa(y,x[d],q+" "+f,n+" "+m,!1,"0px",g);return g},prefix:!0,formatter:pa("0px 0px 0px 0px",!1,!0)});X("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,e,c,g,d){var m,f,q;e=h||I(a,null);e=this.format((e?s?e.getPropertyValue("background-position-x")+" "+e.getPropertyValue("background-position-y"):
e.getPropertyValue("background-position"):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0");var n=this.format(b);if(-1!==e.indexOf("%")!=(-1!==n.indexOf("%"))&&(m=N(a,"backgroundImage").replace(H,""),m&&"none"!==m)){b=e.split(" ");c=n.split(" ");R.setAttribute("src",m);for(m=2;-1<--m;)e=b[m],f=-1!==e.indexOf("%"),f!==(-1!==c[m].indexOf("%"))&&(q=0===m?a.offsetWidth-R.width:a.offsetHeight-R.height,b[m]=f?parseFloat(e)/100*q+"px":100*(parseFloat(e)/q)+"%");e=b.join(" ")}return this.parseComplex(a.style,
e,n,g,d)},formatter:oa});X("backgroundSize",{defaultValue:"0 0",formatter:oa});X("perspective",{defaultValue:"0px",prefix:!0});X("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0});X("transformStyle",{prefix:!0});X("backfaceVisibility",{prefix:!0});X("userSelect",{prefix:!0});X("margin",{parser:Ba("marginTop,marginRight,marginBottom,marginLeft")});X("padding",{parser:Ba("paddingTop,paddingRight,paddingBottom,paddingLeft")});X("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,e,
c,g,d){var m,f,q;return 9>s?(f=a.currentStyle,q=8>s?" ":",",m="rect("+f.clipTop+q+f.clipRight+q+f.clipBottom+q+f.clipLeft+")",b=this.format(b).split(",").join(q)):(m=this.format(N(a,this.p,h,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,m,b,g,d)}});X("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0});X("autoRound,strictUnits",{parser:function(a,b,e,c,g){return g}});X("border",{defaultValue:"0px solid #000",parser:function(a,b,e,c,g,d){return this.parseComplex(a.style,this.format(N(a,
"borderTopWidth",h,!1,"0px")+" "+N(a,"borderTopStyle",h,!1,"solid")+" "+N(a,"borderTopColor",h,!1,"#000")),this.format(b),g,d)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ia)||["#000"])[0]}});X("borderWidth",{parser:Ba("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")});X("float,cssFloat,styleFloat",{parser:function(a,b,e,c,g){a=a.style;c="cssFloat"in a?"cssFloat":"styleFloat";return new da(a,c,0,0,g,-1,e,!1,0,a[c],b)}});var va=
function(a){var b,e=this.t,c=e.filter||N(this.data,"filter");a=0|this.s+this.c*a;100===a&&(-1===c.indexOf("atrix(")&&-1===c.indexOf("radient(")&&-1===c.indexOf("oader(")?(e.removeAttribute("filter"),b=!N(this.data,"filter")):(e.filter=c.replace(A,""),b=!0));b||(this.xn1&&(e.filter=c=c||"alpha(opacity="+a+")"),-1===c.indexOf("pacity")?0===a&&this.xn1||(e.filter=c+" alpha(opacity="+a+")"):e.filter=c.replace(p,"opacity="+a))};X("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,e,c,g,d){var m=
parseFloat(N(a,"opacity",h,!1,"1")),f=a.style,q="autoAlpha"===e;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+m),q&&1===m&&"hidden"===N(a,"visibility",h)&&0!==b&&(m=0),Y?g=new da(f,"opacity",m,b-m,g):(g=new da(f,"opacity",100*m,100*(b-m),g),g.xn1=q?1:0,f.zoom=1,g.type=2,g.b="alpha(opacity="+g.s+")",g.e="alpha(opacity="+(g.s+g.c)+")",g.data=a,g.plugin=d,g.setRatio=va),q&&(g=new da(f,"visibility",0,0,g,-1,null,!1,0,0!==m?"inherit":"hidden",0===b?"hidden":
"inherit"),g.xs0="inherit",c._overwriteProps.push(g.n),c._overwriteProps.push(e)),g}});var wa=function(a,b){b&&(a.removeProperty?("ms"===b.substr(0,2)&&(b="M"+b.substr(1)),a.removeProperty(b.replace(D,"-$1").toLowerCase())):a.removeAttribute(b))},ka=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,e=this.t.style;b;)b.v?e[b.p]=b.v:wa(e,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==
this.e&&this.t.setAttribute("class",this.e)};X("className",{parser:function(a,b,e,c,g,d,m){var q,n,l,k,r=a.getAttribute("class")||"",w=a.style.cssText;if(g=c._classNamePT=new da(a,e,0,0,g,2),g.setRatio=ka,g.pr=-11,f=!0,g.b=r,e=S(a,h),n=a._gsClassPT){l={};for(k=n.data;k;)l[k.p]=1,k=k._next;n.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:r.replace(RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),c._tween._duration&&(a.setAttribute("class",g.e),q=V(a,e,S(a),
m,l),a.setAttribute("class",r),g.data=q.firstMPT,a.style.cssText=w,g=g.xfirst=c.parse(a,q.difs,g,d)),g}});var Ia=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,g,d=this.t.style,m=e.transform.parse;if("all"===this.e)d.cssText="",g=!0;else for(a=this.e.split(","),c=a.length;-1<--c;)b=a[c],e[b]&&(e[b].parse===m?g=!0:b="transformOrigin"===b?ma:e[b].p),wa(d,b);g&&(wa(d,ga),this.t._gsTransform&&delete this.t._gsTransform)}};X("clearProps",
{parser:function(a,b,e,c,g){return g=new da(a,e,0,0,g,2),g.setRatio=Ia,g.e=b,g.pr=-10,g.data=c._tween,f=!0,g}});g=["bezier","throwProps","physicsProps","physics2D"];for($=g.length;$--;)Da(g[$]);g=b.prototype;g._firstPT=null;g._onInitTween=function(e,c,g){if(!e.nodeType)return!1;this._target=e;this._tween=g;this._vars=c;m=c.autoRound;f=!1;k=c.suffixMap||b.suffixMap;h=I(e,"");a=this._overwriteProps;var d,l,r,w,p=e.style;if(q&&""===p.zIndex&&(d=N(e,"zIndex",h),("auto"===d||""===d)&&this._addLazySet(p,
"zIndex",0)),"string"==typeof c&&(r=p.cssText,d=S(e,h),p.cssText=r+";"+c,d=V(e,d,S(e)).difs,!Y&&y.test(c)&&(d.opacity=parseFloat(RegExp.$1)),c=d,p.cssText=r),this._firstPT=g=this.parse(e,c,null),this._transformType){c=3===this._transformType;ga?n&&(q=!0,""===p.zIndex&&(l=N(e,"zIndex",h),("auto"===l||""===l)&&this._addLazySet(p,"zIndex",0)),t&&this._addLazySet(p,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(c?"visible":"hidden"))):p.zoom=1;for(l=g;l&&l._next;)l=l._next;d=new da(e,
"transform",0,0,null,2);this._linkCSSP(d,null,l);d.setRatio=c&&ea?Ea:ga?ra:na;d.data=this._transform||ua(e,h,!0);a.pop()}if(f){for(;g;){e=g._next;for(l=r;l&&l.pr>g.pr;)l=l._next;(g._prev=l?l._prev:w)?g._prev._next=g:r=g;(g._next=l)?l._prev=g:w=g;g=e}this._firstPT=r}return!0};g.parse=function(a,b,c,g){var d,f,q,l,n,r,w,p,t,s=a.style;for(d in b){n=b[d];if(f=e[d])c=f.parse(a,n,d,this,c,g,b);else if(f=N(a,d,h)+"",p="string"==typeof n,"color"===d||"fill"===d||"stroke"===d||-1!==d.indexOf("Color")||p&&
z.test(n))p||(n=za(n),n=(3<n.length?"rgba(":"rgb(")+n.join(",")+")"),c=Aa(s,d,f,n,!0,"transparent",c,0,g);else if(!p||-1===n.indexOf(" ")&&-1===n.indexOf(",")){r=(q=parseFloat(f))||0===q?f.substr((q+"").length):"";if(""===f||"auto"===f)if("width"===d||"height"===d){q=a;var u=d;r=h;t=parseFloat("width"===u?q.offsetWidth:q.offsetHeight);var u=ha[u],x=u.length;for(r=r||I(q,null);-1<--x;)t-=parseFloat(N(q,"padding"+u[x],r,!0))||0,t-=parseFloat(N(q,"border"+u[x]+"Width",r,!0))||0;q=t;r="px"}else"left"===
d||"top"===d?(q=ca(a,d,h),r="px"):(q="opacity"!==d?0:1,r="");(t=p&&"="===n.charAt(1))?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),w=n.replace(v,"")):(l=parseFloat(n),w=p?n.substr((l+"").length)||"":"");""===w&&(w=d in k?k[d]:r);n=l||0===l?(t?l+q:l)+w:b[d];r!==w&&""!==w&&(l||0===l)&&q&&(q=Z(a,d,q,r),"%"===w?(q/=Z(a,d,100,"%")/100,!0!==b.strictUnits&&(f=q+"%")):"em"===w?q/=Z(a,d,1,"em"):"px"!==w&&(l=Z(a,d,l,w),w="px"),t&&(l||0===l)&&(n=l+q+w));t&&(l+=q);!q&&0!==q||!l&&0!==l?void 0!==
s[d]&&(n||"NaN"!=n+""&&null!=n)?(c=new da(s,d,l||q||0,0,c,-1,d,!1,0,f,n),c.xs0="none"!==n||"display"!==d&&-1===d.indexOf("Style")?n:f):window.console&&console.log("invalid "+d+" tween value: "+b[d]):(c=new da(s,d,q,l-q,c,0,d,!1!==m&&("px"===w||"zIndex"===d),0,f,n),c.xs0=w)}else c=Aa(s,d,f,n,!0,null,c,0,g);g&&c&&!c.plugin&&(c.plugin=g)}return c};g.setRatio=function(a){var b,e,c,g=this._firstPT;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&
0!==this._tween._time||-1E-6===this._tween._rawPrevTime)for(;g;){if(b=g.c*a+g.s,g.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),g.type)if(1===g.type)if(c=g.l,2===c)g.t[g.p]=g.xs0+b+g.xs1+g.xn1+g.xs2;else if(3===c)g.t[g.p]=g.xs0+b+g.xs1+g.xn1+g.xs2+g.xn2+g.xs3;else if(4===c)g.t[g.p]=g.xs0+b+g.xs1+g.xn1+g.xs2+g.xn2+g.xs3+g.xn3+g.xs4;else if(5===c)g.t[g.p]=g.xs0+b+g.xs1+g.xn1+g.xs2+g.xn2+g.xs3+g.xn3+g.xs4+g.xn4+g.xs5;else{e=g.xs0+b+g.xs1;for(c=1;g.l>c;c++)e+=g["xn"+c]+g["xs"+(c+1)];g.t[g.p]=e}else-1===g.type?
g.t[g.p]=g.xs0:g.setRatio&&g.setRatio(a);else g.t[g.p]=b+g.xs0;g=g._next}else for(;g;)2!==g.type?g.t[g.p]=g.b:g.setRatio(a),g=g._next;else for(;g;)2!==g.type?g.t[g.p]=g.e:g.setRatio(a),g=g._next};g._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2;this._transform=this._transform||ua(this._target,h,!0)};var Ja=function(){this.t[this.p]=this.e;this.data._linkCSSP(this,this._next,null,!0)};g._addLazySet=function(a,b,e){a=this._firstPT=new da(a,b,0,0,this._firstPT,2);a.e=
e;a.setRatio=Ja;a.data=this};g._linkCSSP=function(a,b,e,c){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,c=!0),e?e._next=a:c||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=e),a};g._kill=function(a){var b,e,g,d=a;if(a.autoAlpha||a.alpha){d={};for(e in a)d[e]=a[e];d.opacity=1;d.autoAlpha&&(d.visibility=1)}return a.className&&(b=this._classNamePT)&&(g=b.xfirst,g&&g._prev?this._linkCSSP(g._prev,b._next,g._prev._prev):
g===this._firstPT&&(this._firstPT=b._next),b._next&&this._linkCSSP(b._next,b._next._next,g._prev),this._classNamePT=null),c.prototype._kill.call(this,d)};var Ha=function(a,b,e){var c,g,d;if(a.slice)for(c=a.length;-1<--c;)Ha(a[c],b,e);else for(a=a.childNodes,c=a.length;-1<--c;)g=a[c],d=g.type,g.style&&(b.push(S(g)),e&&e.push(g)),1!==d&&9!==d&&11!==d||!g.childNodes.length||Ha(g,b,e)};return b.cascadeTo=function(a,b,e){var c,g,m=d.to(a,b,e),f=[m],q=[],n=[],l=[],h=d._internals.reservedProps;a=m._targets||
m.target;Ha(a,q,l);m.render(b,!0);Ha(a,n);m.render(0,!0);m._enabled(!0);for(a=l.length;-1<--a;)if(c=V(l[a],q[a],n[a]),c.firstMPT){c=c.difs;for(g in e)h[g]&&(c[g]=e[g]);f.push(d.to(l[a],b,c))}return f},c.activate([b]),b},!0);(function(){var c=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(c,f,k){return this._tween=k,!0}}).prototype;c._onInitAllProps=function(){for(var c,f,k,h=this._tween,a=h.vars.roundProps instanceof Array?h.vars.roundProps:h.vars.roundProps.split(","),
b=a.length,e={},g=h._propLookup.roundProps;-1<--b;)e[a[b]]=1;for(b=a.length;-1<--b;)for(c=a[b],f=h._firstPT;f;)k=f._next,f.pg?f.t._roundProps(e,!0):f.n===c&&(this._add(f.t,c,f.s,f.c),k&&(k._prev=f._prev),f._prev?f._prev._next=k:h._firstPT===f&&(h._firstPT=k),f._next=f._prev=null,h._propLookup[c]=g),f=k;return!1};c._add=function(c,f,k,h){this._addTween(c,f,k,k+h,f,!0);this._overwriteProps.push(f)}})();_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(c,d){var f,k;if("function"!=
typeof c.setAttribute)return!1;this._target=c;this._proxy={};this._start={};this._end={};for(f in d)this._start[f]=this._proxy[f]=k=c.getAttribute(f),k=this._addTween(this._proxy,f,parseFloat(k),d[f],f),this._end[f]=k?k.s+k.c:d[f],this._overwriteProps.push(f);return!0},set:function(c){this._super.setRatio.call(this,c);for(var d=this._overwriteProps,f=d.length,k=1===c?this._end:c?this._proxy:this._start;-1<--f;)c=d[f],this._target.setAttribute(c,k[c]+"")}});_gsScope._gsDefine.plugin({propName:"directionalRotation",
version:"0.2.1",API:2,init:function(c,d){"object"!=typeof d&&(d={rotation:d});this.finals={};var f,k,h,a,b,e,g=!0===d.useRadians?2*Math.PI:360;for(f in d)"useRadians"!==f&&(e=(d[f]+"").split("_"),k=e[0],h=parseFloat("function"!=typeof c[f]?c[f]:c[f.indexOf("set")||"function"!=typeof c["get"+f.substr(3)]?f:"get"+f.substr(3)]()),a=this.finals[f]="string"==typeof k&&"="===k.charAt(1)?h+parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)||0,b=a-h,e.length&&(k=e.join("_"),-1!==k.indexOf("short")&&
(b%=g,b!==b%(g/2)&&(b=0>b?b+g:b-g)),-1!==k.indexOf("_cw")&&0>b?b=(b+9999999999*g)%g-(0|b/g)*g:-1!==k.indexOf("ccw")&&0<b&&(b=(b-9999999999*g)%g-(0|b/g)*g)),(1E-6<b||-1E-6>b)&&(this._addTween(c,f,h,h+b,f),this._overwriteProps.push(f)));return!0},set:function(c){if(1!==c)this._super.setRatio.call(this,c);else for(c=this._firstPT;c;)c.f?c.t[c.p](this.finals[c.p]):c.t[c.p]=this.finals[c.p],c=c._next}})._autoCSS=!0;_gsScope._gsDefine("easing.Back",["easing.Ease"],function(c){var d,f,k,h=_gsScope.GreenSockGlobals||
_gsScope,a=2*Math.PI,b=Math.PI/2,e=h.com.greensock._class,g=function(a,b){var g=e("easing."+a,function(){},!0),d=g.prototype=new c;return d.constructor=g,d.getRatio=b,g},m=c.register||function(){},q=function(a,b,c,g){b=e("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new g},!0);return m(b,a),b},n=function(a,b,e){this.t=a;this.v=b;e&&(this.next=e,e.prev=this,this.c=e.v-b,this.gap=e.t-a)},w=function(a,b){var g=e("easing."+a,function(a){this._p1=a||0===a?a:1.70158;this._p2=1.525*this._p1},!0),d=g.prototype=
new c;return d.constructor=g,d.getRatio=b,d.config=function(a){return new g(a)},g},w=q("Back",w("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),w("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),w("BackInOut",function(a){return 1>(a*=2)?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),t=e("easing.SlowMo",function(a,b,e){null==a?a=.7:1<a&&(a=1);this._p=1!==a?b||0===b?b:.7:0;this._p1=(1-a)/2;this._p2=a;this._p3=this._p1+this._p2;this._calcEnd=
!0===e},!0),s=t.prototype=new c;return s.constructor=t,s.getRatio=function(a){var b=a+(.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},t.ease=new t(.7,.7),s.config=t.config=function(a,b,e){return new t(a,b,e)},d=e("easing.SteppedEase",function(a){a=a||1;this._p1=1/a;this._p2=a+1},!0),s=d.prototype=new c,s.constructor=d,s.getRatio=function(a){return 0>
a?a=0:1<=a&&(a=.999999999),(this._p2*a>>0)*this._p1},s.config=d.config=function(a){return new d(a)},f=e("easing.RoughEase",function(a){a=a||{};for(var b,e,g,d,m=a.taper||"none",f=[],q=0,h=d=0|(a.points||20),k=!1!==a.randomize,w=!0===a.clamp,t=a.template instanceof c?a.template:null,s="number"==typeof a.strength?.4*a.strength:.4;-1<--h;)a=k?Math.random():1/d*h,b=t?t.getRatio(a):a,"none"===m?e=s:"out"===m?(g=1-a,e=g*g*s):"in"===m?e=a*a*s:.5>a?(g=2*a,e=.5*g*g*s):(g=2*(1-a),e=.5*g*g*s),k?b+=Math.random()*
e-.5*e:h%2?b+=.5*e:b-=.5*e,w&&(1<b?b=1:0>b&&(b=0)),f[q++]={x:a,y:b};f.sort(function(a,b){return a.x-b.x});e=new n(1,1,null);for(h=d;-1<--h;)d=f[h],e=new n(d.x,d.y,e);this._prev=new n(0,0,0!==e.t?e:e.next)},!0),s=f.prototype=new c,s.constructor=f,s.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},s.config=function(a){return new f(a)},f.ease=new f,q("Bounce",g("BounceOut",function(a){return 1/
2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),g("BounceIn",function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),g("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,
b?.5*(1-a):.5*a+.5})),q("Circ",g("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),g("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),g("CircInOut",function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),k=function(b,g,d){var m=e("easing."+b,function(b,e){this._p1=b||1;this._p2=e||d;this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0);b=m.prototype=new c;return b.constructor=m,b.getRatio=g,b.config=function(a,b){return new m(a,b)},m},q("Elastic",k("ElasticOut",function(b){return this._p1*
Math.pow(2,-10*b)*Math.sin((b-this._p3)*a/this._p2)+1},.3),k("ElasticIn",function(b){return-(this._p1*Math.pow(2,10*(b-=1))*Math.sin((b-this._p3)*a/this._p2))},.3),k("ElasticInOut",function(b){return 1>(b*=2)?-.5*this._p1*Math.pow(2,10*(b-=1))*Math.sin((b-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(b-=1))*Math.sin((b-this._p3)*a/this._p2)+1},.45)),q("Expo",g("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),g("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),g("ExpoInOut",function(a){return 1>
(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),q("Sine",g("SineOut",function(a){return Math.sin(a*b)}),g("SineIn",function(a){return-Math.cos(a*b)+1}),g("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),e("easing.EaseLookup",{find:function(a){return c.map[a]}},!0),m(h.SlowMo,"SlowMo","ease,"),m(f,"RoughEase","ease,"),m(d,"SteppedEase","ease,"),w},!0)});_gsScope._gsDefine&&_gsScope._gsQueue.pop()();
(function(c,d){var f=c.GreenSockGlobals=c.GreenSockGlobals||c;if(!f.TweenLite){var k,h,a,b,e,g=function(a){var b=a.split("."),e=f;for(a=0;b.length>a;a++)e[b[a]]=e=e[b[a]]||{};return e},m=g("com.greensock"),q=function(a){var b,e=[],c=a.length;for(b=0;b!==c;e.push(a[b++]));return e},n=function(){},w=function(){var a=Object.prototype.toString,b=a.call([]);return function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&a.call(e)===b)}}(),t={},s=function(a,b,e,m){this.sc=t[a]?t[a].sc:
[];t[a]=this;this.gsClass=null;this.func=e;var q=[];this.check=function(n){for(var l,h,k=b.length,w=k;-1<--k;)(l=t[b[k]]||new s(b[k],[])).gsClass?(q[k]=l.gsClass,w--):n&&l.sc.push(this);if(0===w&&e)for(n=("com.greensock."+a).split("."),l=n.pop(),h=g(n.join("."))[l]=this.gsClass=e.apply(e,q),m&&(f[l]=h,"function"==typeof define&&define.amd?define((c.GreenSockAMDPath?c.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return h}):a===d&&"undefined"!=typeof module&&module.exports&&(module.exports=
h)),k=0;this.sc.length>k;k++)this.sc[k].check()};this.check(!0)},r=c._gsDefine=function(a,b,e,c){return new s(a,b,e,c)},x=m._class=function(a,b,e){return b=b||function(){},r(a,[],function(){return b},e),b};r.globals=f;var l=[0,0,1,1],u=[],v=x("easing.Ease",function(a,b,e,c){this._func=a;this._type=e||0;this._power=c||0;this._params=b?l.concat(b):l},!0),p=v.map={},y=v.register=function(a,b,e,c){var g,d,f;b=b.split(",");for(var q=b.length,n=(e||"easeIn,easeOut,easeInOut").split(",");-1<--q;)for(g=b[q],
e=c?x("easing."+g,null,!0):m.easing[g]||{},d=n.length;-1<--d;)f=n[d],p[g+"."+f]=p[f+g]=e[f]=a.getRatio?a:a[f]||new a};a=v.prototype;a._calcEnd=!1;a.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,e=this._power,c=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===e?c*=c:2===e?c*=c*c:3===e?c*=c*c*c:4===e&&(c*=c*c*c*c),1===b?1-c:2===b?c:.5>a?c/2:1-c/2};k=["Linear","Quad","Cubic","Quart","Quint,Strong"];for(h=k.length;-1<--h;)a=k[h]+",Power"+
h,y(new v(null,null,1,h),a,"easeOut",!0),y(new v(null,null,2,h),a,"easeIn"+(0===h?",easeNone":"")),y(new v(null,null,3,h),a,"easeInOut");p.linear=m.easing.Linear.easeIn;p.swing=m.easing.Quad.easeInOut;var A=x("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});a=A.prototype;a.addEventListener=function(a,c,g,d,m){m=m||0;var f,q=this._listeners[a],n=0;null==q&&(this._listeners[a]=q=[]);for(f=q.length;-1<--f;)a=q[f],a.c===c&&a.s===g?q.splice(f,1):0===n&&m>a.pr&&(n=f+1);
q.splice(n,0,{c:c,s:g,up:d,pr:m});this!==b||e||b.wake()};a.removeEventListener=function(a,b){var e,c=this._listeners[a];if(c)for(e=c.length;-1<--e;)if(c[e].c===b)return c.splice(e,1),void 0};a.dispatchEvent=function(a){var b,e,c,g=this._listeners[a];if(g)for(b=g.length,e=this._eventTarget;-1<--b;)c=g[b],c.up?c.c.call(c.s||e,{type:a,target:e}):c.c.call(c.s||e)};var z=c.requestAnimationFrame,D=c.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},H=C();k=["ms","moz","webkit","o"];
for(h=k.length;-1<--h&&!z;)z=c[k[h]+"RequestAnimationFrame"],D=c[k[h]+"CancelAnimationFrame"]||c[k[h]+"CancelRequestAnimationFrame"];x("Ticker",function(a,c){var g,d,m,f,q,l=this,h=C(),k=!1!==c&&z,w=500,p=33,t=function(a){var b,e;b=C()-H;b>w&&(h+=b-p);H+=b;l.time=(H-h)/1E3;b=l.time-q;(!g||0<b||!0===a)&&(l.frame++,q+=b+(b>=f?.004:f-b),e=!0);!0!==a&&(m=d(t));e&&l.dispatchEvent("tick")};A.call(l);l.time=l.frame=0;l.tick=function(){t(!0)};l.lagSmoothing=function(a,b){w=a||1E10;p=Math.min(b,w,0)};l.sleep=
function(){null!=m&&(k&&D?D(m):clearTimeout(m),d=n,m=null,l===b&&(e=!1))};l.wake=function(){null!==m?l.sleep():10<l.frame&&(H=C()-w+5);d=0===g?n:k&&z?z:function(a){return setTimeout(a,0|1E3*(q-l.time)+1)};l===b&&(e=!0);t(2)};l.fps=function(a){return arguments.length?(g=a,f=1/(g||60),q=this.time+f,l.wake(),void 0):g};l.useRAF=function(a){return arguments.length?(l.sleep(),k=a,l.fps(g),void 0):k};l.fps(a);setTimeout(function(){k&&(!m||5>l.frame)&&l.useRAF(!1)},1500)});a=m.Ticker.prototype=new m.events.EventDispatcher;
a.constructor=m.Ticker;var B=x("core.Animation",function(a,c){if(this.vars=c=c||{},this._duration=this._totalDuration=a||0,this._delay=Number(c.delay)||0,this._timeScale=1,this._active=!0===c.immediateRender,this.data=c.data,this._reversed=!0===c.reversed,U){e||b.wake();var g=this.vars.useFrames?P:U;g.add(this,g._time);this.vars.paused&&this.paused(!0)}});b=B.ticker=new m.Ticker;a=B.prototype;a._dirty=a._gc=a._initted=a._paused=!1;a._totalTime=a._time=0;a._rawPrevTime=-1;a._next=a._last=a._onUpdate=
a._timeline=a.timeline=null;a._paused=!1;var L=function(){e&&2E3<C()-H&&b.wake();setTimeout(L,2E3)};L();a.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)};a.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)};a.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)};a.seek=function(a,b){return this.totalTime(Number(a),!1!==b)};a.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,!1!==b,!0)};a.reverse=function(a,
b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)};a.render=function(){};a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this};a.isActive=function(){var a,b=this._timeline,e=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=e&&e+this.totalDuration()/this._timeScale>a};a._enabled=function(a,c){return e||b.wake(),this._gc=!a,this._active=
this.isActive(),!0!==c&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1};a._kill=function(){return this._enabled(!1,!1)};a.kill=function(a,b){return this._kill(a,b),this};a._uncache=function(a){for(a=a?this:this.timeline;a;)a._dirty=!0,a=a.timeline;return this};a._swapSelfInParams=function(a){for(var b=a.length,e=a.concat();-1<--b;)"{self}"===a[b]&&(e[b]=this);return e};a.eventCallback=function(a,b,e,c){if("on"===(a||"").substr(0,
2)){var g=this.vars;if(1===arguments.length)return g[a];null==b?delete g[a]:(g[a]=b,g[a+"Params"]=w(e)&&-1!==e.join("").indexOf("{self}")?this._swapSelfInParams(e):e,g[a+"Scope"]=c);"onUpdate"===a&&(this._onUpdate=b)}return this};a.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay};a.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&
0<this._time&&this._time<this._duration&&0!==a&&this.totalTime(a/this._duration*this._totalTime,!0),this):(this._dirty=!1,this._duration)};a.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration};a.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time};a.totalTime=function(a,c,g){if(e||b.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!g&&
(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,m=this._timeline;if(a>d&&!g&&(a=d),this._startTime=(this._paused?this._pauseTime:m._time)-(this._reversed?d-a:a)/this._timeScale,m._dirty||this._uncache(!1),m._timeline)for(;m._timeline;)m._timeline._time!==(m._startTime+m._totalTime)/m._timeScale&&m.totalTime(m._totalTime,!0),m=m._timeline}this._gc&&this._enabled(!0,!1);(this._totalTime!==a||0===this._duration)&&(this.render(a,
c,!1),E.length&&Y())}return this};a.progress=a.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()};a.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime};a.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||1E-10,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,
b=b||0===b?b:this._timeline.totalTime();this._startTime=b-(b-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)};a.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed};a.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){e||a||b.wake();var c=this._timeline,
g=c.rawTime(),d=g-this._pauseTime;!a&&c.smoothChildTiming&&(this._startTime+=d,this._uncache(!1));this._pauseTime=a?g:null;this._paused=a;this._active=this.isActive();!a&&0!==d&&this._initted&&this.duration()&&this.render(c.smoothChildTiming?this._totalTime:(g-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};h=x("core.SimpleTimeline",function(a){B.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=!0});a=h.prototype=new B;a.constructor=h;a.kill()._gc=
!1;a._first=a._last=null;a._sortChildren=!1;a.add=a.insert=function(a,b){var e,c;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(c=a._startTime;e&&e._startTime>c;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,
a._prev=e,this._timeline&&this._uncache(!0),this};a._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,this._timeline&&this._uncache(!0)),this};a.render=function(a,b,e){var c,g=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;g;)c=g._next,(g._active||a>=g._startTime&&!g._paused)&&(g._reversed?g.render((g._dirty?
g.totalDuration():g._totalDuration)-(a-g._startTime)*g._timeScale,b,e):g.render((a-g._startTime)*g._timeScale,b,e)),g=c};a.rawTime=function(){return e||b.wake(),this._totalTime};var G=x("TweenLite",function(a,b,e){if(B.call(this,b,e),this.render=G.prototype.render,null==a)throw"Cannot tween a null target.";this.target=a="string"!=typeof a?a:G.selector(a)||a;var g,d;g=a.jquery||a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType);e=this.vars.overwrite;if(this._overwrite=e=null==
e?R[G.defaultOverwrite]:"number"==typeof e?e>>0:R[e],(g||a instanceof Array||a.push&&w(a))&&"number"!=typeof a[0])for(this._targets=d=q(a),this._propLookup=[],this._siblings=[],a=0;d.length>a;a++)(g=d[a])?"string"!=typeof g?g.length&&g!==c&&g[0]&&(g[0]===c||g[0].nodeType&&g[0].style&&!g.nodeType)?(d.splice(a--,1),this._targets=d=d.concat(q(g))):(this._siblings[a]=aa(g,this,!1),1===e&&1<this._siblings[a].length&&F(g,this,null,1,this._siblings[a])):(g=d[a--]=G.selector(g),"string"==typeof g&&d.splice(a+
1,1)):d.splice(a--,1);else this._propLookup={},this._siblings=aa(a,this,!1),1===e&&1<this._siblings.length&&F(a,this,null,1,this._siblings);(this.vars.immediateRender||0===b&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1E-10,this.render(-this._delay))},!0),M=function(a){return a.length&&a!==c&&a[0]&&(a[0]===c||a[0].nodeType&&a[0].style&&!a.nodeType)};a=G.prototype=new B;a.constructor=G;a.kill()._gc=!1;a.ratio=0;a._firstPT=a._targets=a._overwrittenProps=a._startAt=null;a._notifyPluginsOfEnabled=
a._lazy=!1;G.version="1.13.2";G.defaultEase=a._ease=new v(null,null,1,1);G.defaultOverwrite="auto";G.ticker=b;G.autoSleep=!0;G.lagSmoothing=function(a,e){b.lagSmoothing(a,e)};G.selector=c.$||c.jQuery||function(a){var b=c.$||c.jQuery;return b?(G.selector=b,b(a)):"undefined"==typeof document?a:document.querySelectorAll?document.querySelectorAll(a):document.getElementById("#"===a.charAt(0)?a.substr(1):a)};var E=[],K={},y=G._internals={isArray:w,isSelector:M,lazyTweens:E},J=G._plugins={},O=y.tweenLookup=
{},Q=0,T=y.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},R={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,
"true":1,"false":0},P=B._rootFramesTimeline=new h,U=B._rootTimeline=new h,Y=y.lazyRender=function(){var a=E.length;for(K={};-1<--a;)(k=E[a])&&!1!==k._lazy&&(k.render(k._lazy[0],k._lazy[1],!0),k._lazy=!1);E.length=0};U._startTime=b.time;P._startTime=b.frame;U._active=P._active=!0;setTimeout(Y,1);B._updateRoot=G.render=function(){var a,e,c;if(E.length&&Y(),U.render((b.time-U._startTime)*U._timeScale,!1,!1),P.render((b.frame-P._startTime)*P._timeScale,!1,!1),E.length&&Y(),!(b.frame%120)){for(c in O){e=
O[c].tweens;for(a=e.length;-1<--a;)e[a]._gc&&e.splice(a,1);0===e.length&&delete O[c]}if(c=U._first,(!c||c._paused)&&G.autoSleep&&!P._first&&1===b._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||b.sleep()}}};b.addEventListener("tick",B._updateRoot);var aa=function(a,b,e){var c,g,d=a._gsTweenID;if(O[d||(a._gsTweenID=d="t"+Q++)]||(O[d]={target:a,tweens:[]}),b&&(c=O[d].tweens,c[g=c.length]=b,e))for(;-1<--g;)c[g]===b&&c.splice(g,1);return O[d].tweens},F=function(a,b,e,c,g){var d,m,f;if(1===c||
4<=c){a=g.length;for(d=0;a>d;d++)if((f=g[d])!==b)f._gc||f._enabled(!1,!1)&&(m=!0);else if(5===c)break;return m}var q,n=b._startTime+1E-10,l=[],h=0,k=0===b._duration;for(d=g.length;-1<--d;)(f=g[d])===b||f._gc||f._paused||(f._timeline!==b._timeline?(q=q||ba(b,0,k),0===ba(f,q,k)&&(l[h++]=f)):n>=f._startTime&&f._startTime+f.totalDuration()/f._timeScale>n&&((k||!f._initted)&&2E-10>=n-f._startTime||(l[h++]=f)));for(d=h;-1<--d;)f=l[d],2===c&&f._kill(e,a)&&(m=!0),(2!==c||!f._firstPT&&f._initted)&&f._enabled(!1,
!1)&&(m=!0);return m},ba=function(a,b,e){for(var c=a._timeline,g=c._timeScale,d=a._startTime;c._timeline;){if(d+=c._startTime,g*=c._timeScale,c._paused)return-100;c=c._timeline}return d/=g,d>b?d-b:e&&d===b||!a._initted&&2E-10>d-b?1E-10:(d+=a.totalDuration()/a._timeScale/g)>b+1E-10?0:d-b-1E-10};a._init=function(){var a,b,e,c=this.vars,g=this._overwrittenProps,d=this._duration,m=!!c.immediateRender,f=c.ease;if(c.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill());e={};for(a in c.startAt)e[a]=
c.startAt[a];if(e.overwrite=!1,e.immediateRender=!0,e.lazy=m&&!1!==c.lazy,e.startAt=e.delay=null,this._startAt=G.to(this.target,0,e),m)if(0<this._time)this._startAt=null;else if(0!==d)return}else if(c.runBackwards&&0!==d)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(m=!1);e={};for(a in c)T[a]&&"autoCSS"!==a||(e[a]=c[a]);if(e.overwrite=0,e.data="isFromStart",e.lazy=m&&!1!==c.lazy,e.immediateRender=m,this._startAt=G.to(this.target,0,e),m){if(0===
this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=f=f?f instanceof v?f:"function"==typeof f?new v(f,c.easeParams):p[f]||G.defaultEase:G.defaultEase,c.easeParams instanceof Array&&f.config&&(this._ease=f.config.apply(f,c.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;-1<--a;)this._initProps(this._targets[a],this._propLookup[a]=
{},this._siblings[a],g?g[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,g);if(b&&G._onPluginEvent("_onInitAllProps",this),g&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),c.runBackwards)for(e=this._firstPT;e;)e.s+=e.c,e.c=-e.c,e=e._next;this._onUpdate=c.onUpdate;this._initted=!0};a._initProps=function(a,b,e,g){var d,m,f,q,n;if(null==a)return!1;K[a._gsTweenID]&&Y();if(!this.vars.css&&a.style&&a!==c&&a.nodeType&&J.css&&!1!==this.vars.autoCSS){m=
this.vars;var l,h={};for(l in m)T[l]||l in a&&"transform"!==l&&"x"!==l&&"y"!==l&&"width"!==l&&"height"!==l&&"className"!==l&&"border"!==l||!(!J[l]||J[l]&&J[l]._autoCSS)||(h[l]=m[l],delete m[l]);m.css=h}for(d in this.vars){if(m=this.vars[d],T[d])m&&(m instanceof Array||m.push&&w(m))&&-1!==m.join("").indexOf("{self}")&&(this.vars[d]=this._swapSelfInParams(m,this));else if(J[d]&&(q=new J[d])._onInitTween(a,this.vars[d],this)){this._firstPT=n={_next:this._firstPT,t:q,p:"setRatio",s:0,c:1,f:!0,n:d,pg:!0,
pr:q._priority};for(m=q._overwriteProps.length;-1<--m;)b[q._overwriteProps[m]]=this._firstPT;(q._priority||q._onInitAllProps)&&(f=!0);(q._onDisable||q._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=b[d]=n={_next:this._firstPT,t:a,p:d,f:"function"==typeof a[d],n:d,pg:!1,pr:0},n.s=n.f?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),n.c="string"==typeof m&&"="===m.charAt(1)?parseInt(m.charAt(0)+"1",10)*Number(m.substr(2)):Number(m)-
n.s||0;n&&n._next&&(n._next._prev=n)}return g&&this._kill(g,a)?this._initProps(a,b,e,g):1<this._overwrite&&this._firstPT&&1<e.length&&F(a,this,b,this._overwrite,e)?(this._kill(b,a),this._initProps(a,b,e,g)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(K[a._gsTweenID]=!0),f)};a.render=function(a,b,e){var c,g,d,m,f=this._time,q=this._duration;d=this._rawPrevTime;if(a>=q)this._totalTime=this._time=q,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||
(c=!0,g="onComplete"),0===q&&(this._initted||!this.vars.lazy||e)&&(this._startTime===this._timeline._duration&&(a=0),(0===a||0>d||1E-10===d)&&d!==a&&(e=!0,1E-10<d&&(g="onReverseComplete")),this._rawPrevTime=m=!b||a||d===a?a:1E-10);else if(1E-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==f||0===q&&0<d&&1E-10!==d)&&(g="onReverseComplete",c=this._reversed),0>a&&(this._active=!1,0===q&&(this._initted||!this.vars.lazy||e)&&(0<=d&&(e=!0),this._rawPrevTime=
m=!b||a||d===a?a:1E-10)),this._initted||(e=!0);else if(this._totalTime=this._time=a,this._easeType){var n=a/q,l=this._easeType,h=this._easePower;(1===l||3===l&&.5<=n)&&(n=1-n);3===l&&(n*=2);1===h?n*=n:2===h?n*=n*n:3===h?n*=n*n*n:4===h&&(n*=n*n*n*n);this.ratio=1===l?1-n:2===l?n:.5>a/q?n/2:1-n/2}else this.ratio=this._ease.getRatio(a/q);if(this._time!==f||e){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!e&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&
!this._duration))return this._time=this._totalTime=f,this._rawPrevTime=d,E.push(this),this._lazy=[a,b],void 0;this._time&&!c?this.ratio=this._ease.getRatio(this._time/q):c&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}!1!==this._lazy&&(this._lazy=!1);this._active||!this._paused&&this._time!==f&&0<=a&&(this._active=!0);0!==f||(this._startAt&&(0<=a?this._startAt.render(a,b,e):g||(g="_dummyGS")),!this.vars.onStart||0===this._time&&0!==q||!b&&this.vars.onStart.apply(this.vars.onStartScope||
this,this.vars.onStartParams||u));for(d=this._firstPT;d;)d.f?d.t[d.p](d.c*this.ratio+d.s):d.t[d.p]=d.c*this.ratio+d.s,d=d._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,e),b||(this._time!==f||c)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u));g&&(!this._gc||e)&&(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,e),c&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[g]&&
this.vars[g].apply(this.vars[g+"Scope"]||this,this.vars[g+"Params"]||u),0===q&&1E-10===this._rawPrevTime&&1E-10!==m&&(this._rawPrevTime=0))}};a._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:G.selector(b)||b;var e,c,g,d,m,f,q;if((w(b)||M(b))&&"number"!=typeof b[0])for(e=b.length;-1<--e;)this._kill(a,b[e])&&(f=!0);else{if(this._targets)for(e=this._targets.length;-1<--e;){if(b===
this._targets[e]){m=this._propLookup[e]||{};this._overwrittenProps=this._overwrittenProps||[];c=this._overwrittenProps[e]=a?this._overwrittenProps[e]||{}:"all";break}}else{if(b!==this.target)return!1;m=this._propLookup;c=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(m){e=a||m;q=a!==c&&"all"!==c&&a!==m&&("object"!=typeof a||!a._tempKill);for(g in e)(d=m[g])&&(d.pg&&d.t._kill(e)&&(f=!0),d.pg&&0!==d.t._overwriteProps.length||(d._prev?d._prev._next=d._next:d===this._firstPT&&(this._firstPT=
d._next),d._next&&(d._next._prev=d._prev),d._next=d._prev=null),delete m[g]),q&&(c[g]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return f};a.invalidate=function(){return this._notifyPluginsOfEnabled&&G._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],B.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1E-10,this.render(-this._delay)),
this};a._enabled=function(a,c){if(e||b.wake(),a&&this._gc){var g,d=this._targets;if(d)for(g=d.length;-1<--g;)this._siblings[g]=aa(d[g],this,!0);else this._siblings=aa(this.target,this,!0)}return B.prototype._enabled.call(this,a,c),this._notifyPluginsOfEnabled&&this._firstPT?G._onPluginEvent(a?"_onEnable":"_onDisable",this):!1};G.to=function(a,b,e){return new G(a,b,e)};G.from=function(a,b,e){return e.runBackwards=!0,e.immediateRender=0!=e.immediateRender,new G(a,b,e)};G.fromTo=function(a,b,e,c){return c.startAt=
e,c.immediateRender=0!=c.immediateRender&&0!=e.immediateRender,new G(a,b,c)};G.delayedCall=function(a,b,e,c,g){return new G(b,0,{delay:a,onComplete:b,onCompleteParams:e,onCompleteScope:c,onReverseComplete:b,onReverseCompleteParams:e,onReverseCompleteScope:c,immediateRender:!1,useFrames:g,overwrite:0})};G.set=function(a,b){return new G(a,0,b)};G.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:G.selector(a)||a;var e,c,g,d;if((w(a)||M(a))&&"number"!=typeof a[0]){e=a.length;for(c=
[];-1<--e;)c=c.concat(G.getTweensOf(a[e],b));for(e=c.length;-1<--e;)for(d=c[e],g=e;-1<--g;)d===c[g]&&c.splice(e,1)}else for(c=aa(a).concat(),e=c.length;-1<--e;)(c[e]._gc||b&&!c[e].isActive())&&c.splice(e,1);return c};G.killTweensOf=G.killDelayedCallsTo=function(a,b,e){"object"==typeof b&&(e=b,b=!1);b=G.getTweensOf(a,b);for(var c=b.length;-1<--c;)b[c]._kill(e,a)};var W=x("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=
b||0;this._super=W.prototype},!0);if(a=W.prototype,W.version="1.10.1",W.API=2,a._firstPT=null,a._addTween=function(a,b,e,c,g,d){var m,f;return null!=c&&(m="number"==typeof c||"="!==c.charAt(1)?Number(c)-e:parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)))?(this._firstPT=f={_next:this._firstPT,t:a,p:b,s:e,c:m,f:"function"==typeof a[b],n:g||b,r:d},f._next&&(f._next._prev=f),f):void 0},a.setRatio=function(a){for(var b,e=this._firstPT;e;)b=e.c*a+e.s,e.r?b=Math.round(b):1E-6>b&&-1E-6<b&&(b=0),e.f?e.t[e.p](b):
e.t[e.p]=b,e=e._next},a._kill=function(a){var b,e=this._overwriteProps,c=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=e.length;-1<--b;)null!=a[e[b]]&&e.splice(b,1);for(;c;)null!=a[c.n]&&(c._next&&(c._next._prev=c._prev),c._prev?(c._prev._next=c._next,c._prev=null):this._firstPT===c&&(this._firstPT=c._next)),c=c._next;return!1},a._roundProps=function(a,b){for(var e=this._firstPT;e;)(a[this._propName]||null!=e.n&&a[e.n.split(this._propName+"_").join("")])&&(e.r=b),e=e._next},
G._onPluginEvent=function(a,b){var e,c,g,d,m,f=b._firstPT;if("_onInitAllProps"===a){for(;f;){m=f._next;for(c=g;c&&c.pr>f.pr;)c=c._next;(f._prev=c?c._prev:d)?f._prev._next=f:g=f;(f._next=c)?c._prev=f:d=f;f=m}f=b._firstPT=g}for(;f;)f.pg&&"function"==typeof f.t[a]&&f.t[a]()&&(e=!0),f=f._next;return e},W.activate=function(a){for(var b=a.length;-1<--b;)a[b].API===W.API&&(J[(new a[b])._propName]=a[b]);return!0},r.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,
e=a.propName,c=a.priority||0,g=a.overwriteProps,d={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},m=x("plugins."+e.charAt(0).toUpperCase()+e.substr(1)+"Plugin",function(){W.call(this,e,c);this._overwriteProps=g||[]},!0===a.global),f=m.prototype=new W(e);f.constructor=m;m.API=a.API;for(b in d)"function"==typeof a[b]&&(f[d[b]]=a[b]);return m.version=a.version,W.activate([m]),m},k=c._gsQueue){for(h=0;k.length>h;h++)k[h]();for(a in t)t[a].func||c.console.log("GSAP encountered missing dependency: com.greensock."+
a)}e=!1}})("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");
(function(){var c=c||{};c.WEBGL_RENDERER=0;c.CANVAS_RENDERER=1;c.VERSION="v1.6.1";c.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16};c.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1};c._UID=0;"undefined"!=typeof Float32Array?(c.Float32Array=Float32Array,c.Uint16Array=Uint16Array):(c.Float32Array=Array,c.Uint16Array=Array);c.INTERACTION_FREQUENCY=30;c.AUTO_PREVENT_DEFAULT=
!0;c.RAD_TO_DEG=180/Math.PI;c.DEG_TO_RAD=Math.PI/180;c.dontSayHello=!1;c.sayHello=function(a){c.dontSayHello||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?console.log.apply(console,["%c %c %c Pixi.js "+c.VERSION+" - "+a+"  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff",
"color: #ff2424; background: #fff"]):window.console&&console.log("Pixi.js "+c.VERSION+" - http://www.pixijs.com/"),c.dontSayHello=!0)};c.Point=function(a,b){this.x=a||0;this.y=b||0};c.Point.prototype.clone=function(){return new c.Point(this.x,this.y)};c.Point.prototype.set=function(a,b){this.x=a||0;this.y=b||(0!==b?this.x:0)};c.Point.prototype.constructor=c.Point;c.Rectangle=function(a,b,e,c){this.x=a||0;this.y=b||0;this.width=e||0;this.height=c||0};c.Rectangle.prototype.clone=function(){return new c.Rectangle(this.x,
this.y,this.width,this.height)};c.Rectangle.prototype.contains=function(a,b){if(0>=this.width||0>=this.height)return!1;var e=this.x;return a>=e&&a<=e+this.width&&(e=this.y,b>=e&&b<=e+this.height)?!0:!1};c.Rectangle.prototype.constructor=c.Rectangle;c.EmptyRectangle=new c.Rectangle(0,0,0,0);c.Polygon=function(a){if(a instanceof Array||(a=Array.prototype.slice.call(arguments)),"number"==typeof a[0]){for(var b=[],e=0,g=a.length;g>e;e+=2)b.push(new c.Point(a[e],a[e+1]));a=b}this.points=a};c.Polygon.prototype.clone=
function(){for(var a=[],b=0;b<this.points.length;b++)a.push(this.points[b].clone());return new c.Polygon(a)};c.Polygon.prototype.contains=function(a,b){for(var e=!1,c=0,d=this.points.length-1;c<this.points.length;d=c++){var f=this.points[c].x,n=this.points[c].y,h=this.points[d].x,d=this.points[d].y;n>b!=d>b&&(h-f)*(b-n)/(d-n)+f>a&&(e=!e)}return e};c.Polygon.prototype.constructor=c.Polygon;c.Circle=function(a,b,e){this.x=a||0;this.y=b||0;this.radius=e||0};c.Circle.prototype.clone=function(){return new c.Circle(this.x,
this.y,this.radius)};c.Circle.prototype.contains=function(a,b){if(0>=this.radius)return!1;var e=this.x-a,c=this.y-b,d=this.radius*this.radius;return e*=e,c*=c,d>=e+c};c.Circle.prototype.getBounds=function(){return new c.Rectangle(this.x-this.radius,this.y-this.radius,this.width,this.height)};c.Circle.prototype.constructor=c.Circle;c.Ellipse=function(a,b,e,c){this.x=a||0;this.y=b||0;this.width=e||0;this.height=c||0};c.Ellipse.prototype.clone=function(){return new c.Ellipse(this.x,this.y,this.width,
this.height)};c.Ellipse.prototype.contains=function(a,b){if(0>=this.width||0>=this.height)return!1;var e=(a-this.x)/this.width,c=(b-this.y)/this.height;return e*=e,c*=c,1>=e+c};c.Ellipse.prototype.getBounds=function(){return new c.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)};c.Ellipse.prototype.constructor=c.Ellipse;c.Matrix=function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0};c.Matrix.prototype.fromArray=function(a){this.a=a[0];this.b=a[1];this.c=a[3];this.d=
a[4];this.tx=a[2];this.ty=a[5]};c.Matrix.prototype.toArray=function(a){this.array||(this.array=new Float32Array(9));var b=this.array;return a?(b[0]=this.a,b[1]=this.c,b[2]=0,b[3]=this.b,b[4]=this.d,b[5]=0,b[6]=this.tx,b[7]=this.ty,b[8]=1):(b[0]=this.a,b[1]=this.b,b[2]=this.tx,b[3]=this.c,b[4]=this.d,b[5]=this.ty,b[6]=0,b[7]=0,b[8]=1),b};c.identityMatrix=new c.Matrix;c.determineMatrixArrayType=function(){return"undefined"!=typeof Float32Array?Float32Array:Array};c.Matrix2=c.determineMatrixArrayType();
c.DisplayObject=function(){this.position=new c.Point;this.scale=new c.Point(1,1);this.pivot=new c.Point(0,0);this.rotation=0;this.alpha=1;this.visible=!0;this.hitArea=null;this.renderable=this.buttonMode=!1;this.stage=this.parent=null;this.worldAlpha=1;this._interactive=!1;this.defaultCursor="pointer";this.worldTransform=new c.Matrix;this.color=[];this.dynamic=!0;this._sr=0;this._cr=1;this.filterArea=null;this._bounds=new c.Rectangle(0,0,1,1);this._mask=this._currentBounds=null;this._cacheIsDirty=
this._cacheAsBitmap=!1};c.DisplayObject.prototype.constructor=c.DisplayObject;c.DisplayObject.prototype.setInteractive=function(a){this.interactive=a};Object.defineProperty(c.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(a){this._interactive=a;this.stage&&(this.stage.dirty=!0)}});Object.defineProperty(c.DisplayObject.prototype,"worldVisible",{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}});Object.defineProperty(c.DisplayObject.prototype,
"mask",{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.isMask=!1);(this._mask=a)&&(this._mask.isMask=!0)}});Object.defineProperty(c.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(a){if(a){for(var b=[],e=0;e<a.length;e++)for(var c=a[e].passes,d=0;d<c.length;d++)b.push(c[d]);this._filterBlock={target:this,filterPasses:b}}this._filters=a}});Object.defineProperty(c.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},
set:function(a){this._cacheAsBitmap!==a&&(a?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=a)}});c.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var a=this.parent.worldTransform,b=this.worldTransform,e=this.pivot.x,c=this.pivot.y,d=this._cr*this.scale.x,f=-this._sr*this.scale.y,n=this._sr*this.scale.x,h=this._cr*this.scale.y,k=
this.position.x-d*e-c*f,e=this.position.y-h*c-e*n,c=a.a,s=a.b,r=a.c,x=a.d;b.a=c*d+s*n;b.b=c*f+s*h;b.tx=c*k+s*e+a.tx;b.c=r*d+x*n;b.d=r*f+x*h;b.ty=r*k+x*e+a.ty;this.worldAlpha=this.alpha*this.parent.worldAlpha};c.DisplayObject.prototype.getBounds=function(a){return c.EmptyRectangle};c.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(c.identityMatrix)};c.DisplayObject.prototype.setStageReference=function(a){this.stage=a;this._interactive&&(this.stage.dirty=!0)};c.DisplayObject.prototype.generateTexture=
function(a){var b=this.getLocalBounds();a=new c.RenderTexture(0|b.width,0|b.height,a);return a.render(this,new c.Point(-b.x,-b.y)),a};c.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()};c.DisplayObject.prototype._renderCachedSprite=function(a){this._cachedSprite.worldAlpha=this.worldAlpha;a.gl?c.Sprite.prototype._renderWebGL.call(this._cachedSprite,a):c.Sprite.prototype._renderCanvas.call(this._cachedSprite,a)};c.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=
!1;var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|a.width,0|a.height);else{var b=new c.RenderTexture(0|a.width,0|a.height);this._cachedSprite=new c.Sprite(b);this._cachedSprite.worldTransform=this.worldTransform}b=this._filters;this._filters=null;this._cachedSprite.filters=b;this._cachedSprite.texture.render(this,new c.Point(-a.x,-a.y));this._cachedSprite.anchor.x=-(a.x/a.width);this._cachedSprite.anchor.y=-(a.y/a.height);this._filters=b;this._cacheAsBitmap=
!0};c.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)};c.DisplayObject.prototype._renderWebGL=function(a){};c.DisplayObject.prototype._renderCanvas=function(a){};Object.defineProperty(c.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(a){this.position.x=a}});Object.defineProperty(c.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(a){this.position.y=
a}});c.DisplayObjectContainer=function(){c.DisplayObject.call(this);this.children=[]};c.DisplayObjectContainer.prototype=Object.create(c.DisplayObject.prototype);c.DisplayObjectContainer.prototype.constructor=c.DisplayObjectContainer;Object.defineProperty(c.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/(b/this.scale.x):1;this._width=a}});Object.defineProperty(c.DisplayObjectContainer.prototype,
"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/(b/this.scale.y):1;this._height=a}});c.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};c.DisplayObjectContainer.prototype.addChildAt=function(a,b){if(0<=b&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.stage&&a.setStageReference(this.stage),
a;throw Error(a+" The index "+b+" supplied is out of bounds "+this.children.length);};c.DisplayObjectContainer.prototype.swapChildren=function(a,b){if(a!==b){var e=this.children.indexOf(a),c=this.children.indexOf(b);if(0>e||0>c)throw Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[e]=b;this.children[c]=a}};c.DisplayObjectContainer.prototype.getChildAt=function(a){if(0<=a&&a<this.children.length)return this.children[a];throw Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
};c.DisplayObjectContainer.prototype.removeChild=function(a){return this.removeChildAt(this.children.indexOf(a))};c.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return this.stage&&b.removeStageReference(),b.parent=void 0,this.children.splice(a,1),b};c.DisplayObjectContainer.prototype.removeChildren=function(a,b){var e=a||0,c="number"==typeof b?b:this.children.length,d=c-e;if(0<d&&c>=d){e=this.children.splice(e,d);for(c=0;c<e.length;c++)d=e[c],this.stage&&d.removeStageReference(),
d.parent=void 0;return e}throw Error("Range Error, numeric values are outside the acceptable range");};c.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(c.DisplayObject.prototype.updateTransform.call(this),!this._cacheAsBitmap))for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()};c.DisplayObjectContainer.prototype.getBounds=function(a){if(0===this.children.length)return c.EmptyRectangle;if(a){var b=this.worldTransform;this.worldTransform=a;this.updateTransform();
this.worldTransform=b}for(var e,g,d,b=1/0,f=1/0,n=-1/0,h=-1/0,k=!1,s=0,r=this.children.length;r>s;s++)this.children[s].visible&&(k=!0,e=this.children[s].getBounds(a),b=b<e.x?b:e.x,f=f<e.y?f:e.y,g=e.width+e.x,d=e.height+e.y,n=n>g?n:g,h=h>d?h:d);if(!k)return c.EmptyRectangle;a=this._bounds;return a.x=b,a.y=f,a.width=n-b,a.height=h-f,a};c.DisplayObjectContainer.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=c.identityMatrix;for(var b=0,e=this.children.length;e>b;b++)this.children[b].updateTransform();
b=this.getBounds();return this.worldTransform=a,b};c.DisplayObjectContainer.prototype.setStageReference=function(a){this.stage=a;this._interactive&&(this.stage.dirty=!0);for(var b=0,e=this.children.length;e>b;b++)this.children[b].setStageReference(a)};c.DisplayObjectContainer.prototype.removeStageReference=function(){for(var a=0,b=this.children.length;b>a;a++)this.children[a].removeStageReference();this._interactive&&(this.stage.dirty=!0);this.stage=null};c.DisplayObjectContainer.prototype._renderWebGL=
function(a){if(this.visible&&!(0>=this.alpha)){if(this._cacheAsBitmap)return this._renderCachedSprite(a),void 0;var b,e;if(this._mask||this._filters){this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock));this._mask&&(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start());b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop();this._mask&&a.maskManager.popMask(this._mask,a);this._filters&&a.filterManager.popFilter();
a.spriteBatch.start()}else for(b=0,e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a)}};c.DisplayObjectContainer.prototype._renderCanvas=function(a){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return this._renderCachedSprite(a),void 0;this._mask&&a.maskManager.pushMask(this._mask,a.context);for(var b=0,e=this.children.length;e>b;b++)this.children[b]._renderCanvas(a);this._mask&&a.maskManager.popMask(a.context)}};c.Sprite=function(a){c.DisplayObjectContainer.call(this);
this.anchor=new c.Point;this.texture=a;this._height=this._width=0;this.tint=16777215;this.blendMode=c.blendModes.NORMAL;a.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind));this.renderable=!0};c.Sprite.prototype=Object.create(c.DisplayObjectContainer.prototype);c.Sprite.prototype.constructor=c.Sprite;Object.defineProperty(c.Sprite.prototype,"width",{get:function(){return this.scale.x*
this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width;this._width=a}});Object.defineProperty(c.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height;this._height=a}});c.Sprite.prototype.setTexture=function(a){this.texture=a;this.cachedTint=16777215};c.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width);this._height&&(this.scale.y=
this._height/this.texture.frame.height)};c.Sprite.prototype.getBounds=function(a){var b=this.texture.frame.width,e=this.texture.frame.height,c=b*(1-this.anchor.x),d=b*-this.anchor.x,f=e*(1-this.anchor.y),n=e*-this.anchor.y;a=a||this.worldTransform;var h=a.a,k=a.c,s=a.b,r=a.d,x=a.tx,l=a.ty;a=h*d+s*n+x;var e=r*n+k*d+l,b=h*c+s*n+x,n=r*n+k*c+l,u=h*c+s*f+x,c=r*f+k*c+l,h=h*d+s*f+x,d=r*f+k*d+l,f=-1/0,k=-1/0,r=1/0,s=1/0,r=r>a?a:r,r=r>b?b:r,r=r>u?u:r,r=r>h?h:r,s=s>e?e:s,s=s>n?n:s,s=s>c?c:s,s=s>d?d:s,f=a>f?
a:f,f=b>f?b:f,f=u>f?u:f,k=e>k?e:k,k=n>k?n:k,k=c>k?c:k;a=this._bounds;return a.x=r,a.width=(h>f?h:f)-r,a.y=s,a.height=(d>k?d:k)-s,this._currentBounds=a,a};c.Sprite.prototype._renderWebGL=function(a){if(this.visible&&!(0>=this.alpha)){var b,e;if(this._mask||this._filters){var c=a.spriteBatch;this._filters&&(c.flush(),a.filterManager.pushFilter(this._filterBlock));this._mask&&(c.stop(),a.maskManager.pushMask(this.mask,a),c.start());c.render(this);b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a);
c.stop();this._mask&&a.maskManager.popMask(this._mask,a);this._filters&&a.filterManager.popFilter();c.start()}else for(a.spriteBatch.render(this),b=0,e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a)}};c.Sprite.prototype._renderCanvas=function(a){if(!1!==this.visible&&0!==this.alpha){if(this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,a.context.globalCompositeOperation=c.blendModesCanvas[a.currentBlendMode]),this._mask&&a.maskManager.pushMask(this._mask,a.context),
this.texture.valid){a.context.globalAlpha=this.worldAlpha;a.roundPixels?a.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,0|this.worldTransform.tx,0|this.worldTransform.ty):a.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,this.worldTransform.tx,this.worldTransform.ty);a.smoothProperty&&a.scaleMode!==this.texture.baseTexture.scaleMode&&(a.scaleMode=this.texture.baseTexture.scaleMode,
a.context[a.smoothProperty]=a.scaleMode===c.scaleModes.LINEAR);var b=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,e=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=c.CanvasTinter.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,
this.texture.crop.height,b,e,this.texture.crop.width,this.texture.crop.height)):a.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,b,e,this.texture.crop.width,this.texture.crop.height)}b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderCanvas(a);this._mask&&a.maskManager.popMask(a.context)}};c.Sprite.fromFrame=function(a){var b=c.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache'+
this);return new c.Sprite(b)};c.Sprite.fromImage=function(a,b,e){a=c.Texture.fromImage(a,b,e);return new c.Sprite(a)};c.SpriteBatch=function(a){c.DisplayObjectContainer.call(this);this.textureThing=a;this.ready=!1};c.SpriteBatch.prototype=Object.create(c.DisplayObjectContainer.prototype);c.SpriteBatch.constructor=c.SpriteBatch;c.SpriteBatch.prototype.initWebGL=function(a){this.fastSpriteBatch=new c.WebGLFastSpriteBatch(a);this.ready=!0};c.SpriteBatch.prototype.updateTransform=function(){c.DisplayObject.prototype.updateTransform.call(this)};
c.SpriteBatch.prototype._renderWebGL=function(a){!this.visible||0>=this.alpha||!this.children.length||(this.ready||this.initWebGL(a.gl),a.spriteBatch.stop(),a.shaderManager.setShader(a.shaderManager.fastShader),this.fastSpriteBatch.begin(this,a),this.fastSpriteBatch.render(this),a.spriteBatch.start())};c.SpriteBatch.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;c.DisplayObject.prototype.updateTransform.call(this);for(var e=this.worldTransform,g=!0,d=0;d<this.children.length;d++){var f=
this.children[d];if(f.visible){var n=f.texture,h=n.frame;if(b.globalAlpha=this.worldAlpha*f.alpha,0===f.rotation%(2*Math.PI))g&&(b.setTransform(e.a,e.c,e.b,e.d,e.tx,e.ty),g=!1),b.drawImage(n.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width*f.scale.x+f.position.x+.5|0,f.anchor.y*-h.height*f.scale.y+f.position.y+.5|0,h.width*f.scale.x,h.height*f.scale.y);else{g||(g=!0);c.DisplayObject.prototype.updateTransform.call(f);var k=f.worldTransform;a.roundPixels?b.setTransform(k.a,k.c,k.b,k.d,
0|k.tx,0|k.ty):b.setTransform(k.a,k.c,k.b,k.d,k.tx,k.ty);b.drawImage(n.baseTexture.source,h.x,h.y,h.width,h.height,f.anchor.x*-h.width+.5|0,f.anchor.y*-h.height+.5|0,h.width,h.height)}}}};c.MovieClip=function(a){c.Sprite.call(this,a[0]);this.textures=a;this.animationSpeed=1;this.loop=!0;this.onComplete=null;this.currentFrame=0;this.playing=!1};c.MovieClip.prototype=Object.create(c.Sprite.prototype);c.MovieClip.prototype.constructor=c.MovieClip;Object.defineProperty(c.MovieClip.prototype,"totalFrames",
{get:function(){return this.textures.length}});c.MovieClip.prototype.stop=function(){this.playing=!1};c.MovieClip.prototype.play=function(){this.playing=!0};c.MovieClip.prototype.gotoAndStop=function(a){this.playing=!1;this.currentFrame=a;this.setTexture(this.textures[(this.currentFrame+.5|0)%this.textures.length])};c.MovieClip.prototype.gotoAndPlay=function(a){this.currentFrame=a;this.playing=!0};c.MovieClip.prototype.updateTransform=function(){if(c.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=
this.animationSpeed;var a=this.currentFrame+.5|0;this.currentFrame%=this.textures.length;this.loop||a<this.textures.length?this.setTexture(this.textures[a%this.textures.length]):a>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}};c.MovieClip.fromFrames=function(a){for(var b=[],e=0;e<a.length;e++)b.push(new c.Texture.fromFrame(a[e]));return new c.MovieClip(b)};c.MovieClip.fromImages=function(a){for(var b=[],e=0;e<a.length;e++)b.push(new c.Texture.fromImage(a[e]));
return new c.MovieClip(b)};c.FilterBlock=function(){this.renderable=this.visible=!0};c.Text=function(a,b){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");c.Sprite.call(this,c.Texture.fromCanvas(this.canvas));this.setText(a);this.setStyle(b)};c.Text.prototype=Object.create(c.Sprite.prototype);c.Text.prototype.constructor=c.Text;Object.defineProperty(c.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},
set:function(a){this.scale.x=a/this.texture.frame.width;this._width=a}});Object.defineProperty(c.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height;this._height=a}});c.Text.prototype.setStyle=function(a){a=a||{};a.font=a.font||"bold 20pt Arial";a.fill=a.fill||"black";a.align=a.align||"left";a.stroke=a.stroke||"black";a.strokeThickness=a.strokeThickness||0;a.wordWrap=
a.wordWrap||!1;a.wordWrapWidth=a.wordWrapWidth||100;a.wordWrapWidth=a.wordWrapWidth||100;a.dropShadow=a.dropShadow||!1;a.dropShadowAngle=a.dropShadowAngle||Math.PI/6;a.dropShadowDistance=a.dropShadowDistance||4;a.dropShadowColor=a.dropShadowColor||"black";this.style=a;this.dirty=!0};c.Text.prototype.setText=function(a){this.text=a.toString()||" ";this.dirty=!0};c.Text.prototype.updateText=function(){this.context.font=this.style.font;var a=this.text;this.style.wordWrap&&(a=this.wordWrap(this.text));
for(var a=a.split(/(?:\r\n|\r|\n)/),b=[],e=0,c=0;c<a.length;c++){var d=this.context.measureText(a[c]).width;b[c]=d;e=Math.max(e,d)}c=e+this.style.strokeThickness;this.style.dropShadow&&(c+=this.style.dropShadowDistance);this.canvas.width=c+this.context.lineWidth;d=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;c=d*a.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance);this.canvas.height=c;navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,
this.canvas.height);this.context.font=this.style.font;this.context.strokeStyle=this.style.stroke;this.context.lineWidth=this.style.strokeThickness;this.context.textBaseline="top";var f,n;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;for(var h=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,k=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,c=0;c<a.length;c++)f=this.style.strokeThickness/2,n=this.style.strokeThickness/2+c*d,"right"===
this.style.align?f+=e-b[c]:"center"===this.style.align&&(f+=(e-b[c])/2),this.style.fill&&this.context.fillText(a[c],f+h,n+k)}this.context.fillStyle=this.style.fill;for(c=0;c<a.length;c++)f=this.style.strokeThickness/2,n=this.style.strokeThickness/2+c*d,"right"===this.style.align?f+=e-b[c]:"center"===this.style.align&&(f+=(e-b[c])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(a[c],f,n),this.style.fill&&this.context.fillText(a[c],f,n);this.updateTexture()};c.Text.prototype.updateTexture=
function(){this.texture.baseTexture.width=this.canvas.width;this.texture.baseTexture.height=this.canvas.height;this.texture.crop.width=this.texture.frame.width=this.canvas.width;this.texture.crop.height=this.texture.frame.height=this.canvas.height;this._width=this.canvas.width;this._height=this.canvas.height;this.requiresUpdate=!0};c.Text.prototype._renderWebGL=function(a){this.requiresUpdate&&(this.requiresUpdate=!1,c.updateWebGLTexture(this.texture.baseTexture,a.gl));c.Sprite.prototype._renderWebGL.call(this,
a)};c.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);c.Sprite.prototype.updateTransform.call(this)};c.Text.prototype.determineFontHeight=function(a){var b=c.Text.heightCache[a];if(!b){var e=document.getElementsByTagName("body")[0],g=document.createElement("div"),b=document.createTextNode("M");g.appendChild(b);g.setAttribute("style",a+";position:absolute;top:0;left:0");e.appendChild(g);b=g.offsetHeight;c.Text.heightCache[a]=b;e.removeChild(g)}return b};c.Text.prototype.wordWrap=
function(a){var b="";a=a.split("\n");for(var e=0;e<a.length;e++){for(var c=this.style.wordWrapWidth,d=a[e].split(" "),f=0;f<d.length;f++){var n=this.context.measureText(d[f]).width,h=n+this.context.measureText(" ").width;0===f||h>c?(0<f&&(b+="\n"),b+=d[f],c=this.style.wordWrapWidth-n):(c-=h,b+=" "+d[f])}e<a.length-1&&(b+="\n")}return b};c.Text.prototype.destroy=function(a){this.canvas=this.context=null;this.texture.destroy(void 0===a?!0:a)};c.Text.heightCache={};c.BitmapText=function(a,b){c.DisplayObjectContainer.call(this);
this._pool=[];this.setText(a);this.setStyle(b);this.updateText();this.dirty=!1};c.BitmapText.prototype=Object.create(c.DisplayObjectContainer.prototype);c.BitmapText.prototype.constructor=c.BitmapText;c.BitmapText.prototype.setText=function(a){this.text=a||" ";this.dirty=!0};c.BitmapText.prototype.setStyle=function(a){a=a||{};a.align=a.align||"left";this.style=a;var b=a.font.split(" ");this.fontName=b[b.length-1];this.fontSize=2<=b.length?parseInt(b[b.length-2],10):c.BitmapText.fonts[this.fontName].size;
this.dirty=!0;this.tint=a.tint};c.BitmapText.prototype.updateText=function(){for(var a=c.BitmapText.fonts[this.fontName],b=new c.Point,e=null,g=[],d=0,f=[],n=0,h=this.fontSize/a.size,k=0;k<this.text.length;k++){var s=this.text.charCodeAt(k);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(k)))f.push(b.x),d=Math.max(d,b.x),n++,b.x=0,b.y+=a.lineHeight,e=null;else{var r=a.chars[s];r&&(e&&r[e]&&(b.x+=r.kerning[e]),g.push({texture:r.texture,line:n,charCode:s,position:new c.Point(b.x+r.xOffset,b.y+r.yOffset)}),
b.x+=r.xAdvance,e=s)}}f.push(b.x);d=Math.max(d,b.x);e=[];for(k=0;n>=k;k++)s=0,"right"===this.style.align?s=d-f[k]:"center"===this.style.align&&(s=(d-f[k])/2),e.push(s);n=this.children.length;f=g.length;s=this.tint||16777215;for(k=0;f>k;k++)(r=n>k?this.children[k]:this._pool.pop())?r.setTexture(g[k].texture):r=new c.Sprite(g[k].texture),r.position.x=(g[k].position.x+e[g[k].line])*h,r.position.y=g[k].position.y*h,r.scale.x=r.scale.y=h,r.tint=s,r.parent||this.addChild(r);for(;this.children.length>f;)g=
this.getChildAt(this.children.length-1),this._pool.push(g),this.removeChild(g);this.textWidth=d*h;this.textHeight=(b.y+a.lineHeight)*h};c.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1);c.DisplayObjectContainer.prototype.updateTransform.call(this)};c.BitmapText.fonts={};c.InteractionData=function(){this.global=new c.Point;this.originalEvent=this.target=null};c.InteractionData.prototype.getLocalPosition=function(a){var b=a.worldTransform;a=this.global;
var e=b.a,g=b.b,d=b.tx,f=b.c,n=b.d,b=b.ty,h=1/(e*n+g*-f);return new c.Point(n*h*a.x+-g*h*a.y+(b*g-d*n)*h,e*h*a.y+-f*h*a.x+(-b*e+d*f)*h)};c.InteractionData.prototype.constructor=c.InteractionData;c.InteractionManager=function(a){this.stage=a;this.mouse=new c.InteractionData;this.touchs={};this.tempPoint=new c.Point;this.mouseoverEnabled=!0;this.pool=[];this.interactiveItems=[];this.interactionDOMElement=null;this.onMouseMove=this.onMouseMove.bind(this);this.onMouseDown=this.onMouseDown.bind(this);
this.onMouseOut=this.onMouseOut.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this.mouseOut=!1};c.InteractionManager.prototype.constructor=c.InteractionManager;c.InteractionManager.prototype.collectInteractiveSprite=function(a,b){for(var e=a.children,c=e.length-1;0<=c;c--){var d=e[c];d._interactive?(b.interactiveChildren=
!0,this.interactiveItems.push(d),0<d.children.length&&this.collectInteractiveSprite(d,d)):(d.__iParent=null,0<d.children.length&&this.collectInteractiveSprite(d,b))}};c.InteractionManager.prototype.setTarget=function(a){this.target=a;null===this.interactionDOMElement&&this.setTargetDomElement(a.view)};c.InteractionManager.prototype.setTargetDomElement=function(a){this.removeEvents();window.navigator.msPointerEnabled&&(a.style["-ms-content-zooming"]="none",a.style["-ms-touch-action"]="none");this.interactionDOMElement=
a;a.addEventListener("mousemove",this.onMouseMove,!0);a.addEventListener("mousedown",this.onMouseDown,!0);a.addEventListener("mouseout",this.onMouseOut,!0);a.addEventListener("touchstart",this.onTouchStart,!0);a.addEventListener("touchend",this.onTouchEnd,!0);a.addEventListener("touchmove",this.onTouchMove,!0);window.addEventListener("mouseup",this.onMouseUp,!0)};c.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]=
"",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",
this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))};c.InteractionManager.prototype.update=function(){if(this.target){var a=Date.now(),b=a-this.last;if(b=b*c.INTERACTION_FREQUENCY/1E3,!(1>b)){this.last=a;a=0;this.dirty&&this.rebuildInteractiveGraph();for(var b=this.interactiveItems.length,e="inherit",g=!1,a=0;b>a;a++){var d=this.interactiveItems[a];d.__hit=this.hitTest(d,this.mouse);this.mouse.target=d;d.__hit&&!g?(d.buttonMode&&(e=d.defaultCursor),
d.interactiveChildren||(g=!0),d.__isOver||(d.mouseover&&d.mouseover(this.mouse),d.__isOver=!0)):d.__isOver&&(d.mouseout&&d.mouseout(this.mouse),d.__isOver=!1)}this.currentCursorStyle!==e&&(this.currentCursorStyle=e,this.interactionDOMElement.style.cursor=e)}}};c.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var a=this.interactiveItems.length,b=0;a>b;b++)this.interactiveItems[b].interactiveChildren=!1;this.interactiveItems=[];this.stage.interactive&&this.interactiveItems.push(this.stage);
this.collectInteractiveSprite(this.stage,this.stage)};c.InteractionManager.prototype.onMouseMove=function(a){this.dirty&&this.rebuildInteractiveGraph();this.mouse.originalEvent=a||window.event;var b=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=this.target.width/b.width*(a.clientX-b.left);this.mouse.global.y=this.target.height/b.height*(a.clientY-b.top);a=this.interactiveItems.length;for(b=0;a>b;b++){var e=this.interactiveItems[b];e.mousemove&&e.mousemove(this.mouse)}};c.InteractionManager.prototype.onMouseDown=
function(a){this.dirty&&this.rebuildInteractiveGraph();this.mouse.originalEvent=a||window.event;c.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();a=this.interactiveItems.length;for(var b=0;a>b;b++){var e=this.interactiveItems[b];if((e.mousedown||e.click)&&(e.__mouseIsDown=!0,e.__hit=this.hitTest(e,this.mouse),e.__hit&&(e.mousedown&&e.mousedown(this.mouse),e.__isDown=!0,!e.interactiveChildren)))break}};c.InteractionManager.prototype.onMouseOut=function(){this.dirty&&this.rebuildInteractiveGraph();
var a=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var b=0;a>b;b++){var e=this.interactiveItems[b];e.__isOver&&(this.mouse.target=e,e.mouseout&&e.mouseout(this.mouse),e.__isOver=!1)}this.mouseOut=!0;this.mouse.global.x=-1E4;this.mouse.global.y=-1E4};c.InteractionManager.prototype.onMouseUp=function(a){this.dirty&&this.rebuildInteractiveGraph();this.mouse.originalEvent=a||window.event;a=this.interactiveItems.length;for(var b=!1,e=0;a>e;e++){var c=this.interactiveItems[e];
c.__hit=this.hitTest(c,this.mouse);c.__hit&&!b?(c.mouseup&&c.mouseup(this.mouse),c.__isDown&&c.click&&c.click(this.mouse),c.interactiveChildren||(b=!0)):c.__isDown&&c.mouseupoutside&&c.mouseupoutside(this.mouse);c.__isDown=!1}};c.InteractionManager.prototype.hitTest=function(a,b){var e=b.global;if(!a.worldVisible)return!1;var g=a instanceof c.Sprite,d=a.worldTransform,f=d.a,n=d.b,h=d.tx,k=d.c,s=d.d,d=d.ty,r=1/(f*s+n*-k),n=s*r*e.x+-n*r*e.y+(d*n-h*s)*r,e=f*r*e.y+-k*r*e.x+(-d*f+h*k)*r;if(b.target=a,
a.hitArea&&a.hitArea.contains)return a.hitArea.contains(n,e)?(b.target=a,!0):!1;if(g){var x,g=a.texture.frame.width,f=a.texture.frame.height,h=-g*a.anchor.x;if(n>h&&h+g>n&&(x=-f*a.anchor.y,e>x&&x+f>e))return b.target=a,!0}x=a.children.length;for(g=0;x>g;g++)if(this.hitTest(a.children[g],b))return b.target=a,!0;return!1};c.InteractionManager.prototype.onTouchMove=function(a){this.dirty&&this.rebuildInteractiveGraph();for(var b,e=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,
d=0,d=0;d<c.length;d++){var f=c[d];b=this.touchs[f.identifier];b.originalEvent=a||window.event;b.global.x=this.target.width/e.width*(f.clientX-e.left);b.global.y=this.target.height/e.height*(f.clientY-e.top);navigator.isCocoonJS&&(b.global.x=f.clientX,b.global.y=f.clientY);for(var n=0;n<this.interactiveItems.length;n++){var h=this.interactiveItems[n];h.touchmove&&h.__touchData&&h.__touchData[f.identifier]&&h.touchmove(b)}}};c.InteractionManager.prototype.onTouchStart=function(a){this.dirty&&this.rebuildInteractiveGraph();
var b=this.interactionDOMElement.getBoundingClientRect();c.AUTO_PREVENT_DEFAULT&&a.preventDefault();for(var e=a.changedTouches,g=0;g<e.length;g++){var d=e[g],f=this.pool.pop();f||(f=new c.InteractionData);f.originalEvent=a||window.event;this.touchs[d.identifier]=f;f.global.x=this.target.width/b.width*(d.clientX-b.left);f.global.y=this.target.height/b.height*(d.clientY-b.top);navigator.isCocoonJS&&(f.global.x=d.clientX,f.global.y=d.clientY);for(var n=this.interactiveItems.length,h=0;n>h;h++){var k=
this.interactiveItems[h];if((k.touchstart||k.tap)&&(k.__hit=this.hitTest(k,f),k.__hit&&(k.touchstart&&k.touchstart(f),k.__isDown=!0,k.__touchData=k.__touchData||{},k.__touchData[d.identifier]=f,!k.interactiveChildren)))break}}};c.InteractionManager.prototype.onTouchEnd=function(a){this.dirty&&this.rebuildInteractiveGraph();for(var b=this.interactionDOMElement.getBoundingClientRect(),e=a.changedTouches,c=0;c<e.length;c++){var d=e[c],f=this.touchs[d.identifier],n=!1;f.global.x=this.target.width/b.width*
(d.clientX-b.left);f.global.y=this.target.height/b.height*(d.clientY-b.top);navigator.isCocoonJS&&(f.global.x=d.clientX,f.global.y=d.clientY);for(var h=this.interactiveItems.length,k=0;h>k;k++){var s=this.interactiveItems[k];s.__touchData&&s.__touchData[d.identifier]&&(s.__hit=this.hitTest(s,s.__touchData[d.identifier]),f.originalEvent=a||window.event,(s.touchend||s.tap)&&(s.__hit&&!n?(s.touchend&&s.touchend(f),s.__isDown&&s.tap&&s.tap(f),s.interactiveChildren||(n=!0)):s.__isDown&&s.touchendoutside&&
s.touchendoutside(f),s.__isDown=!1),s.__touchData[d.identifier]=null)}this.pool.push(f);this.touchs[d.identifier]=null}};c.Stage=function(a){c.DisplayObjectContainer.call(this);this.worldTransform=new c.Matrix;this.interactive=!0;this.interactionManager=new c.InteractionManager(this);this.dirty=!0;this.stage=this;this.stage.hitArea=new c.Rectangle(0,0,1E5,1E5);this.setBackgroundColor(a)};c.Stage.prototype=Object.create(c.DisplayObjectContainer.prototype);c.Stage.prototype.constructor=c.Stage;c.Stage.prototype.setInteractionDelegate=
function(a){this.interactionManager.setTargetDomElement(a)};c.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0);this.interactive&&this.interactionManager.update()};c.Stage.prototype.setBackgroundColor=function(a){this.backgroundColor=a||0;this.backgroundColorSplit=c.hex2rgb(this.backgroundColor);a=this.backgroundColor.toString(16);a="000000".substr(0,
6-a.length)+a;this.backgroundColorString="#"+a};c.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var d=0,f=["ms","moz","webkit","o"],k=0;k<f.length&&!window.requestAnimationFrame;++k)window.requestAnimationFrame=window[f[k]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[f[k]+"CancelAnimationFrame"]||window[f[k]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),
e=Math.max(0,16-(b-d)),c=window.setTimeout(function(){a(b+e)},e);return d=b+e,c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;c.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]};c.rgb2hex=function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]};"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var a=Array.prototype.slice;return function(b){function e(){var f=
d.concat(a.call(arguments));c.apply(this instanceof e?this:b,f)}var c=this,d=a.call(arguments,1);if("function"!=typeof c)throw new TypeError;return e.prototype=function n(a){return a&&(n.prototype=a),this instanceof n?void 0:new n}(c.prototype),e}}());c.AjaxRequest=function(){var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var b=0;b<a.length;b++)try{return new window.ActiveXObject(a[b])}catch(e){}};
c.canUseNewCanvasBlendModes=function(){var a=document.createElement("canvas");a.width=1;a.height=1;a=a.getContext("2d");return a.fillStyle="#000",a.fillRect(0,0,1,1),a.globalCompositeOperation="multiply",a.fillStyle="#fff",a.fillRect(0,0,1,1),0===a.getImageData(0,0,1,1).data[0]};c.getNextPowerOfTwo=function(a){if(0<a&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b};c.EventTarget=function(){var a={};this.addEventListener=this.on=function(b,e){void 0===a[b]&&(a[b]=[]);-1===a[b].indexOf(e)&&a[b].unshift(e)};
this.dispatchEvent=this.emit=function(b){if(a[b.type]&&a[b.type].length)for(var e=a[b.type].length-1;0<=e;e--)a[b.type][e](b)};this.removeEventListener=this.off=function(b,e){if(void 0!==a[b]){var c=a[b].indexOf(e);-1!==c&&a[b].splice(c,1)}};this.removeAllEventListeners=function(b){(b=a[b])&&(b.length=0)}};c.autoDetectRenderer=function(a,b,e,d,m){a||(a=800);b||(b=600);var f;try{var n=document.createElement("canvas");f=!!window.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"))}catch(h){f=
!1}return f?new c.WebGLRenderer(a,b,e,d,m):new c.CanvasRenderer(a,b,e,d)};c.autoDetectRecommendedRenderer=function(a,b,e,d,m){a||(a=800);b||(b=600);var f;try{var n=document.createElement("canvas");f=!!window.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"))}catch(h){f=!1}n=/Android/i.test(navigator.userAgent);return f&&!n?new c.WebGLRenderer(a,b,e,d,m):new c.CanvasRenderer(a,b,e,d)};c.PolyK={};c.PolyK.Triangulate=function(a){var b=!0,e=a.length>>1;if(3>e)return[];
for(var d=[],m=[],f=0;e>f;f++)m.push(f);for(var f=0,n=e;3<n;){var h=m[(f+0)%n],k=m[(f+1)%n],s=m[(f+2)%n],r=a[2*h],x=a[2*h+1],l=a[2*k],u=a[2*k+1],v=a[2*s],p=a[2*s+1],y=!1;if(c.PolyK._convex(r,x,l,u,v,p,b))for(var y=!0,A=0;n>A;A++){var z=m[A];if(z!==h&&z!==k&&z!==s&&c.PolyK._PointInTriangle(a[2*z],a[2*z+1],r,x,l,u,v,p)){y=!1;break}}if(y)d.push(h,k,s),m.splice((f+1)%n,1),n--,f=0;else if(f++>3*n){if(!b)return window.console.log("PIXI Warning: shape too complex to fill"),[];d=[];m=[];for(f=0;e>f;f++)m.push(f);
f=0;n=e;b=!1}}return d.push(m[0],m[1],m[2]),d};c.PolyK._PointInTriangle=function(a,b,e,c,d,f,n,h){n-=e;h-=c;d-=e;f-=c;a-=e;e=b-c;b=n*n+h*h;c=n*d+h*f;n=n*a+h*e;h=d*d+f*f;d=d*a+f*e;f=1/(b*h-c*c);h=(h*n-c*d)*f;n=(b*d-c*n)*f;return 0<=h&&0<=n&&1>h+n};c.PolyK._convex=function(a,b,e,c,d,f,n){return 0<=(b-c)*(d-e)+(e-a)*(f-c)===n};c.initDefaultShaders=function(){};c.CompileVertexShader=function(a,b){return c._CompileShader(a,b,a.VERTEX_SHADER)};c.CompileFragmentShader=function(a,b){return c._CompileShader(a,
b,a.FRAGMENT_SHADER)};c._CompileShader=function(a,b,e){b=b.join("\n");e=a.createShader(e);return a.shaderSource(e,b),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)?e:(window.console.log(a.getShaderInfoLog(e)),null)};c.compileProgram=function(a,b,e){e=c.CompileFragmentShader(a,e);b=c.CompileVertexShader(a,b);var d=a.createProgram();return a.attachShader(d,b),a.attachShader(d,e),a.linkProgram(d),a.getProgramParameter(d,a.LINK_STATUS)||window.console.log("Could not initialise shaders"),
d};c.PixiShader=function(a){this._UID=c._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"];this.textureCount=0;this.attributes=[];this.init()};c.PixiShader.prototype.init=function(){var a=this.gl,b=c.compileProgram(a,this.vertexSrc||c.PixiShader.defaultVertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=
a.getUniformLocation(b,"uSampler");this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.dimensions=a.getUniformLocation(b,"dimensions");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.colorAttribute=a.getAttribLocation(b,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];
for(var e in this.uniforms)this.uniforms[e].uniformLocation=a.getUniformLocation(b,e);this.initUniforms();this.program=b};c.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var a,b=this.gl,e;for(e in this.uniforms){a=this.uniforms[e];var c=a.type;"sampler2D"===c?(a._init=!1,null!==a.value&&this.initSampler2D(a)):"mat2"===c||"mat3"===c||"mat4"===c?(a.glMatrix=!0,a.glValueLength=1,"mat2"===c?a.glFunc=b.uniformMatrix2fv:"mat3"===c?a.glFunc=b.uniformMatrix3fv:"mat4"===c&&(a.glFunc=b.uniformMatrix4fv)):
(a.glFunc=b["uniform"+c],a.glValueLength="2f"===c||"2i"===c?2:"3f"===c||"3i"===c?3:"4f"===c||"4i"===c?4:1)}};c.PixiShader.prototype.initSampler2D=function(a){if(a.value&&a.value.baseTexture&&a.value.baseTexture.hasLoaded){var b=this.gl;if(b.activeTexture(b["TEXTURE"+this.textureCount]),b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]),a.textureData){var e=a.textureData,c=e.magFilter?e.magFilter:b.LINEAR,d=e.minFilter?e.minFilter:b.LINEAR,f=e.wrapS?e.wrapS:b.CLAMP_TO_EDGE,n=e.wrapT?
e.wrapT:b.CLAMP_TO_EDGE,h=e.luminance?b.LUMINANCE:b.RGBA;(e.repeat&&(f=b.REPEAT,n=b.REPEAT),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!!e.flipY),e.width)?b.texImage2D(b.TEXTURE_2D,0,h,e.width?e.width:512,e.height?e.height:2,e.border?e.border:0,h,b.UNSIGNED_BYTE,null):b.texImage2D(b.TEXTURE_2D,0,h,b.RGBA,b.UNSIGNED_BYTE,a.value.baseTexture.source);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,f);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,n)}b.uniform1i(a.uniformLocation,this.textureCount);a._init=!0;this.textureCount++}};c.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var a,b=this.gl,e;for(e in this.uniforms)a=this.uniforms[e],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,
a.value.y,a.value.z):4===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w):"sampler2D"===a.type&&(a._init?(b.activeTexture(b["TEXTURE"+this.textureCount]),b.bindTexture(b.TEXTURE_2D,a.value.baseTexture._glTextures[b.id]||c.createWebGLTexture(a.value.baseTexture,b)),b.uniform1i(a.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(a))};c.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=
this.uniforms=null};c.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;",
"   vColor = vec4(color * aColor.x, aColor.x);","}"];c.PixiFastShader=function(a){this._UID=c._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;",
"attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);",
"   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"];this.textureCount=0;this.init()};c.PixiFastShader.prototype.init=function(){var a=this.gl,b=c.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=a.getUniformLocation(b,"uSampler");this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.dimensions=a.getUniformLocation(b,"dimensions");this.uMatrix=a.getUniformLocation(b,"uMatrix");this.aVertexPosition=
a.getAttribLocation(b,"aVertexPosition");this.aPositionCoord=a.getAttribLocation(b,"aPositionCoord");this.aScale=a.getAttribLocation(b,"aScale");this.aRotation=a.getAttribLocation(b,"aRotation");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.colorAttribute=a.getAttribLocation(b,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute];this.program=b};c.PixiFastShader.prototype.destroy=
function(){this.gl.deleteProgram(this.program);this.attributes=this.gl=this.uniforms=null};c.StripShader=function(a){this._UID=c._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;",
"uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"];this.init()};c.StripShader.prototype.init=function(){var a=this.gl,b=c.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=a.getUniformLocation(b,
"uSampler");this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.colorAttribute=a.getAttribLocation(b,"aColor");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.attributes=[this.aVertexPosition,this.aTextureCoord];this.translationMatrix=a.getUniformLocation(b,"translationMatrix");this.alpha=a.getUniformLocation(b,"alpha");this.program=b};c.PrimitiveShader=
function(a){this._UID=c._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
"   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"];this.init()};c.PrimitiveShader.prototype.init=function(){var a=this.gl,b=c.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.tintColor=a.getUniformLocation(b,"tint");this.aVertexPosition=
a.getAttribLocation(b,"aVertexPosition");this.colorAttribute=a.getAttribLocation(b,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=a.getUniformLocation(b,"translationMatrix");this.alpha=a.getUniformLocation(b,"alpha");this.program=b};c.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attribute=this.gl=this.uniforms=null};c.ComplexPrimitiveShader=function(a){this._UID=c._UID++;this.gl=a;this.program=null;this.fragmentSrc=
["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);",
"   vColor = vec4(color * alpha * tint, alpha);","}"];this.init()};c.ComplexPrimitiveShader.prototype.init=function(){var a=this.gl,b=c.compileProgram(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b);this.projectionVector=a.getUniformLocation(b,"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.tintColor=a.getUniformLocation(b,"tint");this.color=a.getUniformLocation(b,"color");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.attributes=[this.aVertexPosition,
this.colorAttribute];this.translationMatrix=a.getUniformLocation(b,"translationMatrix");this.alpha=a.getUniformLocation(b,"alpha");this.program=b};c.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.attribute=this.gl=this.uniforms=null};c.WebGLGraphics=function(){};c.WebGLGraphics.renderGraphics=function(a,b){var e,d=b.gl,m=b.projection,f=b.offset,h=b.shaderManager.primitiveShader;a.dirty&&c.WebGLGraphics.updateGraphics(a,d);for(var k=a._webGL[d.id],t=0;t<
k.data.length;t++)1===k.data[t].mode?(e=k.data[t],b.stencilManager.pushStencil(a,e,b),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(e.indices.length-4)),b.stencilManager.popStencil(a,e,b),this.last=e.mode):(e=k.data[t],b.shaderManager.setShader(h),h=b.shaderManager.primitiveShader,d.uniformMatrix3fv(h.translationMatrix,!1,a.worldTransform.toArray(!0)),d.uniform2f(h.projectionVector,m.x,-m.y),d.uniform2f(h.offsetVector,-f.x,-f.y),d.uniform3fv(h.tintColor,c.hex2rgb(a.tint)),d.uniform1f(h.alpha,
a.worldAlpha),d.bindBuffer(d.ARRAY_BUFFER,e.buffer),d.vertexAttribPointer(h.aVertexPosition,2,d.FLOAT,!1,24,0),d.vertexAttribPointer(h.colorAttribute,4,d.FLOAT,!1,24,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,e.indexBuffer),d.drawElements(d.TRIANGLE_STRIP,e.indices.length,d.UNSIGNED_SHORT,0))};c.WebGLGraphics.updateGraphics=function(a,b){var e=a._webGL[b.id];e||(e=a._webGL[b.id]={lastIndex:0,data:[],gl:b});a.dirty=!1;var d;if(a.clearDirty){a.clearDirty=!1;for(d=0;d<e.data.length;d++){var m=e.data[d];
m.reset();c.WebGLGraphics.graphicsDataPool.push(m)}e.data=[];e.lastIndex=0}var f;for(d=e.lastIndex;d<a.graphicsData.length;d++)m=a.graphicsData[d],m.type===c.Graphics.POLY?(m.fill&&6<m.points.length&&(10<m.points.length?(f=c.WebGLGraphics.switchMode(e,1),c.WebGLGraphics.buildComplexPoly(m,f)):(f=c.WebGLGraphics.switchMode(e,0),c.WebGLGraphics.buildPoly(m,f))),0<m.lineWidth&&(f=c.WebGLGraphics.switchMode(e,0),c.WebGLGraphics.buildLine(m,f))):(f=c.WebGLGraphics.switchMode(e,0),m.type===c.Graphics.RECT?
c.WebGLGraphics.buildRectangle(m,f):m.type===c.Graphics.CIRC||m.type===c.Graphics.ELIP?c.WebGLGraphics.buildCircle(m,f):m.type===c.Graphics.RREC&&c.WebGLGraphics.buildRoundedRectangle(m,f)),e.lastIndex++;for(d=0;d<e.data.length;d++)f=e.data[d],f.dirty&&f.upload()};c.WebGLGraphics.switchMode=function(a,b){var e;return a.data.length?(e=a.data[a.data.length-1],(e.mode!==b||1===b)&&(e=c.WebGLGraphics.graphicsDataPool.pop()||new c.WebGLGraphicsData(a.gl),e.mode=b,a.data.push(e))):(e=c.WebGLGraphics.graphicsDataPool.pop()||
new c.WebGLGraphicsData(a.gl),e.mode=b,a.data.push(e)),e.dirty=!0,e};c.WebGLGraphics.buildRectangle=function(a,b){var e=a.points,d=e[0],m=e[1],f=e[2],e=e[3];if(a.fill){var h=c.hex2rgb(a.fillColor),k=a.fillAlpha,t=h[0]*k,s=h[1]*k,h=h[2]*k,r=b.points,x=b.indices,l=r.length/6;r.push(d,m);r.push(t,s,h,k);r.push(d+f,m);r.push(t,s,h,k);r.push(d,m+e);r.push(t,s,h,k);r.push(d+f,m+e);r.push(t,s,h,k);x.push(l,l,l+1,l+2,l+3,l+3)}a.lineWidth&&(k=a.points,a.points=[d,m,d+f,m,d+f,m+e,d,m+e,d,m],c.WebGLGraphics.buildLine(a,
b),a.points=k)};c.WebGLGraphics.buildRoundedRectangle=function(a,b){var e=a.points,d=e[0],f=e[1],h=e[2],n=e[3],k=e[4],e=[];if(e.push(d,f+k),e=e.concat(c.WebGLGraphics.quadraticBezierCurve(d,f+n-k,d,f+n,d+k,f+n)),e=e.concat(c.WebGLGraphics.quadraticBezierCurve(d+h-k,f+n,d+h,f+n,d+h,f+n-k)),e=e.concat(c.WebGLGraphics.quadraticBezierCurve(d+h,f+k,d+h,f,d+h-k,f)),e=e.concat(c.WebGLGraphics.quadraticBezierCurve(d+k,f,d,f,d,f+k)),a.fill){for(var n=c.hex2rgb(a.fillColor),d=a.fillAlpha,f=n[0]*d,h=n[1]*d,
n=n[2]*d,k=b.points,t=b.indices,s=k.length/6,r=c.PolyK.Triangulate(e),x=0,x=0;x<r.length;x+=3)t.push(r[x]+s),t.push(r[x]+s),t.push(r[x+1]+s),t.push(r[x+2]+s),t.push(r[x+2]+s);for(x=0;x<e.length;x++)k.push(e[x],e[++x],f,h,n,d)}a.lineWidth&&(d=a.points,a.points=e,c.WebGLGraphics.buildLine(a,b),a.points=d)};c.WebGLGraphics.quadraticBezierCurve=function(a,b,e,c,d,f){for(var h,k,t,s,r=[],x=0,l=0;20>=l;l++)x=l/20,h=a+(e-a)*x,k=b+(c-b)*x,t=e+(d-e)*x,s=c+(f-c)*x,h+=(t-h)*x,k+=(s-k)*x,r.push(h,k);return r};
c.WebGLGraphics.buildCircle=function(a,b){var e=a.points,d=e[0],f=e[1],h=e[2],e=e[3],n=2*Math.PI/40,k=0;if(a.fill){var k=c.hex2rgb(a.fillColor),t=a.fillAlpha,s=k[0]*t,r=k[1]*t,x=k[2]*t,l=b.points,u=b.indices,v=l.length/6;u.push(v);for(k=0;41>k;k++)l.push(d,f,s,r,x,t),l.push(d+Math.sin(n*k)*h,f+Math.cos(n*k)*e,s,r,x,t),u.push(v++,v++);u.push(v-1)}if(a.lineWidth){t=a.points;a.points=[];for(k=0;41>k;k++)a.points.push(d+Math.sin(n*k)*h,f+Math.cos(n*k)*e);c.WebGLGraphics.buildLine(a,b);a.points=t}};c.WebGLGraphics.buildLine=
function(a,b){var e=0,d=a.points;if(0!==d.length){if(a.lineWidth%2)for(e=0;e<d.length;e++)d[e]+=.5;var f=new c.Point(d[0],d[1]),h=new c.Point(d[d.length-2],d[d.length-1]);if(f.x===h.x&&f.y===h.y){d=d.slice();d.pop();d.pop();var h=new c.Point(d[d.length-2],d[d.length-1]),n=h.x+.5*(f.x-h.x),f=h.y+.5*(f.y-h.y);d.unshift(n,f);d.push(n,f)}var k,t,s,r,x,l,u,v,p,y,A,z,D,C,H,B,L,G,M,n=b.points,f=b.indices,h=d.length/2,E=d.length,K=n.length/6,J=a.lineWidth/2,e=c.hex2rgb(a.lineColor),O=a.lineAlpha,Q=e[0]*O,
T=e[1]*O,R=e[2]*O;s=d[0];r=d[1];x=d[2];l=d[3];p=-(r-l);y=s-x;M=Math.sqrt(p*p+y*y);p=p/M*J;y=y/M*J;n.push(s-p,r-y,Q,T,R,O);n.push(s+p,r+y,Q,T,R,O);for(e=1;h-1>e;e++)s=d[2*(e-1)],r=d[2*(e-1)+1],x=d[2*e],l=d[2*e+1],u=d[2*(e+1)],v=d[2*(e+1)+1],p=-(r-l),y=s-x,M=Math.sqrt(p*p+y*y),p/=M,y/=M,p*=J,y*=J,A=-(l-v),z=x-u,M=Math.sqrt(A*A+z*z),A/=M,z/=M,A*=J,z*=J,H=-y+r-(-y+l),B=-p+x-(-p+s),s=(-p+s)*(-y+l)-(-p+x)*(-y+r),r=-z+v-(-z+l),L=-A+x-(-A+u),u=(-A+u)*(-z+l)-(-A+x)*(-z+v),v=H*L-r*B,.1>Math.abs(v)?(n.push(x-
p,l-y,Q,T,R,O),n.push(x+p,l+y,Q,T,R,O)):(k=(B*u-L*s)/v,t=(r*s-H*u)/v,G=(k-x)*(k-x)+(t-l)+(t-l),19600<G?(D=p-A,C=y-z,M=Math.sqrt(D*D+C*C),D/=M,C/=M,D*=J,C*=J,n.push(x-D,l-C),n.push(Q,T,R,O),n.push(x+D,l+C),n.push(Q,T,R,O),n.push(x-D,l-C),n.push(Q,T,R,O),E++):(n.push(k,t),n.push(Q,T,R,O),n.push(x-(k-x),l-(t-l)),n.push(Q,T,R,O)));s=d[2*(h-2)];r=d[2*(h-2)+1];x=d[2*(h-1)];l=d[2*(h-1)+1];p=-(r-l);y=s-x;M=Math.sqrt(p*p+y*y);p/=M;y/=M;p*=J;y*=J;n.push(x-p,l-y);n.push(Q,T,R,O);n.push(x+p,l+y);n.push(Q,T,R,
O);f.push(K);for(e=0;E>e;e++)f.push(K++);f.push(K-1)}};c.WebGLGraphics.buildComplexPoly=function(a,b){var e=a.points.slice();if(!(6>e.length)){var d=b.indices;b.points=e;b.alpha=a.fillAlpha;b.color=c.hex2rgb(a.fillColor);for(var f,h,n=1/0,k=-1/0,t=1/0,s=-1/0,r=0;r<e.length;r+=2)f=e[r],h=e[r+1],n=n>f?f:n,k=f>k?f:k,t=t>h?h:t,s=h>s?h:s;e.push(n,t,k,t,k,s,n,s);e=e.length/2;for(r=0;e>r;r++)d.push(r)}};c.WebGLGraphics.buildPoly=function(a,b){var e=a.points;if(!(6>e.length)){for(var d=b.points,f=b.indices,
h=e.length/2,n=c.hex2rgb(a.fillColor),k=a.fillAlpha,t=n[0]*k,s=n[1]*k,n=n[2]*k,r=c.PolyK.Triangulate(e),x=d.length/6,l=0,l=0;l<r.length;l+=3)f.push(r[l]+x),f.push(r[l]+x),f.push(r[l+1]+x),f.push(r[l+2]+x),f.push(r[l+2]+x);for(l=0;h>l;l++)d.push(e[2*l],e[2*l+1],t,s,n,k)}};c.WebGLGraphics.graphicsDataPool=[];c.WebGLGraphicsData=function(a){this.gl=a;this.color=[0,0,0];this.points=[];this.indices=[];this.lastIndex=0;this.buffer=a.createBuffer();this.indexBuffer=a.createBuffer();this.alpha=this.mode=
1;this.dirty=!0};c.WebGLGraphicsData.prototype.reset=function(){this.points=[];this.indices=[];this.lastIndex=0};c.WebGLGraphicsData.prototype.upload=function(){var a=this.gl;this.glPoints=new Float32Array(this.points);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW);this.glIndicies=new Uint16Array(this.indices);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndicies,a.STATIC_DRAW);this.dirty=!1};c.glContexts=
[];c.WebGLRenderer=function(a,b,e,d,f,h){c.defaultRenderer||(c.sayHello("webGL"),c.defaultRenderer=this);this.type=c.WEBGL_RENDERER;this.transparent=!!d;this.preserveDrawingBuffer=h;this.width=a||800;this.height=b||600;this.view=e||document.createElement("canvas");this.view.width=this.width;this.view.height=this.height;this.contextLost=this.handleContextLost.bind(this);this.contextRestoredLost=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.contextLost,!1);
this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1);this.options={alpha:this.transparent,antialias:!!f,premultipliedAlpha:!!d,stencil:!0,preserveDrawingBuffer:h};var n=null;if(["experimental-webgl","webgl"].forEach(function(a){try{n=n||this.view.getContext(a,this.options)}catch(b){}},this),!n)throw Error("This browser does not support webGL. Try using the canvas renderer"+this);this.gl=n;this.glContextId=n.id=c.WebGLRenderer.glContextId++;c.glContexts[this.glContextId]=
n;c.blendModesWebGL||(c.blendModesWebGL=[],c.blendModesWebGL[c.blendModes.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.ADD]=[n.SRC_ALPHA,n.DST_ALPHA],c.blendModesWebGL[c.blendModes.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.SCREEN]=[n.SRC_ALPHA,n.ONE],c.blendModesWebGL[c.blendModes.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],
c.blendModesWebGL[c.blendModes.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],
c.blendModesWebGL[c.blendModes.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],c.blendModesWebGL[c.blendModes.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA]);this.projection=new c.Point;this.projection.x=this.width/2;this.projection.y=-this.height/2;this.offset=new c.Point(0,0);this.resize(this.width,this.height);this.contextLost=!1;this.shaderManager=new c.WebGLShaderManager(n);this.spriteBatch=new c.WebGLSpriteBatch(n);this.maskManager=new c.WebGLMaskManager(n);
this.filterManager=new c.WebGLFilterManager(n,this.transparent);this.stencilManager=new c.WebGLStencilManager(n);this.blendModeManager=new c.WebGLBlendModeManager(n);this.renderSession={};this.renderSession.gl=this.gl;this.renderSession.drawCount=0;this.renderSession.shaderManager=this.shaderManager;this.renderSession.maskManager=this.maskManager;this.renderSession.filterManager=this.filterManager;this.renderSession.blendModeManager=this.blendModeManager;this.renderSession.spriteBatch=this.spriteBatch;
this.renderSession.stencilManager=this.stencilManager;this.renderSession.renderer=this;n.useProgram(this.shaderManager.defaultShader.program);n.disable(n.DEPTH_TEST);n.disable(n.CULL_FACE);n.enable(n.BLEND);n.colorMask(!0,!0,!0,this.transparent)};c.WebGLRenderer.prototype.constructor=c.WebGLRenderer;c.WebGLRenderer.prototype.render=function(a){if(!this.contextLost){this.__stage!==a&&(a.interactive&&a.interactionManager.removeEvents(),this.__stage=a);c.WebGLRenderer.updateTextures();a.updateTransform();
a._interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)));var b=this.gl;b.viewport(0,0,this.width,this.height);b.bindFramebuffer(b.FRAMEBUFFER,null);this.transparent?b.clearColor(0,0,0,0):b.clearColor(a.backgroundColorSplit[0],a.backgroundColorSplit[1],a.backgroundColorSplit[2],1);b.clear(b.COLOR_BUFFER_BIT);this.renderDisplayObject(a,this.projection);a.interactive?a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)):
a._interactiveEventsAdded&&(a._interactiveEventsAdded=!1,a.interactionManager.setTarget(this))}};c.WebGLRenderer.prototype.renderDisplayObject=function(a,b,e){this.renderSession.blendModeManager.setBlendMode(c.blendModes.NORMAL);this.renderSession.drawCount=0;this.renderSession.currentBlendMode=9999;this.renderSession.projection=b;this.renderSession.offset=this.offset;this.spriteBatch.begin(this.renderSession);this.filterManager.begin(this.renderSession,e);a._renderWebGL(this.renderSession);this.spriteBatch.end()};
c.WebGLRenderer.updateTextures=function(){for(var a=0,a=0;a<c.Texture.frameUpdates.length;a++)c.WebGLRenderer.updateTextureFrame(c.Texture.frameUpdates[a]);for(a=0;a<c.texturesToDestroy.length;a++)c.WebGLRenderer.destroyTexture(c.texturesToDestroy[a]);c.texturesToUpdate.length=0;c.texturesToDestroy.length=0;c.Texture.frameUpdates.length=0};c.WebGLRenderer.destroyTexture=function(a){for(var b=a._glTextures.length-1;0<=b;b--){var e=a._glTextures[b],d=c.glContexts[b];d&&e&&d.deleteTexture(e)}a._glTextures.length=
0};c.WebGLRenderer.updateTextureFrame=function(a){a._updateWebGLuvs()};c.WebGLRenderer.prototype.resize=function(a,b){this.width=a;this.height=b;this.view.width=a;this.view.height=b;this.gl.viewport(0,0,this.width,this.height);this.projection.x=this.width/2;this.projection.y=-this.height/2};c.createWebGLTexture=function(a,b){return a.hasLoaded&&(a._glTextures[b.id]=b.createTexture(),b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),
b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===c.scaleModes.LINEAR?b.LINEAR:b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===c.scaleModes.LINEAR?b.LINEAR:b.NEAREST),a._powerOf2?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
b.CLAMP_TO_EDGE)),b.bindTexture(b.TEXTURE_2D,null),a._dirty[b.id]=!1),a._glTextures[b.id]};c.updateWebGLTexture=function(a,b){a._glTextures[b.id]&&(b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===c.scaleModes.LINEAR?b.LINEAR:b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===
c.scaleModes.LINEAR?b.LINEAR:b.NEAREST),a._powerOf2?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),a._dirty[b.id]=!1)};c.WebGLRenderer.prototype.handleContextLost=function(a){a.preventDefault();this.contextLost=!0};c.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",
this.options)}catch(a){try{this.gl=this.view.getContext("webgl",this.options)}catch(b){throw Error(" This browser does not support webGL. Try using the canvas renderer"+this);}}var e=this.gl;e.id=c.WebGLRenderer.glContextId++;this.shaderManager.setContext(e);this.spriteBatch.setContext(e);this.primitiveBatch.setContext(e);this.maskManager.setContext(e);this.filterManager.setContext(e);this.renderSession.gl=this.gl;e.disable(e.DEPTH_TEST);e.disable(e.CULL_FACE);e.enable(e.BLEND);e.colorMask(!0,!0,
!0,this.transparent);this.gl.viewport(0,0,this.width,this.height);for(var d in c.TextureCache)c.TextureCache[d].baseTexture._glTextures=[];this.contextLost=!1};c.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost);this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost);this.offset=this.projection=c.glContexts[this.glContextId]=null;this.shaderManager.destroy();this.spriteBatch.destroy();this.primitiveBatch.destroy();
this.maskManager.destroy();this.filterManager.destroy();this.renderSession=this.gl=this.filterManager=this.maskManager=this.spriteBatch=this.shaderManager=null};c.WebGLRenderer.glContextId=0;c.WebGLBlendModeManager=function(a){this.gl=a;this.currentBlendMode=99999};c.WebGLBlendModeManager.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;a=c.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(a[0],a[1]),!0};c.WebGLBlendModeManager.prototype.destroy=
function(){this.gl=null};c.WebGLMaskManager=function(a){this.maskStack=[];this.maskPosition=0;this.setContext(a);this.reverse=!1;this.count=0};c.WebGLMaskManager.prototype.setContext=function(a){this.gl=a};c.WebGLMaskManager.prototype.pushMask=function(a,b){var e=b.gl;a.dirty&&c.WebGLGraphics.updateGraphics(a,e);a._webGL[e.id].data.length&&b.stencilManager.pushStencil(a,a._webGL[e.id].data[0],b)};c.WebGLMaskManager.prototype.popMask=function(a,b){b.stencilManager.popStencil(a,a._webGL[this.gl.id].data[0],
b)};c.WebGLMaskManager.prototype.destroy=function(){this.gl=this.maskStack=null};c.WebGLStencilManager=function(a){this.stencilStack=[];this.setContext(a);this.reverse=!0;this.count=0};c.WebGLStencilManager.prototype.setContext=function(a){this.gl=a};c.WebGLStencilManager.prototype.pushStencil=function(a,b,e){var c=this.gl;this.bindGraphics(a,b,e);0===this.stencilStack.length&&(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0);this.stencilStack.push(b);a=this.count;
c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,0,255);c.stencilOp(c.KEEP,c.KEEP,c.INVERT);1===b.mode?(c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),this.reverse?(c.stencilFunc(c.EQUAL,255-a,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,a,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-4)),this.reverse?c.stencilFunc(c.EQUAL,255-(a+1),255):c.stencilFunc(c.EQUAL,a+1,255),this.reverse=!this.reverse):
(this.reverse?(c.stencilFunc(c.EQUAL,a,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,255-a,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),this.reverse?c.stencilFunc(c.EQUAL,a+1,255):c.stencilFunc(c.EQUAL,255-(a+1),255));c.colorMask(!0,!0,!0,!0);c.stencilOp(c.KEEP,c.KEEP,c.KEEP);this.count++};c.WebGLStencilManager.prototype.bindGraphics=function(a,b,e){this._currentGraphics=a;var d,f=this.gl,h=e.projection,n=e.offset;1===
b.mode?(d=e.shaderManager.complexPrimativeShader,e.shaderManager.setShader(d),f.uniformMatrix3fv(d.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(d.projectionVector,h.x,-h.y),f.uniform2f(d.offsetVector,-n.x,-n.y),f.uniform3fv(d.tintColor,c.hex2rgb(a.tint)),f.uniform3fv(d.color,b.color),f.uniform1f(d.alpha,a.worldAlpha*b.alpha),f.bindBuffer(f.ARRAY_BUFFER,b.buffer),f.vertexAttribPointer(d.aVertexPosition,2,f.FLOAT,!1,8,0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,b.indexBuffer)):(d=e.shaderManager.primitiveShader,
e.shaderManager.setShader(d),f.uniformMatrix3fv(d.translationMatrix,!1,a.worldTransform.toArray(!0)),f.uniform2f(d.projectionVector,h.x,-h.y),f.uniform2f(d.offsetVector,-n.x,-n.y),f.uniform3fv(d.tintColor,c.hex2rgb(a.tint)),f.uniform1f(d.alpha,a.worldAlpha),f.bindBuffer(f.ARRAY_BUFFER,b.buffer),f.vertexAttribPointer(d.aVertexPosition,2,f.FLOAT,!1,24,0),f.vertexAttribPointer(d.colorAttribute,4,f.FLOAT,!1,24,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,b.indexBuffer))};c.WebGLStencilManager.prototype.popStencil=
function(a,b,e){var c=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)c.disable(c.STENCIL_TEST);else{var d=this.count;this.bindGraphics(a,b,e);c.colorMask(!1,!1,!1,!1);1===b.mode?(this.reverse=!this.reverse,this.reverse?(c.stencilFunc(c.EQUAL,255-(d+1),255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,d+1,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-4)),c.stencilFunc(c.ALWAYS,0,255),c.stencilOp(c.KEEP,
c.KEEP,c.INVERT),c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),this.reverse?c.stencilFunc(c.EQUAL,d,255):c.stencilFunc(c.EQUAL,255-d,255)):(this.reverse?(c.stencilFunc(c.EQUAL,d+1,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,255-(d+1),255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),this.reverse?c.stencilFunc(c.EQUAL,d,255):c.stencilFunc(c.EQUAL,255-d,255));c.colorMask(!0,!0,!0,!0);c.stencilOp(c.KEEP,
c.KEEP,c.KEEP)}};c.WebGLStencilManager.prototype.destroy=function(){this.gl=this.maskStack=null};c.WebGLShaderManager=function(a){this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.shaderMap=[];for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.setContext(a)};c.WebGLShaderManager.prototype.setContext=function(a){this.gl=a;this.primitiveShader=new c.PrimitiveShader(a);this.complexPrimativeShader=new c.ComplexPrimitiveShader(a);this.defaultShader=new c.PixiShader(a);this.fastShader=
new c.PixiFastShader(a);this.stripShader=new c.StripShader(a);this.setShader(this.defaultShader)};c.WebGLShaderManager.prototype.setAttribs=function(a){var b;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(b=0;b<a.length;b++)this.tempAttribState[a[b]]=!0;a=this.gl;for(b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.tempAttribState[b]?a.enableVertexAttribArray(b):a.disableVertexAttribArray(b))};
c.WebGLShaderManager.prototype.setShader=function(a){return this._currentId===a._UID?!1:(this._currentId=a._UID,this.currentShader=a,this.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)};c.WebGLShaderManager.prototype.destroy=function(){this.tempAttribState=this.attribState=null;this.primitiveShader.destroy();this.defaultShader.destroy();this.fastShader.destroy();this.stripShader.destroy();this.gl=null};c.WebGLSpriteBatch=function(a){this.vertSize=6;this.size=2E3;var b=6*this.size;this.vertices=
new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(b);for(var e=this.lastIndexCount=0,c=0;b>e;e+=6,c+=4)this.indices[e+0]=c+0,this.indices[e+1]=c+1,this.indices[e+2]=c+2,this.indices[e+3]=c+0,this.indices[e+4]=c+2,this.indices[e+5]=c+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.setContext(a);this.dirty=!0;this.textures=[];this.blendModes=[]};c.WebGLSpriteBatch.prototype.setContext=function(a){this.gl=a;this.vertexBuffer=a.createBuffer();this.indexBuffer=
a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);this.currentBlendMode=99999};c.WebGLSpriteBatch.prototype.begin=function(a){this.renderSession=a;this.shader=this.renderSession.shaderManager.defaultShader;this.start()};c.WebGLSpriteBatch.prototype.end=function(){this.flush()};c.WebGLSpriteBatch.prototype.render=
function(a){var b=a.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture);var e=b._uvs;if(e){var c,d,f,h,k=a.worldAlpha,t=a.tint,s=this.vertices;d=a.anchor.x;h=a.anchor.y;b.trim?(f=b.trim,d=f.x-d*f.width,c=d+b.crop.width,h=f.y-h*f.height,f=h+b.crop.height):(c=b.frame.width*(1-d),d=b.frame.width*-d,f=b.frame.height*(1-h),h=b.frame.height*-h);var b=4*this.currentBatchSize*this.vertSize,r=a.worldTransform,x=r.a,l=r.c,u=r.b,v=r.d,p=r.tx,r=r.ty;s[b++]=x*d+u*h+p;
s[b++]=v*h+l*d+r;s[b++]=e.x0;s[b++]=e.y0;s[b++]=k;s[b++]=t;s[b++]=x*c+u*h+p;s[b++]=v*h+l*c+r;s[b++]=e.x1;s[b++]=e.y1;s[b++]=k;s[b++]=t;s[b++]=x*c+u*f+p;s[b++]=v*f+l*c+r;s[b++]=e.x2;s[b++]=e.y2;s[b++]=k;s[b++]=t;s[b++]=x*d+u*f+p;s[b++]=v*f+l*d+r;s[b++]=e.x3;s[b++]=e.y3;s[b++]=k;s[b++]=t;this.textures[this.currentBatchSize]=a.texture.baseTexture;this.blendModes[this.currentBatchSize]=a.blendMode;this.currentBatchSize++}};c.WebGLSpriteBatch.prototype.renderTilingSprite=function(a){var b=a.tilingTexture;
this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=b.baseTexture);a._uvs||(a._uvs=new c.TextureUvs);var e=a._uvs;a.tilePosition.x%=b.baseTexture.width*a.tileScaleOffset.x;a.tilePosition.y%=b.baseTexture.height*a.tileScaleOffset.y;var d=a.tilePosition.x/(b.baseTexture.width*a.tileScaleOffset.x),f=a.tilePosition.y/(b.baseTexture.height*a.tileScaleOffset.y),h=a.width/b.baseTexture.width/(a.tileScale.x*a.tileScaleOffset.x),n=a.height/b.baseTexture.height/(a.tileScale.y*a.tileScaleOffset.y);
e.x0=0-d;e.y0=0-f;e.x1=1*h-d;e.y1=0-f;e.x2=1*h-d;e.y2=1*n-f;e.x3=0-d;e.y3=1*n-f;var d=a.worldAlpha,f=a.tint,h=this.vertices,k=a.width,t=a.height,s=a.anchor.x,r=a.anchor.y,n=k*(1-s),k=k*-s,s=t*(1-r),t=t*-r,r=4*this.currentBatchSize*this.vertSize,x=a.worldTransform,l=x.a,u=x.c,v=x.b,p=x.d,y=x.tx,x=x.ty;h[r++]=l*k+v*t+y;h[r++]=p*t+u*k+x;h[r++]=e.x0;h[r++]=e.y0;h[r++]=d;h[r++]=f;h[r++]=l*n+v*t+y;h[r++]=p*t+u*n+x;h[r++]=e.x1;h[r++]=e.y1;h[r++]=d;h[r++]=f;h[r++]=l*n+v*s+y;h[r++]=p*s+u*n+x;h[r++]=e.x2;h[r++]=
e.y2;h[r++]=d;h[r++]=f;h[r++]=l*k+v*s+y;h[r++]=p*s+u*k+x;h[r++]=e.x3;h[r++]=e.y3;h[r++]=d;h[r++]=f;this.textures[this.currentBatchSize]=b.baseTexture;this.blendModes[this.currentBatchSize]=a.blendMode;this.currentBatchSize++};c.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a=this.gl;if(this.renderSession.shaderManager.setShader(this.renderSession.shaderManager.defaultShader),this.dirty){this.dirty=!1;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);
a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var b=this.renderSession.projection;a.uniform2f(this.shader.projectionVector,b.x,b.y);b=4*this.vertSize;a.vertexAttribPointer(this.shader.aVertexPosition,2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this.shader.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this.shader.colorAttribute,2,a.FLOAT,!1,b,16)}this.currentBatchSize>.5*this.size?a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices):(b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize),
a.bufferSubData(a.ARRAY_BUFFER,0,b));for(var e=0,c=0,d=null,f=this.renderSession.blendModeManager.currentBlendMode,h=0,k=this.currentBatchSize;k>h;h++)a=this.textures[h],b=this.blendModes[h],d===a&&f===b||(this.renderBatch(d,e,c),c=h,e=0,d=a,f=b,this.renderSession.blendModeManager.setBlendMode(f)),e++;this.renderBatch(d,e,c);this.currentBatchSize=0}};c.WebGLSpriteBatch.prototype.renderBatch=function(a,b,e){if(0!==b){var d=this.gl;d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]||c.createWebGLTexture(a,
d));a._dirty[d.id]&&c.updateWebGLTexture(this.currentBaseTexture,d);d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,12*e);this.renderSession.drawCount++}};c.WebGLSpriteBatch.prototype.stop=function(){this.flush()};c.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0};c.WebGLSpriteBatch.prototype.destroy=function(){this.indices=this.vertices=null;this.gl.deleteBuffer(this.vertexBuffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=this.currentBaseTexture=null};c.WebGLFastSpriteBatch=function(a){this.vertSize=
10;this.size=this.maxSize=6E3;var b=6*this.maxSize;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(b);this.indexBuffer=this.vertexBuffer=null;for(var e=this.lastIndexCount=0,c=0;b>e;e+=6,c+=4)this.indices[e+0]=c+0,this.indices[e+1]=c+1,this.indices[e+2]=c+2,this.indices[e+3]=c+0,this.indices[e+4]=c+2,this.indices[e+5]=c+3;this.drawing=!1;this.currentBatchSize=0;this.currentBaseTexture=null;this.currentBlendMode=0;this.matrix=this.shader=this.renderSession=null;
this.setContext(a)};c.WebGLFastSpriteBatch.prototype.setContext=function(a){this.gl=a;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW)};c.WebGLFastSpriteBatch.prototype.begin=function(a,b){this.renderSession=b;this.shader=this.renderSession.shaderManager.fastShader;
this.matrix=a.worldTransform.toArray(!0);this.start()};c.WebGLFastSpriteBatch.prototype.end=function(){this.flush()};c.WebGLFastSpriteBatch.prototype.render=function(a){a=a.children;var b=a[0];if(b.texture._uvs){this.currentBaseTexture=b.texture.baseTexture;b.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(b.blendMode));for(var b=0,e=a.length;e>b;b++)this.renderSprite(a[b]);this.flush()}};c.WebGLFastSpriteBatch.prototype.renderSprite=
function(a){if(a.visible&&(a.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=a.texture.baseTexture,a.texture._uvs))){var b,e,c,d,f,h,k=this.vertices;(b=a.texture._uvs,a.texture.trim)?(d=a.texture.trim,c=d.x-a.anchor.x*d.width,e=c+a.texture.crop.width,f=d.y-a.anchor.y*d.height,d=f+a.texture.crop.height):(e=a.texture.frame.width*(1-a.anchor.x),c=a.texture.frame.width*-a.anchor.x,d=a.texture.frame.height*(1-a.anchor.y),f=a.texture.frame.height*-a.anchor.y);h=4*this.currentBatchSize*
this.vertSize;k[h++]=c;k[h++]=f;k[h++]=a.position.x;k[h++]=a.position.y;k[h++]=a.scale.x;k[h++]=a.scale.y;k[h++]=a.rotation;k[h++]=b.x0;k[h++]=b.y1;k[h++]=a.alpha;k[h++]=e;k[h++]=f;k[h++]=a.position.x;k[h++]=a.position.y;k[h++]=a.scale.x;k[h++]=a.scale.y;k[h++]=a.rotation;k[h++]=b.x1;k[h++]=b.y1;k[h++]=a.alpha;k[h++]=e;k[h++]=d;k[h++]=a.position.x;k[h++]=a.position.y;k[h++]=a.scale.x;k[h++]=a.scale.y;k[h++]=a.rotation;k[h++]=b.x2;k[h++]=b.y2;k[h++]=a.alpha;k[h++]=c;k[h++]=d;k[h++]=a.position.x;k[h++]=
a.position.y;k[h++]=a.scale.x;k[h++]=a.scale.y;k[h++]=a.rotation;k[h++]=b.x3;k[h++]=b.y3;k[h++]=a.alpha;this.currentBatchSize++;this.currentBatchSize>=this.size&&this.flush()}};c.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var a=this.gl;if(this.currentBaseTexture._glTextures[a.id]||c.createWebGLTexture(this.currentBaseTexture,a),a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture._glTextures[a.id]),this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,
0,this.vertices);else{var b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,b)}a.drawElements(a.TRIANGLES,6*this.currentBatchSize,a.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++}};c.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()};c.WebGLFastSpriteBatch.prototype.start=function(){var a=this.gl;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);
var b=this.renderSession.projection;a.uniform2f(this.shader.projectionVector,b.x,b.y);a.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);b=4*this.vertSize;a.vertexAttribPointer(this.shader.aVertexPosition,2,a.FLOAT,!1,b,0);a.vertexAttribPointer(this.shader.aPositionCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(this.shader.aScale,2,a.FLOAT,!1,b,16);a.vertexAttribPointer(this.shader.aRotation,1,a.FLOAT,!1,b,24);a.vertexAttribPointer(this.shader.aTextureCoord,2,a.FLOAT,!1,b,28);a.vertexAttribPointer(this.shader.colorAttribute,
1,a.FLOAT,!1,b,36)};c.WebGLFilterManager=function(a,b){this.transparent=b;this.filterStack=[];this.offsetY=this.offsetX=0;this.setContext(a)};c.WebGLFilterManager.prototype.setContext=function(a){this.gl=a;this.texturePool=[];this.initShaderBuffers()};c.WebGLFilterManager.prototype.begin=function(a,b){this.renderSession=a;this.defaultShader=a.shaderManager.defaultShader;var e=this.renderSession.projection;this.width=2*e.x;this.height=2*-e.y;this.buffer=b};c.WebGLFilterManager.prototype.pushFilter=
function(a){var b=this.gl,e=this.renderSession.projection,d=this.renderSession.offset;a._filterArea=a.target.filterArea||a.target.getBounds();this.filterStack.push(a);var f=a.filterPasses[0];this.offsetX+=a._filterArea.x;this.offsetY+=a._filterArea.y;var h=this.texturePool.pop();h?h.resize(this.width,this.height):h=new c.FilterTexture(this.gl,this.width,this.height);b.bindTexture(b.TEXTURE_2D,h.texture);var n=a._filterArea,f=f.padding;n.x-=f;n.y-=f;n.width+=2*f;n.height+=2*f;0>n.x&&(n.x=0);n.width>
this.width&&(n.width=this.width);0>n.y&&(n.y=0);n.height>this.height&&(n.height=this.height);b.bindFramebuffer(b.FRAMEBUFFER,h.frameBuffer);b.viewport(0,0,n.width,n.height);e.x=n.width/2;e.y=-n.height/2;d.x=-n.x;d.y=-n.y;this.renderSession.shaderManager.setShader(this.defaultShader);b.uniform2f(this.defaultShader.projectionVector,n.width/2,-n.height/2);b.uniform2f(this.defaultShader.offsetVector,-n.x,-n.y);b.colorMask(!0,!0,!0,!0);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a._glFilterTexture=
h};c.WebGLFilterManager.prototype.popFilter=function(){var a=this.gl,b=this.filterStack.pop(),e=b._filterArea,d=b._glFilterTexture,f=this.renderSession.projection,h=this.renderSession.offset;if(1<b.filterPasses.length){a.viewport(0,0,e.width,e.height);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=0;this.vertexArray[1]=e.height;this.vertexArray[2]=e.width;this.vertexArray[3]=e.height;this.vertexArray[4]=0;this.vertexArray[5]=0;this.vertexArray[6]=e.width;this.vertexArray[7]=0;
a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray);a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=e.width/this.width;this.uvArray[5]=e.height/this.height;this.uvArray[6]=e.width/this.width;this.uvArray[7]=e.height/this.height;a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);var n=this.texturePool.pop();n||(n=new c.FilterTexture(this.gl,this.width,this.height));n.resize(this.width,this.height);a.bindFramebuffer(a.FRAMEBUFFER,n.frameBuffer);a.clear(a.COLOR_BUFFER_BIT);a.disable(a.BLEND);for(var k=
0;k<b.filterPasses.length-1;k++){var t=b.filterPasses[k];a.bindFramebuffer(a.FRAMEBUFFER,n.frameBuffer);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,d.texture);this.applyFilterPass(t,e,e.width,e.height);t=d;d=n;n=t}a.enable(a.BLEND);this.texturePool.push(n)}n=b.filterPasses[b.filterPasses.length-1];this.offsetX-=e.x;this.offsetY-=e.y;var k=this.width,t=this.height,s=0,r=0,x=this.buffer;0===this.filterStack.length?a.colorMask(!0,!0,!0,!0):(x=this.filterStack[this.filterStack.length-1],e=
x._filterArea,k=e.width,t=e.height,s=e.x,r=e.y,x=x._glFilterTexture.frameBuffer);f.x=k/2;f.y=-t/2;h.x=s;h.y=r;e=b._filterArea;f=e.x-s;h=e.y-r;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=f;this.vertexArray[1]=h+e.height;this.vertexArray[2]=f+e.width;this.vertexArray[3]=h+e.height;this.vertexArray[4]=f;this.vertexArray[5]=h;this.vertexArray[6]=f+e.width;this.vertexArray[7]=h;a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray);a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=
e.width/this.width;this.uvArray[5]=e.height/this.height;this.uvArray[6]=e.width/this.width;this.uvArray[7]=e.height/this.height;a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);a.viewport(0,0,k,t);a.bindFramebuffer(a.FRAMEBUFFER,x);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,d.texture);this.applyFilterPass(n,e,k,t);this.renderSession.shaderManager.setShader(this.defaultShader);a.uniform2f(this.defaultShader.projectionVector,k/2,-t/2);a.uniform2f(this.defaultShader.offsetVector,-s,-r);this.texturePool.push(d);
b._glFilterTexture=null};c.WebGLFilterManager.prototype.applyFilterPass=function(a,b,e,d){b=this.gl;var f=a.shaders[b.id];f||(f=new c.PixiShader(b),f.fragmentSrc=a.fragmentSrc,f.uniforms=a.uniforms,f.init(),a.shaders[b.id]=f);this.renderSession.shaderManager.setShader(f);b.uniform2f(f.projectionVector,e/2,-d/2);b.uniform2f(f.offsetVector,0,0);a.uniforms.dimensions&&(a.uniforms.dimensions.value[0]=this.width,a.uniforms.dimensions.value[1]=this.height,a.uniforms.dimensions.value[2]=this.vertexArray[0],
a.uniforms.dimensions.value[3]=this.vertexArray[5]);f.syncUniforms();b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.vertexAttribPointer(f.aVertexPosition,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.uvBuffer);b.vertexAttribPointer(f.aTextureCoord,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.colorBuffer);b.vertexAttribPointer(f.colorAttribute,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0);this.renderSession.drawCount++};
c.WebGLFilterManager.prototype.initShaderBuffers=function(){var a=this.gl;this.vertexBuffer=a.createBuffer();this.uvBuffer=a.createBuffer();this.colorBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW);this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]);a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer);a.bufferData(a.ARRAY_BUFFER,this.uvArray,
a.STATIC_DRAW);this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]);a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer);a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)};c.WebGLFilterManager.prototype.destroy=function(){var a=this.gl;this.filterStack=null;for(var b=this.offsetY=this.offsetX=0;b<this.texturePool.length;b++)this.texturePool[b].destroy();
this.texturePool=null;a.deleteBuffer(this.vertexBuffer);a.deleteBuffer(this.uvBuffer);a.deleteBuffer(this.colorBuffer);a.deleteBuffer(this.indexBuffer)};c.FilterTexture=function(a,b,e,d){this.gl=a;this.frameBuffer=a.createFramebuffer();this.texture=a.createTexture();d=d||c.scaleModes.DEFAULT;a.bindTexture(a.TEXTURE_2D,this.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d===c.scaleModes.LINEAR?a.LINEAR:a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d===c.scaleModes.LINEAR?
a.LINEAR:a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0);this.renderBuffer=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,this.renderBuffer);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,
this.renderBuffer);this.resize(b,e)};c.FilterTexture.prototype.clear=function(){var a=this.gl;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)};c.FilterTexture.prototype.resize=function(a,b){if(this.width!==a||this.height!==b){this.width=a;this.height=b;var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,b,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,a,b)}};c.FilterTexture.prototype.destroy=
function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer);a.deleteTexture(this.texture);this.texture=this.frameBuffer=null};c.CanvasMaskManager=function(){};c.CanvasMaskManager.prototype.pushMask=function(a,b){b.save();var e=a.alpha,d=a.worldTransform;b.setTransform(d.a,d.c,d.b,d.d,d.tx,d.ty);c.CanvasGraphics.renderGraphicsMask(a,b);b.clip();a.worldAlpha=e};c.CanvasMaskManager.prototype.popMask=function(a){a.restore()};c.CanvasTinter=function(){};c.CanvasTinter.getTintedTexture=function(a,b){var e=
a.texture;b=c.CanvasTinter.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(e.tintCache=e.tintCache||{},e.tintCache[d])return e.tintCache[d];var f=c.CanvasTinter.canvas||document.createElement("canvas");if(c.CanvasTinter.tintMethod(e,b,f),c.CanvasTinter.convertTintToImage){var h=new Image;h.src=f.toDataURL();e.tintCache[d]=h}else e.tintCache[d]=f,c.CanvasTinter.canvas=null;return f};c.CanvasTinter.tintWithMultiply=function(a,b,e){var c=e.getContext("2d"),d=a.frame;e.width=d.width;
e.height=d.height;c.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6);c.fillRect(0,0,d.width,d.height);c.globalCompositeOperation="multiply";c.drawImage(a.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height);c.globalCompositeOperation="destination-atop";c.drawImage(a.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height)};c.CanvasTinter.tintWithOverlay=function(a,b,e){var c=e.getContext("2d"),d=a.frame;e.width=d.width;e.height=d.height;c.globalCompositeOperation="copy";
c.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6);c.fillRect(0,0,d.width,d.height);c.globalCompositeOperation="destination-atop";c.drawImage(a.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height)};c.CanvasTinter.tintWithPerPixel=function(a,b,e){var d=e.getContext("2d"),f=a.frame;e.width=f.width;e.height=f.height;d.globalCompositeOperation="copy";d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);e=c.hex2rgb(b);a=e[0];b=e[1];e=e[2];for(var f=d.getImageData(0,
0,f.width,f.height),h=f.data,n=0;n<h.length;n+=4)h[n+0]*=a,h[n+1]*=b,h[n+2]*=e;d.putImageData(f,0,0)};c.CanvasTinter.roundColor=function(a){var b=c.CanvasTinter.cacheStepsPerColorChannel;a=c.hex2rgb(a);return a[0]=Math.min(255,a[0]/b*b),a[1]=Math.min(255,a[1]/b*b),a[2]=Math.min(255,a[2]/b*b),c.rgb2hex(a)};c.CanvasTinter.cacheStepsPerColorChannel=8;c.CanvasTinter.convertTintToImage=!1;c.CanvasTinter.canUseMultiply=c.canUseNewCanvasBlendModes();c.CanvasTinter.tintMethod=c.CanvasTinter.canUseMultiply?
c.CanvasTinter.tintWithMultiply:c.CanvasTinter.tintWithPerPixel;c.CanvasRenderer=function(a,b,e,d){c.defaultRenderer||(c.sayHello("Canvas"),c.defaultRenderer=this);this.type=c.CANVAS_RENDERER;this.clearBeforeRender=!0;this.transparent=!!d;c.blendModesCanvas||(c.blendModesCanvas=[],c.canUseNewCanvasBlendModes()?(c.blendModesCanvas[c.blendModes.NORMAL]="source-over",c.blendModesCanvas[c.blendModes.ADD]="lighter",c.blendModesCanvas[c.blendModes.MULTIPLY]="multiply",c.blendModesCanvas[c.blendModes.SCREEN]=
"screen",c.blendModesCanvas[c.blendModes.OVERLAY]="overlay",c.blendModesCanvas[c.blendModes.DARKEN]="darken",c.blendModesCanvas[c.blendModes.LIGHTEN]="lighten",c.blendModesCanvas[c.blendModes.COLOR_DODGE]="color-dodge",c.blendModesCanvas[c.blendModes.COLOR_BURN]="color-burn",c.blendModesCanvas[c.blendModes.HARD_LIGHT]="hard-light",c.blendModesCanvas[c.blendModes.SOFT_LIGHT]="soft-light",c.blendModesCanvas[c.blendModes.DIFFERENCE]="difference",c.blendModesCanvas[c.blendModes.EXCLUSION]="exclusion",
c.blendModesCanvas[c.blendModes.HUE]="hue",c.blendModesCanvas[c.blendModes.SATURATION]="saturation",c.blendModesCanvas[c.blendModes.COLOR]="color",c.blendModesCanvas[c.blendModes.LUMINOSITY]="luminosity"):(c.blendModesCanvas[c.blendModes.NORMAL]="source-over",c.blendModesCanvas[c.blendModes.ADD]="lighter",c.blendModesCanvas[c.blendModes.MULTIPLY]="source-over",c.blendModesCanvas[c.blendModes.SCREEN]="source-over",c.blendModesCanvas[c.blendModes.OVERLAY]="source-over",c.blendModesCanvas[c.blendModes.DARKEN]=
"source-over",c.blendModesCanvas[c.blendModes.LIGHTEN]="source-over",c.blendModesCanvas[c.blendModes.COLOR_DODGE]="source-over",c.blendModesCanvas[c.blendModes.COLOR_BURN]="source-over",c.blendModesCanvas[c.blendModes.HARD_LIGHT]="source-over",c.blendModesCanvas[c.blendModes.SOFT_LIGHT]="source-over",c.blendModesCanvas[c.blendModes.DIFFERENCE]="source-over",c.blendModesCanvas[c.blendModes.EXCLUSION]="source-over",c.blendModesCanvas[c.blendModes.HUE]="source-over",c.blendModesCanvas[c.blendModes.SATURATION]=
"source-over",c.blendModesCanvas[c.blendModes.COLOR]="source-over",c.blendModesCanvas[c.blendModes.LUMINOSITY]="source-over"));this.width=a||800;this.height=b||600;this.view=e||document.createElement("canvas");this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=!0;this.view.width=this.width;this.view.height=this.height;this.count=0;this.maskManager=new c.CanvasMaskManager;this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,
roundPixels:!1};"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")};c.CanvasRenderer.prototype.constructor=c.CanvasRenderer;c.CanvasRenderer.prototype.render=
function(a){c.texturesToUpdate.length=0;c.texturesToDestroy.length=0;a.updateTransform();this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear());!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=a.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height);this.renderDisplayObject(a);
a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this)));0<c.Texture.frameUpdates.length&&(c.Texture.frameUpdates.length=0)};c.CanvasRenderer.prototype.resize=function(a,b){this.width=a;this.height=b;this.view.width=a;this.view.height=b};c.CanvasRenderer.prototype.renderDisplayObject=function(a,b){this.renderSession.context=b||this.context;a._renderCanvas(this.renderSession)};c.CanvasRenderer.prototype.renderStripFlat=function(a){var b=this.context;
a=a.verticies;var e=a.length/2;this.count++;b.beginPath();for(var c=1;e-2>c;c++){var d=2*c,f=a[d+2],h=a[d+4],k=a[d+3],t=a[d+5];b.moveTo(a[d],a[d+1]);b.lineTo(f,k);b.lineTo(h,t)}b.fillStyle="#FF0000";b.fill();b.closePath()};c.CanvasRenderer.prototype.renderStrip=function(a){var b=this.context,e=a.verticies,c=a.uvs,d=e.length/2;this.count++;for(var f=1;d-2>f;f++){var h=2*f,k=e[h],t=e[h+2],s=e[h+4],r=e[h+1],x=e[h+3],l=e[h+5],u=c[h]*a.texture.width,v=c[h+2]*a.texture.width,p=c[h+4]*a.texture.width,y=
c[h+1]*a.texture.height,A=c[h+3]*a.texture.height,h=c[h+5]*a.texture.height;b.save();b.beginPath();b.moveTo(k,r);b.lineTo(t,x);b.lineTo(s,l);b.closePath();b.clip();var z=u*A+y*p+v*h-A*p-y*v-u*h;b.transform((k*A+y*s+t*h-A*s-y*t-k*h)/z,(r*A+y*l+x*h-A*l-y*x-r*h)/z,(u*t+k*p+v*s-t*p-k*v-u*s)/z,(u*x+r*p+v*l-x*p-r*v-u*l)/z,(u*A*s+y*t*p+k*v*h-k*A*p-y*v*s-u*t*h)/z,(u*A*l+y*x*p+r*v*h-r*A*p-y*v*l-u*x*h)/z);b.drawImage(a.texture.baseTexture.source,0,0);b.restore()}};c.CanvasBuffer=function(a,b){this.width=a;
this.height=b;this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=a;this.canvas.height=b};c.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};c.CanvasBuffer.prototype.resize=function(a,b){this.width=this.canvas.width=a;this.height=this.canvas.height=b};c.CanvasGraphics=function(){};c.CanvasGraphics.renderGraphics=function(a,b){for(var e=a.worldAlpha,d=0;d<a.graphicsData.length;d++){var f=a.graphicsData[d],
h=f.points;if(b.strokeStyle="#"+("00000"+(0|f.lineColor).toString(16)).substr(-6),b.lineWidth=f.lineWidth,f.type===c.Graphics.POLY){b.beginPath();b.moveTo(h[0],h[1]);for(var n=1;n<h.length/2;n++)b.lineTo(h[2*n],h[2*n+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath();f.fill&&(b.globalAlpha=f.fillAlpha*e,b.fillStyle="#"+("00000"+(0|f.fillColor).toString(16)).substr(-6),b.fill());f.lineWidth&&(b.globalAlpha=f.lineAlpha*e,b.stroke())}else if(f.type===c.Graphics.RECT)(f.fillColor||0===f.fillColor)&&
(b.globalAlpha=f.fillAlpha*e,b.fillStyle="#"+("00000"+(0|f.fillColor).toString(16)).substr(-6),b.fillRect(h[0],h[1],h[2],h[3])),f.lineWidth&&(b.globalAlpha=f.lineAlpha*e,b.strokeRect(h[0],h[1],h[2],h[3]));else if(f.type===c.Graphics.CIRC)b.beginPath(),b.arc(h[0],h[1],h[2],0,2*Math.PI),b.closePath(),f.fill&&(b.globalAlpha=f.fillAlpha*e,b.fillStyle="#"+("00000"+(0|f.fillColor).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*e,b.stroke());else if(f.type===c.Graphics.ELIP){var k=
f.points,t=2*k[2],s=2*k[3],n=k[0]-t/2,k=k[1]-s/2;b.beginPath();var r=t/2*.5522848,h=s/2*.5522848,x=n+t,l=k+s,t=n+t/2,s=k+s/2;b.moveTo(n,s);b.bezierCurveTo(n,s-h,t-r,k,t,k);b.bezierCurveTo(t+r,k,x,s-h,x,s);b.bezierCurveTo(x,s+h,t+r,l,t,l);b.bezierCurveTo(t-r,l,n,s+h,n,s);b.closePath();f.fill&&(b.globalAlpha=f.fillAlpha*e,b.fillStyle="#"+("00000"+(0|f.fillColor).toString(16)).substr(-6),b.fill());f.lineWidth&&(b.globalAlpha=f.lineAlpha*e,b.stroke())}else f.type===c.Graphics.RREC&&(n=h[0],s=h[1],k=h[2],
r=h[3],h=h[4],x=Math.min(k,r)/2|0,h=h>x?x:h,b.beginPath(),b.moveTo(n,s+h),b.lineTo(n,s+r-h),b.quadraticCurveTo(n,s+r,n+h,s+r),b.lineTo(n+k-h,s+r),b.quadraticCurveTo(n+k,s+r,n+k,s+r-h),b.lineTo(n+k,s+h),b.quadraticCurveTo(n+k,s,n+k-h,s),b.lineTo(n+h,s),b.quadraticCurveTo(n,s,n,s+h),b.closePath(),(f.fillColor||0===f.fillColor)&&(b.globalAlpha=f.fillAlpha*e,b.fillStyle="#"+("00000"+(0|f.fillColor).toString(16)).substr(-6),b.fill()),f.lineWidth&&(b.globalAlpha=f.lineAlpha*e,b.stroke()))}};c.CanvasGraphics.renderGraphicsMask=
function(a,b){var e=a.graphicsData.length;if(0!==e)for(1<e&&window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"),e=0;1>e;e++){var d=a.graphicsData[e],f=d.points;if(d.type===c.Graphics.POLY){b.beginPath();b.moveTo(f[0],f[1]);for(d=1;d<f.length/2;d++)b.lineTo(f[2*d],f[2*d+1]);f[0]===f[f.length-2]&&f[1]===f[f.length-1]&&b.closePath()}else if(d.type===c.Graphics.RECT)b.beginPath(),b.rect(f[0],f[1],f[2],f[3]),b.closePath();else if(d.type===c.Graphics.CIRC)b.beginPath(),
b.arc(f[0],f[1],f[2],0,2*Math.PI),b.closePath();else if(d.type===c.Graphics.ELIP){var h=d.points,n=2*h[2],d=2*h[3],f=h[0]-n/2,h=h[1]-d/2;b.beginPath();var k=n/2*.5522848,t=d/2*.5522848,s=f+n,r=h+d,n=f+n/2,d=h+d/2;b.moveTo(f,d);b.bezierCurveTo(f,d-t,n-k,h,n,h);b.bezierCurveTo(n+k,h,s,d-t,s,d);b.bezierCurveTo(s,d+t,n+k,r,n,r);b.bezierCurveTo(n-k,r,f,d+t,f,d);b.closePath()}else d.type===c.Graphics.RREC&&(d=f[0],h=f[1],k=f[2],t=f[3],f=f[4],s=Math.min(k,t)/2|0,f=f>s?s:f,b.beginPath(),b.moveTo(d,h+f),b.lineTo(d,
h+t-f),b.quadraticCurveTo(d,h+t,d+f,h+t),b.lineTo(d+k-f,h+t),b.quadraticCurveTo(d+k,h+t,d+k,h+t-f),b.lineTo(d+k,h+f),b.quadraticCurveTo(d+k,h,d+k-f,h),b.lineTo(d+f,h),b.quadraticCurveTo(d,h,d,h+f),b.closePath())}};c.Graphics=function(){c.DisplayObjectContainer.call(this);this.renderable=!0;this.fillAlpha=1;this.lineWidth=0;this.lineColor="black";this.graphicsData=[];this.tint=16777215;this.blendMode=c.blendModes.NORMAL;this.currentPath={points:[]};this._webGL=[];this.isMask=!1;this.bounds=null;this.boundsPadding=
10;this.dirty=!0};c.Graphics.prototype=Object.create(c.DisplayObjectContainer.prototype);c.Graphics.prototype.constructor=c.Graphics;Object.defineProperty(c.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){(this._cacheAsBitmap=a)?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}});c.Graphics.prototype.lineStyle=function(a,b,e){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=a||0,this.lineColor=b||0,
this.lineAlpha=3>arguments.length?1:e,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:c.Graphics.POLY},this.graphicsData.push(this.currentPath),this};c.Graphics.prototype.moveTo=function(a,b){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,
fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:c.Graphics.POLY},this.currentPath.points.push(a,b),this.graphicsData.push(this.currentPath),this};c.Graphics.prototype.lineTo=function(a,b){return this.currentPath.points.push(a,b),this.dirty=!0,this};c.Graphics.prototype.quadraticCurveTo=function(a,b,e,c){0===this.currentPath.points.length&&this.moveTo(0,0);var d,f,h=this.currentPath.points;0===h.length&&this.moveTo(0,0);for(var k=h[h.length-2],t=h[h.length-1],s=0,r=1;20>=r;r++)s=r/20,d=k+
(a-k)*s,f=t+(b-t)*s,h.push(d+(a+(e-a)*s-d)*s,f+(b+(c-b)*s-f)*s);return this.dirty=!0,this};c.Graphics.prototype.bezierCurveTo=function(a,b,e,c,d,f){0===this.currentPath.points.length&&this.moveTo(0,0);for(var h,k,t,s,r,x=this.currentPath.points,l=x[x.length-2],u=x[x.length-1],v=0,p=1;20>p;p++)v=p/20,h=1-v,k=h*h,t=k*h,s=v*v,r=s*v,x.push(t*l+3*k*v*a+3*h*s*e+r*d,t*u+3*k*v*b+3*h*s*c+r*f);return this.dirty=!0,this};c.Graphics.prototype.arcTo=function(a,b,e,c,d){0===this.currentPath.points.length&&this.moveTo(a,
b);var f=this.currentPath.points,h=f[f.length-1]-b,k=f[f.length-2]-a;c-=b;e-=a;var t=Math.abs(h*e-k*c);if(1E-8>t||0===d)f.push(a,b);else{var s=h*h+k*k,r=c*c+e*e,x=h*c+k*e,f=d*Math.sqrt(s)/t,t=d*Math.sqrt(r)/t,s=f*x/s,l=t*x/r,r=f*e+t*k,x=f*c+t*h,u=e*(f+l),f=c*(f+l),t=Math.atan2(h*(t+s)-x,k*(t+s)-r),f=Math.atan2(f-x,u-r);this.arc(r+a,x+b,d,t,f,k*c>e*h)}return this.dirty=!0,this};c.Graphics.prototype.arc=function(a,b,e,c,d,f){var h=a+Math.cos(c)*e,k=b+Math.sin(c)*e,t=this.currentPath.points;if((0!==
t.length&&t[t.length-2]!==h||t[t.length-1]!==k)&&(this.moveTo(h,k),t=this.currentPath.points),c===d)return this;!f&&c>=d?d+=2*Math.PI:f&&d>=c&&(c+=2*Math.PI);d=f?-1*(c-d):d-c;var s=Math.abs(d)/(2*Math.PI)*40;if(0===d)return this;d/=2*s;f=2*d;for(var h=Math.cos(d),k=Math.sin(d),s=s-1,r=s%1/s,x=0;s>=x;x++){var l=d+c+f*(x+r*x),u=Math.cos(l),l=-Math.sin(l);t.push((h*u+k*l)*e+a,(h*-l+k*u)*e+b)}return this.dirty=!0,this};c.Graphics.prototype.drawPath=function(a){return this.currentPath.points.length||this.graphicsData.pop(),
this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:c.Graphics.POLY},this.graphicsData.push(this.currentPath),this.currentPath.points=this.currentPath.points.concat(a),this.dirty=!0,this};c.Graphics.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=2>arguments.length?1:b,this};c.Graphics.prototype.endFill=function(){return this.filling=
!1,this.fillColor=null,this.fillAlpha=1,this};c.Graphics.prototype.drawRect=function(a,b,e,d){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,e,d],type:c.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this};c.Graphics.prototype.drawRoundedRect=function(a,b,e,d,f){return this.currentPath.points.length||
this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,e,d,f],type:c.Graphics.RREC},this.graphicsData.push(this.currentPath),this.dirty=!0,this};c.Graphics.prototype.drawCircle=function(a,b,e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,
fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,e,e],type:c.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this};c.Graphics.prototype.drawEllipse=function(a,b,e,d){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,e,d],type:c.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=
!0,this};c.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this};c.Graphics.prototype.generateTexture=function(){var a=this.getBounds(),b=new c.CanvasBuffer(a.width,a.height),e=c.Texture.fromCanvas(b.canvas);return b.context.translate(-a.x,-a.y),c.CanvasGraphics.renderGraphics(this,b.context),e};c.Graphics.prototype._renderWebGL=function(a){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return this.dirty&&
(this._generateCachedSprite(),c.updateWebGLTexture(this._cachedSprite.texture.baseTexture,a.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,c.Sprite.prototype._renderWebGL.call(this._cachedSprite,a),void 0;if(a.spriteBatch.stop(),a.blendModeManager.setBlendMode(this.blendMode),this._mask&&a.maskManager.pushMask(this._mask,a),this._filters&&a.filterManager.pushFilter(this._filterBlock),this.blendMode!==a.spriteBatch.currentBlendMode){a.spriteBatch.currentBlendMode=this.blendMode;var b=c.blendModesWebGL[a.spriteBatch.currentBlendMode];
a.spriteBatch.gl.blendFunc(b[0],b[1])}if(c.WebGLGraphics.renderGraphics(this,a),this.children.length){a.spriteBatch.start();for(var b=0,e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop()}this._filters&&a.filterManager.popFilter();this._mask&&a.maskManager.popMask(this.mask,a);a.drawCount++;a.spriteBatch.start()}};c.Graphics.prototype._renderCanvas=function(a){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){var b=a.context,e=this.worldTransform;this.blendMode!==
a.currentBlendMode&&(a.currentBlendMode=this.blendMode,b.globalCompositeOperation=c.blendModesCanvas[a.currentBlendMode]);this._mask&&a.maskManager.pushMask(this._mask,a.context);b.setTransform(e.a,e.c,e.b,e.d,e.tx,e.ty);c.CanvasGraphics.renderGraphics(this,b);b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderCanvas(a);this._mask&&a.maskManager.popMask(a.context)}};c.Graphics.prototype.getBounds=function(a){this.bounds||this.updateBounds();var b=this.bounds.x,e=this.bounds.width+this.bounds.x,
c=this.bounds.y,d=this.bounds.height+this.bounds.y;a=a||this.worldTransform;var f=a.a,h=a.c,k=a.b,t=a.d,s=a.tx,r=a.ty,x=f*e+k*d+s,l=t*d+h*e+r;a=f*b+k*d+s;var d=t*d+h*b+r,u=f*b+k*c+s,b=t*c+h*b+r,f=f*e+k*c+s,e=t*c+h*e+r,c=x,h=l,x=x>a?a:x,x=x>u?u:x,x=x>f?f:x,l=l>d?d:l,l=l>b?b:l,l=l>e?e:l,c=a>c?a:c,c=u>c?u:c,h=d>h?d:h,h=b>h?b:h;a=this._bounds;return a.x=x,a.width=(f>c?f:c)-x,a.y=l,a.height=(e>h?e:h)-l,a};c.Graphics.prototype.updateBounds=function(){for(var a,b,e,d,f,h=1/0,k=-1/0,w=1/0,t=-1/0,s=0;s<this.graphicsData.length;s++)if(a=
this.graphicsData[s],b=a.type,f=a.lineWidth,a=a.points,b===c.Graphics.RECT)b=a[0]-f/2,e=a[1]-f/2,d=a[2]+f,f=a[3]+f,h=h>b?b:h,k=b+d>k?b+d:k,w=w>e?b:w,t=e+f>t?e+f:t;else if(b===c.Graphics.CIRC||b===c.Graphics.ELIP)b=a[0],e=a[1],d=a[2]+f/2,f=a[3]+f/2,h=h>b-d?b-d:h,k=b+d>k?b+d:k,w=w>e-f?e-f:w,t=e+f>t?e+f:t;else for(d=0;d<a.length;d+=2)b=a[d],e=a[d+1],h=h>b-f?b-f:h,k=b+f>k?b+f:k,w=w>e-f?e-f:w,t=e+f>t?e+f:t;s=this.boundsPadding;this.bounds=new c.Rectangle(h-s,w-s,k-h+2*s,t-w+2*s)};c.Graphics.prototype._generateCachedSprite=
function(){var a=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(a.width,a.height);else{var b=new c.CanvasBuffer(a.width,a.height),e=c.Texture.fromCanvas(b.canvas);this._cachedSprite=new c.Sprite(e);this._cachedSprite.buffer=b;this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(a.x/a.width);this._cachedSprite.anchor.y=-(a.y/a.height);this._cachedSprite.buffer.context.translate(-a.x,-a.y);c.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context);
this._cachedSprite.alpha=this.alpha};c.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0);this._cachedSprite=null};c.Graphics.POLY=0;c.Graphics.RECT=1;c.Graphics.CIRC=2;c.Graphics.ELIP=3;c.Graphics.RREC=4;c.Strip=function(a){c.DisplayObjectContainer.call(this);this.texture=a;this.uvs=new c.Float32Array([0,1,1,1,1,0,0,1]);this.verticies=new c.Float32Array([0,0,100,0,100,100,0,100]);this.colors=new c.Float32Array([1,1,1,1]);this.indices=new c.Uint16Array([0,1,2,
3]);this.dirty=!0};c.Strip.prototype=Object.create(c.DisplayObjectContainer.prototype);c.Strip.prototype.constructor=c.Strip;c.Strip.prototype._renderWebGL=function(a){!this.visible||0>=this.alpha||(a.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(a),a.shaderManager.setShader(a.shaderManager.stripShader),this._renderStrip(a),a.spriteBatch.start())};c.Strip.prototype._initWebGL=function(a){a=a.gl;this._vertexBuffer=a.createBuffer();this._indexBuffer=a.createBuffer();this._uvBuffer=a.createBuffer();
this._colorBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.verticies,a.DYNAMIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this._uvBuffer);a.bufferData(a.ARRAY_BUFFER,this.uvs,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this._colorBuffer);a.bufferData(a.ARRAY_BUFFER,this.colors,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW)};c.Strip.prototype._renderStrip=function(a){var b=
a.gl,e=a.projection,d=a.offset;a=a.shaderManager.stripShader;b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);b.uniformMatrix3fv(a.translationMatrix,!1,this.worldTransform.toArray(!0));b.uniform2f(a.projectionVector,e.x,-e.y);b.uniform2f(a.offsetVector,-d.x,-d.y);b.uniform1f(a.alpha,1);this.dirty?(this.dirty=!1,b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.verticies,b.STATIC_DRAW),b.vertexAttribPointer(a.aVertexPosition,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),
b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW),b.vertexAttribPointer(a.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]||c.createWebGLTexture(this.texture.baseTexture,b)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)):(b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer),b.bufferSubData(b.ARRAY_BUFFER,0,this.verticies),b.vertexAttribPointer(a.aVertexPosition,
2,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer),b.vertexAttribPointer(a.aTextureCoord,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.texture.baseTexture._glTextures[b.id]||c.createWebGLTexture(this.texture.baseTexture,b)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer));b.drawElements(b.TRIANGLE_STRIP,this.indices.length,b.UNSIGNED_SHORT,0)};c.Strip.prototype._renderCanvas=function(a){var b=a.context,e=this.worldTransform;a.roundPixels?b.setTransform(e.a,
e.c,e.b,e.d,0|e.tx,0|e.ty):b.setTransform(e.a,e.c,e.b,e.d,e.tx,e.ty);a=this.verticies;var e=this.uvs,c=a.length/2;this.count++;for(var d=0;c-2>d;d++){var f=2*d,h=a[f],k=a[f+2],t=a[f+4],s=a[f+1],r=a[f+3],x=a[f+5],l=(h+k+t)/3,u=(s+r+x)/3,v=h-l,p=s-u,y=Math.sqrt(v*v+p*p),h=l+v/y*(y+3),s=u+p/y*(y+3),v=k-l,p=r-u,y=Math.sqrt(v*v+p*p),k=l+v/y*(y+3),r=u+p/y*(y+3),v=t-l,p=x-u,y=Math.sqrt(v*v+p*p),t=l+v/y*(y+3),x=u+p/y*(y+3),l=e[f]*this.texture.width,u=e[f+2]*this.texture.width,v=e[f+4]*this.texture.width,
p=e[f+1]*this.texture.height,y=e[f+3]*this.texture.height,f=e[f+5]*this.texture.height;b.save();b.beginPath();b.moveTo(h,s);b.lineTo(k,r);b.lineTo(t,x);b.closePath();b.clip();var A=l*y+p*v+u*f-y*v-p*u-l*f;b.transform((h*y+p*t+k*f-y*t-p*k-h*f)/A,(s*y+p*x+r*f-y*x-p*r-s*f)/A,(l*k+h*v+u*t-k*v-h*u-l*t)/A,(l*r+s*v+u*x-r*v-s*u-l*x)/A,(l*y*t+p*k*v+h*u*f-h*y*v-p*u*t-l*k*f)/A,(l*y*x+p*r*v+s*u*f-s*y*v-p*u*x-l*r*f)/A);b.drawImage(this.texture.baseTexture.source,0,0);b.restore()}};c.Strip.prototype.onTextureUpdate=
function(){this.updateFrame=!0};c.Rope=function(a,b){c.Strip.call(this,a);this.points=b;this.verticies=new c.Float32Array(4*b.length);this.uvs=new c.Float32Array(4*b.length);this.colors=new c.Float32Array(2*b.length);this.indices=new c.Uint16Array(2*b.length);this.refresh()};c.Rope.prototype=Object.create(c.Strip.prototype);c.Rope.prototype.constructor=c.Rope;c.Rope.prototype.refresh=function(){var a=this.points;if(!(1>a.length)){var b=this.uvs,e=this.indices,c=this.colors;this.count-=.2;b[0]=0;b[1]=
0;b[2]=0;b[3]=1;c[0]=1;c[1]=1;e[0]=0;e[1]=1;for(var d,f=a.length,h=1;f>h;h++)a=4*h,d=h/(f-1),b[a]=d,b[a+1]=0,b[a+2]=d,b[a+3]=1,a=2*h,c[a]=1,c[a+1]=1,a=2*h,e[a]=a,e[a+1]=a+1}};c.Rope.prototype.updateTransform=function(){var a=this.points;if(!(1>a.length)){var b,e=a[0],d=b=0;this.count-=.2;for(var f,h,k,w=this.verticies,t=a.length,s=0;t>s;s++)f=a[s],h=4*s,b=s<a.length-1?a[s+1]:f,d=-(b.x-e.x),b=b.y-e.y,e=Math.sqrt(b*b+d*d),k=this.texture.height/2,b/=e,d/=e,b*=k,d*=k,w[h]=f.x+b,w[h+1]=f.y+d,w[h+2]=f.x-
b,w[h+3]=f.y-d,e=f;c.DisplayObjectContainer.prototype.updateTransform.call(this)}};c.Rope.prototype.setTexture=function(a){this.texture=a};c.TilingSprite=function(a,b,e){c.Sprite.call(this,a);this._width=b||100;this._height=e||100;this.tileScale=new c.Point(1,1);this.tileScaleOffset=new c.Point(1,1);this.tilePosition=new c.Point(0,0);this.renderable=!0;this.tint=16777215;this.blendMode=c.blendModes.NORMAL};c.TilingSprite.prototype=Object.create(c.Sprite.prototype);c.TilingSprite.prototype.constructor=
c.TilingSprite;Object.defineProperty(c.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a}});Object.defineProperty(c.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a}});c.TilingSprite.prototype.setTexture=function(a){this.texture!==a&&(this.texture=a,this.refreshTexture=!0,this.cachedTint=16777215)};c.TilingSprite.prototype._renderWebGL=function(a){if(!1!==this.visible&&0!==this.alpha){var b,e;this._mask&&
(a.spriteBatch.stop(),a.maskManager.pushMask(this.mask,a),a.spriteBatch.start());this._filters&&(a.spriteBatch.flush(),a.filterManager.pushFilter(this._filterBlock));!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(c.updateWebGLTexture(this.tilingTexture.baseTexture,a.gl),this.tilingTexture.needsUpdate=!1)):a.spriteBatch.renderTilingSprite(this);b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderWebGL(a);a.spriteBatch.stop();
this._filters&&a.filterManager.popFilter();this._mask&&a.maskManager.popMask(a);a.spriteBatch.start()}};c.TilingSprite.prototype._renderCanvas=function(a){if(!1!==this.visible&&0!==this.alpha){var b=a.context;this._mask&&a.maskManager.pushMask(this._mask,b);b.globalAlpha=this.worldAlpha;var e;e=this.worldTransform;if(b.setTransform(e.a,e.c,e.b,e.d,e.tx,e.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=b.createPattern(this.tilingTexture.baseTexture.source,
"repeat")}this.blendMode!==a.currentBlendMode&&(a.currentBlendMode=this.blendMode,b.globalCompositeOperation=c.blendModesCanvas[a.currentBlendMode]);e=this.tilePosition;var d=this.tileScale;e.x%=this.tilingTexture.baseTexture.width;e.y%=this.tilingTexture.baseTexture.height;b.scale(d.x,d.y);b.translate(e.x,e.y);b.fillStyle=this.__tilePattern;b.fillRect(-e.x+this.anchor.x*-this._width,-e.y+this.anchor.y*-this._height,this._width/d.x,this._height/d.y);b.scale(1/d.x,1/d.y);b.translate(-e.x,-e.y);this._mask&&
a.maskManager.popMask(a.context);b=0;for(e=this.children.length;e>b;b++)this.children[b]._renderCanvas(a)}};c.TilingSprite.prototype.getBounds=function(){var a=this._width,b=this._height,e=a*(1-this.anchor.x),c=a*-this.anchor.x,d=b*(1-this.anchor.y),f=b*-this.anchor.y,b=this.worldTransform,h=b.a,k=b.c,t=b.b,s=b.d,r=b.tx,x=b.ty,b=h*c+t*f+r,a=s*f+k*c+x,l=h*e+t*f+r,f=s*f+k*e+x,u=h*e+t*d+r,e=s*d+k*e+x,h=h*c+t*d+r,c=s*d+k*c+x,d=-1/0,k=-1/0,s=1/0,t=1/0,s=s>b?b:s,s=s>l?l:s,s=s>u?u:s,s=s>h?h:s,t=t>a?a:t,
t=t>f?f:t,t=t>e?e:t,t=t>c?c:t,d=b>d?b:d,d=l>d?l:d,d=u>d?u:d,k=a>k?a:k,k=f>k?f:k,k=e>k?e:k,b=this._bounds;return b.x=s,b.width=(h>d?h:d)-s,b.y=t,b.height=(c>k?c:k)-t,this._currentBounds=b,b};c.TilingSprite.prototype.onTextureUpdate=function(){};c.TilingSprite.prototype.generateTilingTexture=function(a){if(this.texture.baseTexture.hasLoaded){var b,e,d=this.texture,f=d.frame,h=f.width!==d.baseTexture.width||f.height!==d.baseTexture.height,k=!1;if(a?(b=c.getNextPowerOfTwo(f.width),e=c.getNextPowerOfTwo(f.height),
(f.width!==b||f.height!==e)&&(k=!0)):h&&(b=f.width,e=f.height,k=!0),k){var w;this.tilingTexture&&this.tilingTexture.isTiling?(w=this.tilingTexture.canvasBuffer,w.resize(b,e),this.tilingTexture.baseTexture.width=b,this.tilingTexture.baseTexture.height=e,this.tilingTexture.needsUpdate=!0):(w=new c.CanvasBuffer(b,e),this.tilingTexture=c.Texture.fromCanvas(w.canvas),this.tilingTexture.canvasBuffer=w,this.tilingTexture.isTiling=!0);w.context.drawImage(d.baseTexture.source,d.crop.x,d.crop.y,d.crop.width,
d.crop.height,0,0,b,e);this.tileScaleOffset.x=f.width/b;this.tileScaleOffset.y=f.height/e}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=d;this.refreshTexture=!1;this.tilingTexture.baseTexture._powerOf2=!0}};var h={BoneData:function(a,b){this.name=a;this.parent=b}};h.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1};h.SlotData=function(a,b){this.name=a;this.boneData=b};h.SlotData.prototype=
{r:1,g:1,b:1,a:1,attachmentName:null};h.Bone=function(a,b){this.data=a;this.parent=b;this.setToSetupPose()};h.Bone.yDown=!1;h.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var e=this.parent;null!=e?(this.worldX=this.x*e.m00+this.y*e.m01+e.worldX,this.worldY=this.x*e.m10+this.y*e.m11+e.worldY,this.worldScaleX=e.worldScaleX*this.scaleX,this.worldScaleY=e.worldScaleY*this.scaleY,
this.worldRotation=e.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var c=this.worldRotation*Math.PI/180,e=Math.cos(c),c=Math.sin(c);this.m00=e*this.worldScaleX;this.m10=c*this.worldScaleX;this.m01=-c*this.worldScaleY;this.m11=e*this.worldScaleY;a&&(this.m00=-this.m00,this.m01=-this.m01);b&&(this.m10=-this.m10,this.m11=-this.m11);h.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=
this.data;this.x=a.x;this.y=a.y;this.rotation=a.rotation;this.scaleX=a.scaleX;this.scaleY=a.scaleY}};h.Slot=function(a,b,e){this.data=a;this.skeleton=b;this.bone=e;this.setToSetupPose()};h.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a;this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=
this.data;this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a;for(var b=this.skeleton.data.slots,e=0,c=b.length;c>e;e++)if(b[e]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(e,a.attachmentName):null);break}}};h.Skin=function(a){this.name=a;this.attachments={}};h.Skin.prototype={addAttachment:function(a,b,e){this.attachments[a+":"+b]=e},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var e in b.attachments){var c=e.indexOf(":"),d=
parseInt(e.substring(0,c),10),f=e.substring(c+1),c=a.slots[d];c.attachment&&c.attachment.name==f&&(d=this.getAttachment(d,f))&&c.setAttachment(d)}}};h.Animation=function(a,b,e){this.name=a;this.timelines=b;this.duration=e};h.Animation.prototype={apply:function(a,b,e){e&&this.duration&&(b%=this.duration);e=this.timelines;for(var c=0,d=e.length;d>c;c++)e[c].apply(a,b,1)},mix:function(a,b,e,c){e&&this.duration&&(b%=this.duration);e=this.timelines;for(var d=0,f=e.length;f>d;d++)e[d].apply(a,b,c)}};h.binarySearch=
function(a,b,e){var c=0,d=Math.floor(a.length/e)-2;if(!d)return e;for(var f=d>>>1;;){if(a[(f+1)*e]<=b?c=f+1:d=f,c==d)return(c+1)*e;f=c+d>>>1}};h.linearSearch=function(a,b,e){for(var c=0,d=a.length-e;d>=c;c+=e)if(a[c]>b)return c;return-1};h.Curves=function(a){this.curves=[];this.curves.length=6*(a-1)};h.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,e,c,d){var f=.1*.1,h=.1*f,k=3*.1,t=3*f,f=6*f,s=6*h,r=2*-b+c,x=2*-e+d;c=
3*(b-c)+1;d=3*(e-d)+1;a*=6;var l=this.curves;l[a]=b*k+r*t+c*h;l[a+1]=e*k+x*t+d*h;l[a+2]=r*f+c*s;l[a+3]=x*f+d*s;l[a+4]=c*s;l[a+5]=d*s},getCurvePercent:function(a,b){b=0>b?0:1<b?1:b;var e=6*a,c=this.curves,d=c[e];if(!d)return b;if(-1==d)return 0;for(var f=c[e+1],h=c[e+2],k=c[e+3],t=c[e+4],s=c[e+5],e=d,c=f,r=8;;){if(e>=b)return d=e-d,f=c-f,f+(c-f)*(b-d)/(e-d);if(!r)break;r--;d+=h;f+=k;h+=t;k+=s;e+=d;c+=f}return c+(1-c)*(b-e)/(1-e)}};h.RotateTimeline=function(a){this.curves=new h.Curves(a);this.frames=
[];this.frames.length=2*a};h.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,e){a*=2;this.frames[a]=b;this.frames[a+1]=e},apply:function(a,b,e){var c;c=this.frames;if(!(b<c[0])){a=a.bones[this.boneIndex];if(b>=c[c.length-2]){for(c=a.data.rotation+c[c.length-1]-a.rotation;180<c;)c-=360;for(;-180>c;)c+=360;return a.rotation+=c*e,void 0}var d=h.binarySearch(c,b,2),f=c[d-1],k=c[d];b=1-(b-k)/(c[d-2]-k);b=this.curves.getCurvePercent(d/2-
1,b);for(c=c[d+1]-f;180<c;)c-=360;for(;-180>c;)c+=360;for(c=a.data.rotation+(f+c*b)-a.rotation;180<c;)c-=360;for(;-180>c;)c+=360;a.rotation+=c*e}}};h.TranslateTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=3*a};h.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,e,c){a*=3;this.frames[a]=b;this.frames[a+1]=e;this.frames[a+2]=c},apply:function(a,b,e){var c=this.frames;if(!(b<c[0])){a=a.bones[this.boneIndex];
if(b>=c[c.length-3])return a.x+=(a.data.x+c[c.length-2]-a.x)*e,a.y+=(a.data.y+c[c.length-1]-a.y)*e,void 0;var d=h.binarySearch(c,b,3),f=c[d-2],k=c[d-1],w=c[d];b=1-(b-w)/(c[d+-3]-w);b=this.curves.getCurvePercent(d/3-1,b);a.x+=(a.data.x+f+(c[d+1]-f)*b-a.x)*e;a.y+=(a.data.y+k+(c[d+2]-k)*b-a.y)*e}}};h.ScaleTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=3*a};h.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,
b,e,c){a*=3;this.frames[a]=b;this.frames[a+1]=e;this.frames[a+2]=c},apply:function(a,b,e){var c=this.frames;if(!(b<c[0])){a=a.bones[this.boneIndex];if(b>=c[c.length-3])return a.scaleX+=(a.data.scaleX-1+c[c.length-2]-a.scaleX)*e,a.scaleY+=(a.data.scaleY-1+c[c.length-1]-a.scaleY)*e,void 0;var d=h.binarySearch(c,b,3),f=c[d-2],k=c[d-1],w=c[d];b=1-(b-w)/(c[d+-3]-w);b=this.curves.getCurvePercent(d/3-1,b);a.scaleX+=(a.data.scaleX-1+f+(c[d+1]-f)*b-a.scaleX)*e;a.scaleY+=(a.data.scaleY-1+k+(c[d+2]-k)*b-a.scaleY)*
e}}};h.ColorTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=5*a};h.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,e,c,d,f){a*=5;this.frames[a]=b;this.frames[a+1]=e;this.frames[a+2]=c;this.frames[a+3]=d;this.frames[a+4]=f},apply:function(a,b,e){var c=this.frames;if(!(b<c[0])){a=a.slots[this.slotIndex];if(b>=c[c.length-5])return e=c.length-1,a.r=c[e-3],a.g=c[e-2],a.b=c[e-1],a.a=c[e],void 0;var d=h.binarySearch(c,
b,5),f=c[d-4],k=c[d-3],w=c[d-2],t=c[d-1],s=c[d];b=1-(b-s)/(c[d-5]-s);b=this.curves.getCurvePercent(d/5-1,b);f+=(c[d+1]-f)*b;k+=(c[d+2]-k)*b;w+=(c[d+3]-w)*b;c=t+(c[d+4]-t)*b;1>e?(a.r+=(f-a.r)*e,a.g+=(k-a.g)*e,a.b+=(w-a.b)*e,a.a+=(c-a.a)*e):(a.r=f,a.g=k,a.b=w,a.a=c)}}};h.AttachmentTimeline=function(a){this.curves=new h.Curves(a);this.frames=[];this.frames.length=a;this.attachmentNames=[];this.attachmentNames.length=a};h.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},
setFrame:function(a,b,e){this.frames[a]=b;this.attachmentNames[a]=e},apply:function(a,b){var e=this.frames;b<e[0]||(e=b>=e[e.length-1]?e.length-1:h.binarySearch(e,b,1)-1,e=this.attachmentNames[e],a.slots[this.slotIndex].setAttachment(e?a.getAttachmentBySlotIndex(this.slotIndex,e):null))}};h.SkeletonData=function(){this.bones=[];this.slots=[];this.skins=[];this.animations=[]};h.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,e=0,c=b.length;c>e;e++)if(b[e].name==a)return b[e];
return null},findBoneIndex:function(a){for(var b=this.bones,e=0,c=b.length;c>e;e++)if(b[e].name==a)return e;return-1},findSlot:function(a){for(var b=this.slots,e=0,c=b.length;c>e;e++)if(b[e].name==a)return slot[e];return null},findSlotIndex:function(a){for(var b=this.slots,e=0,c=b.length;c>e;e++)if(b[e].name==a)return e;return-1},findSkin:function(a){for(var b=this.skins,e=0,c=b.length;c>e;e++)if(b[e].name==a)return b[e];return null},findAnimation:function(a){for(var b=this.animations,e=0,c=b.length;c>
e;e++)if(b[e].name==a)return b[e];return null}};h.Skeleton=function(a){this.data=a;this.bones=[];for(var b=0,e=a.bones.length;e>b;b++){var c=a.bones[b],d=c.parent?this.bones[a.bones.indexOf(c.parent)]:null;this.bones.push(new h.Bone(c,d))}this.slots=[];this.drawOrder=[];b=0;for(e=a.slots.length;e>b;b++)c=a.slots[b],d=this.bones[a.bones.indexOf(c.boneData)],c=new h.Slot(c,this,d),this.slots.push(c),this.drawOrder.push(c)};h.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,
updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,e=this.bones,c=0,d=e.length;d>c;c++)e[c].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,e=a.length;e>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,e=a.length;e>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=
this.bones,e=0,c=b.length;c>e;e++)if(b[e].data.name==a)return b[e];return null},findBoneIndex:function(a){for(var b=this.bones,e=0,c=b.length;c>e;e++)if(b[e].data.name==a)return e;return-1},findSlot:function(a){for(var b=this.slots,e=0,c=b.length;c>e;e++)if(b[e].data.name==a)return b[e];return null},findSlotIndex:function(a){for(var b=this.slots,e=0,c=b.length;c>e;e++)if(b[e].data.name==a)return e;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},
setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin);this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var e=this.skin.getAttachment(a,b);if(e)return e}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var e=this.slots,c=0,d=e.size;d>c;c++){var f=e[c];if(f.data.name==a){e=null;if(b&&(e=this.getAttachment(c,b),
null==e))throw"Attachment not found: "+b+", for slot: "+a;return f.setAttachment(e),void 0}}throw"Slot not found: "+a;},update:function(a){time+=a}};h.AttachmentType={region:0};h.RegionAttachment=function(){this.offset=[];this.offset.length=8;this.uvs=[];this.uvs.length=8};h.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,
b,c,d,f){var h=this.uvs;f?(h[2]=a,h[3]=d,h[4]=a,h[5]=b,h[6]=c,h[7]=b,h[0]=c,h[1]=d):(h[0]=a,h[1]=d,h[2]=a,h[3]=b,h[4]=c,h[5]=b,h[6]=c,h[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,f=c+this.regionWidth*a,a=d+this.regionHeight*b,b=this.rotation*Math.PI/180,h=Math.cos(b),k=Math.sin(b),b=c*h+this.x,c=c*k,w=d*h+this.y,
d=d*k,t=f*h+this.x,f=f*k,h=a*h+this.y,a=a*k,k=this.offset;k[0]=b-d;k[1]=w+c;k[2]=b-a;k[3]=h+c;k[4]=t-a;k[5]=h+f;k[6]=t-d;k[7]=w+f},computeVertices:function(a,b,c,d){a+=c.worldX;b+=c.worldY;var f=c.m00,h=c.m01,k=c.m10;c=c.m11;var w=this.offset;d[0]=w[0]*f+w[1]*h+a;d[1]=w[0]*k+w[1]*c+b;d[2]=w[2]*f+w[3]*h+a;d[3]=w[2]*k+w[3]*c+b;d[4]=w[4]*f+w[5]*h+a;d[5]=w[4]*k+w[5]*c+b;d[6]=w[6]*f+w[7]*h+a;d[7]=w[6]*k+w[7]*c+b}};h.AnimationStateData=function(a){this.skeletonData=a;this.animationToMixTime={}};h.AnimationStateData.prototype=
{defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;a=this.skeletonData.findAnimation(b);if(!a)throw"Animation not found: "+b;this.setMix(d,a,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}};h.AnimationState=function(a){this.data=a;this.queue=[]};h.AnimationState.prototype={animationSpeed:1,current:null,previous:null,
currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(a){if(this.currentTime+=a*this.animationSpeed,this.previousTime+=a,this.mixTime+=a,0<this.queue.length)a=this.queue[0],this.currentTime>=a.delay&&(this._setAnimation(a.animation,a.loop),this.queue.shift())},apply:function(a){if(this.current)if(this.previous){this.previous.apply(a,this.previousTime,this.previousLoop);var b=this.mixTime/this.mixDuration;1<=b&&(b=1,this.previous=null);this.current.mix(a,
this.currentTime,this.currentLoop,b)}else this.current.apply(a,this.currentTime,this.currentLoop)},clearAnimation:function(){this.current=this.previous=null;this.queue.length=0},_setAnimation:function(a,b){this.previous=null;a&&this.current&&(this.mixDuration=this.data.getMix(this.current,a),0<this.mixDuration&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop));this.current=a;this.currentLoop=b;this.currentTime=0},setAnimationByName:function(a,
b){var c=this.data.skeletonData.findAnimation(a);if(!c)throw"Animation not found: "+a;this.setAnimation(c,b)},setAnimation:function(a,b){this.queue.length=0;this._setAnimation(a,b)},addAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;this.addAnimation(d,b,c)},addAnimation:function(a,b,c){var d={};if(d.animation=a,d.loop=b,!c||0>=c)b=this.queue.length?this.queue[this.queue.length-1].animation:this.current,c=null!=b?b.duration-this.data.getMix(b,
a)+(c||0):0;d.delay=c;this.queue.push(d)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}};h.SkeletonJson=function(a){this.attachmentLoader=a};h.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b,c=new h.SkeletonData,d=a.bones,f=0,k=d.length;k>f;f++){var n=d[f];b=null;if(n.parent&&(b=c.findBone(n.parent),!b))throw"Parent bone not found: "+n.parent;b=new h.BoneData(n.name,b);b.length=(n.length||0)*this.scale;b.x=(n.x||0)*this.scale;b.y=(n.y||
0)*this.scale;b.rotation=n.rotation||0;b.scaleX=n.scaleX||1;b.scaleY=n.scaleY||1;c.bones.push(b)}d=a.slots;f=0;for(k=d.length;k>f;f++){n=d[f];if(b=c.findBone(n.bone),!b)throw"Slot bone not found: "+n.bone;var w=new h.SlotData(n.name,b),t=n.color;t&&(w.r=h.SkeletonJson.toColor(t,0),w.g=h.SkeletonJson.toColor(t,1),w.b=h.SkeletonJson.toColor(t,2),w.a=h.SkeletonJson.toColor(t,3));w.attachmentName=n.attachment;c.slots.push(w)}var f=a.skins,s;for(s in f)if(f.hasOwnProperty(s)){k=f[s];b=new h.Skin(s);for(var r in k)if(k.hasOwnProperty(r)){var d=
c.findSlotIndex(r),n=k[r],x;for(x in n)n.hasOwnProperty(x)&&(w=this.readAttachment(b,x,n[x]),null!=w&&b.addAttachment(d,x,w))}c.skins.push(b);"default"==b.name&&(c.defaultSkin=b)}a=a.animations;for(var l in a)a.hasOwnProperty(l)&&this.readAnimation(l,a[l],c);return c},readAttachment:function(a,b,c){b=c.name||b;a=h.AttachmentType[c.type||"region"];if(a==h.AttachmentType.region)return a=new h.RegionAttachment,a.x=(c.x||0)*this.scale,a.y=(c.y||0)*this.scale,a.scaleX=c.scaleX||1,a.scaleY=c.scaleY||1,
a.rotation=c.rotation||0,a.width=(c.width||32)*this.scale,a.height=(c.height||32)*this.scale,a.updateOffset(),a.rendererObject={},a.rendererObject.name=b,a.rendererObject.scale={},a.rendererObject.scale.x=a.scaleX,a.rendererObject.scale.y=a.scaleY,a.rendererObject.rotation=-a.rotation*Math.PI/180,a;throw"Unknown attachment type: "+a;},readAnimation:function(a,b,c){var d,f,k,n,w,t,s,r=[],x=0,l=b.bones,u;for(u in l)if(l.hasOwnProperty(u)){var v=c.findBoneIndex(u);if(-1==v)throw"Bone not found: "+u;
var p=l[u];for(k in p)if(p.hasOwnProperty(k))if(w=p[k],"rotate"==k){f=new h.RotateTimeline(w.length);f.boneIndex=v;t=d=0;for(s=w.length;s>t;t++)n=w[t],f.setFrame(d,n.time,n.angle),h.SkeletonJson.readCurve(f,d,n),d++;r.push(f);x=Math.max(x,f.frames[2*f.getFrameCount()-2])}else{if("translate"!=k&&"scale"!=k)throw"Invalid timeline type for a bone: "+k+" ("+u+")";var y=1;"scale"==k?f=new h.ScaleTimeline(w.length):(f=new h.TranslateTimeline(w.length),y=this.scale);f.boneIndex=v;t=d=0;for(s=w.length;s>
t;t++)n=w[t],f.setFrame(d,n.time,(n.x||0)*y,(n.y||0)*y),h.SkeletonJson.readCurve(f,d,n),d++;r.push(f);x=Math.max(x,f.frames[3*f.getFrameCount()-3])}}b=b.slots;for(var A in b)if(b.hasOwnProperty(A))for(k in l=b[A],u=c.findSlotIndex(A),l)if(l.hasOwnProperty(k))if(w=l[k],"color"==k){f=new h.ColorTimeline(w.length);f.slotIndex=u;t=d=0;for(s=w.length;s>t;t++){n=w[t];var z=n.color,v=h.SkeletonJson.toColor(z,0),p=h.SkeletonJson.toColor(z,1),y=h.SkeletonJson.toColor(z,2),z=h.SkeletonJson.toColor(z,3);f.setFrame(d,
n.time,v,p,y,z);h.SkeletonJson.readCurve(f,d,n);d++}r.push(f);x=Math.max(x,f.frames[5*f.getFrameCount()-5])}else{if("attachment"!=k)throw"Invalid timeline type for a slot: "+k+" ("+A+")";f=new h.AttachmentTimeline(w.length);f.slotIndex=u;t=d=0;for(s=w.length;s>t;t++)n=w[t],f.setFrame(d++,n.time,n.name);r.push(f);x=Math.max(x,f.frames[f.getFrameCount()-1])}c.animations.push(new h.Animation(a,r,x))}};h.SkeletonJson.readCurve=function(a,b,c){(c=c.curve)&&("stepped"==c?a.curves.setStepped(b):c instanceof
Array&&a.curves.setCurve(b,c[0],c[1],c[2],c[3]))};h.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substr(2*b,2),16)/255};h.Atlas=function(a,b){this.textureLoader=b;this.pages=[];this.regions=[];var c=new h.AtlasReader(a),d=[];d.length=4;for(var f=null;;){var k=c.readLine();if(null==k)break;if(k=c.trim(k),k.length)if(f){var n=new h.AtlasRegion;n.name=k;n.page=f;n.rotate="true"==c.readValue();c.readTuple(d);var k=parseInt(d[0],
10),w=parseInt(d[1],10);c.readTuple(d);var t=parseInt(d[0],10),s=parseInt(d[1],10);n.u=k/f.width;n.v=w/f.height;n.rotate?(n.u2=(k+s)/f.width,n.v2=(w+t)/f.height):(n.u2=(k+t)/f.width,n.v2=(w+s)/f.height);n.x=k;n.y=w;n.width=Math.abs(t);n.height=Math.abs(s);4==c.readTuple(d)&&(n.splits=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)],4==c.readTuple(d)&&(n.pads=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)],c.readTuple(d)));n.originalWidth=parseInt(d[0],
10);n.originalHeight=parseInt(d[1],10);c.readTuple(d);n.offsetX=parseInt(d[0],10);n.offsetY=parseInt(d[1],10);n.index=parseInt(c.readValue(),10);this.regions.push(n)}else f=new h.AtlasPage,f.name=k,f.format=h.Atlas.Format[c.readValue()],c.readTuple(d),f.minFilter=h.Atlas.TextureFilter[d[0]],f.magFilter=h.Atlas.TextureFilter[d[1]],n=c.readValue(),f.uWrap=h.Atlas.TextureWrap.clampToEdge,f.vWrap=h.Atlas.TextureWrap.clampToEdge,"x"==n?f.uWrap=h.Atlas.TextureWrap.repeat:"y"==n?f.vWrap=h.Atlas.TextureWrap.repeat:
"xy"==n&&(f.uWrap=f.vWrap=h.Atlas.TextureWrap.repeat),b.load(f,k),this.pages.push(f);else f=null}};h.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var f=b[c];f.page==a&&(f.u=f.x/a.width,f.v=f.y/a.height,f.rotate?(f.u2=(f.x+f.height)/a.width,
f.v2=(f.y+f.width)/a.height):(f.u2=(f.x+f.width)/a.width,f.v2=(f.y+f.height)/a.height))}}};h.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6};h.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6};h.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2};h.AtlasPage=function(){};h.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,
rendererObject:null,width:0,height:0};h.AtlasRegion=function(){};h.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null};h.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)};h.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=
this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,c=c+1;3>d;d++){var f=b.indexOf(",",c);if(-1==f){if(!d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(c,f-c));c=f+1}return a[d]=this.trim(b.substring(c)),d+1}};h.AtlasAttachmentLoader=function(a){this.atlas=a};h.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,c){switch(b){case h.AttachmentType.region:a=
this.atlas.findRegion(c);if(!a)throw"Region not found in atlas: "+c+" ("+b+")";b=new h.RegionAttachment(c);return b.rendererObject=a,b.setUVs(a.u,a.v,a.u2,a.v2,a.rotate),b.regionOffsetX=a.offsetX,b.regionOffsetY=a.offsetY,b.regionWidth=a.width,b.regionHeight=a.height,b.regionOriginalWidth=a.originalWidth,b.regionOriginalHeight=a.originalHeight,b}throw"Unknown attachment type: "+b;}};h.Bone.yDown=!0;c.AnimCache={};c.Spine=function(a){if(c.DisplayObjectContainer.call(this),this.spineData=c.AnimCache[a],
!this.spineData)throw Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+a);this.skeleton=new h.Skeleton(this.spineData);this.skeleton.updateWorldTransform();this.stateData=new h.AnimationStateData(this.spineData);this.state=new h.AnimationState(this.stateData);this.slotContainers=[];a=0;for(var b=this.skeleton.drawOrder.length;b>a;a++){var e=this.skeleton.drawOrder[a],d=e.attachment,f=new c.DisplayObjectContainer;if(this.slotContainers.push(f),this.addChild(f),d instanceof
h.RegionAttachment){var k=d.rendererObject.name,d=this.createSprite(e,d.rendererObject);e.currentSprite=d;e.currentSpriteName=k;f.addChild(d)}}};c.Spine.prototype=Object.create(c.DisplayObjectContainer.prototype);c.Spine.prototype.constructor=c.Spine;c.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now();this.state.update(a);this.state.apply(this.skeleton);this.skeleton.updateWorldTransform();for(var a=this.skeleton.drawOrder,
b=0,e=a.length;e>b;b++){var d=a[b],f=d.attachment,k=this.slotContainers[b];if(f instanceof h.RegionAttachment){if(f.rendererObject&&(!d.currentSpriteName||d.currentSpriteName!=f.name)){var n=f.rendererObject.name;if(void 0!==d.currentSprite&&(d.currentSprite.visible=!1),d.sprites=d.sprites||{},void 0!==d.sprites[n])d.sprites[n].visible=!0;else{var w=this.createSprite(d,f.rendererObject);k.addChild(w)}d.currentSprite=d.sprites[n];d.currentSpriteName=n}k.visible=!0;n=d.bone;k.position.x=n.worldX+f.x*
n.m00+f.y*n.m01;k.position.y=n.worldY+f.x*n.m10+f.y*n.m11;k.scale.x=n.worldScaleX;k.scale.y=n.worldScaleY;k.rotation=-(d.bone.worldRotation*Math.PI/180);k.alpha=d.a;d.currentSprite.tint=c.rgb2hex([d.r,d.g,d.b])}else k.visible=!1}c.DisplayObjectContainer.prototype.updateTransform.call(this)};c.Spine.prototype.createSprite=function(a,b){var e=new c.Sprite(c.Texture.fromFrame(c.TextureCache[b.name]?b.name:b.name+".png"));return e.scale=b.scale,e.rotation=b.rotation,e.anchor.x=e.anchor.y=.5,a.sprites=
a.sprites||{},a.sprites[b.name]=e,e};c.BaseTextureCache={};c.texturesToUpdate=[];c.texturesToDestroy=[];c.BaseTextureCacheIdGenerator=0;c.BaseTexture=function(a,b){if(c.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=b||c.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=a,this.id=c.BaseTextureCacheIdGenerator++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[],a){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=
!0,this.width=this.source.width,this.height=this.source.height,c.texturesToUpdate.push(this);else{var e=this;this.source.onload=function(){e.hasLoaded=!0;e.width=e.source.width;e.height=e.source.height;for(var a=0;a<e._glTextures.length;a++)e._dirty[a]=!0;e.dispatchEvent({type:"loaded",content:e})};this.source.onerror=function(){e.dispatchEvent({type:"error",content:e})}}this.imageUrl=null;this._powerOf2=!1}};c.BaseTexture.prototype.constructor=c.BaseTexture;c.BaseTexture.prototype.destroy=function(){this.imageUrl?
(delete c.BaseTextureCache[this.imageUrl],delete c.TextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null):this.source&&this.source._pixiId&&delete c.BaseTextureCache[this.source._pixiId];this.source=null;c.texturesToDestroy.push(this)};c.BaseTexture.prototype.updateSourceImage=function(a){this.hasLoaded=!1;this.source.src=null;this.source.src=a};c.BaseTexture.fromImage=function(a,b,e){var d=c.BaseTextureCache[a];(void 0===b&&-1===a.indexOf("data:")&&(b=!0),d)||(d=new Image,b&&(d.crossOrigin=
""),d.src=a,d=new c.BaseTexture(d,e),d.imageUrl=a,c.BaseTextureCache[a]=d);return d};c.BaseTexture.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+c.TextureCacheIdGenerator++);var e=c.BaseTextureCache[a._pixiId];return e||(e=new c.BaseTexture(a,b),c.BaseTextureCache[a._pixiId]=e),e};c.TextureCache={};c.FrameCache={};c.TextureCacheIdGenerator=0;c.Texture=function(a,b){if(c.EventTarget.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new c.Rectangle(0,0,1,1)),a instanceof c.Texture&&(a=a.baseTexture),
this.baseTexture=a,this.frame=b,this.trim=null,this.valid=!1,this.scope=this,this._uvs=null,this.width=0,this.height=0,this.crop=new c.Rectangle(0,0,1,1),a.hasLoaded)this.noFrame&&(b=new c.Rectangle(0,0,a.width,a.height)),this.setFrame(b);else{var e=this;a.addEventListener("loaded",function(){e.onBaseTextureLoaded()})}};c.Texture.prototype.constructor=c.Texture;c.Texture.prototype.onBaseTextureLoaded=function(){var a=this.baseTexture;a.removeEventListener("loaded",this.onLoaded);this.noFrame&&(this.frame=
new c.Rectangle(0,0,a.width,a.height));this.setFrame(this.frame);this.scope.dispatchEvent({type:"update",content:this})};c.Texture.prototype.destroy=function(a){a&&this.baseTexture.destroy();this.valid=!1};c.Texture.prototype.setFrame=function(a){if(this.noFrame=!1,this.frame=a,this.width=a.width,this.height=a.height,this.crop.x=a.x,this.crop.y=a.y,this.crop.width=a.width,this.crop.height=a.height,!this.trim&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+
this);this.valid=a&&a.width&&a.height&&this.baseTexture.source&&this.baseTexture.hasLoaded;this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height);this.valid&&c.Texture.frameUpdates.push(this)};c.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new c.TextureUvs);var a=this.crop,b=this.baseTexture.width,e=this.baseTexture.height;this._uvs.x0=a.x/b;this._uvs.y0=a.y/e;this._uvs.x1=(a.x+a.width)/b;this._uvs.y1=
a.y/e;this._uvs.x2=(a.x+a.width)/b;this._uvs.y2=(a.y+a.height)/e;this._uvs.x3=a.x/b;this._uvs.y3=(a.y+a.height)/e};c.Texture.fromImage=function(a,b,e){var d=c.TextureCache[a];return d||(d=new c.Texture(c.BaseTexture.fromImage(a,b,e)),c.TextureCache[a]=d),d};c.Texture.fromFrame=function(a){var b=c.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache ');return b};c.Texture.fromCanvas=function(a,b){var e=c.BaseTexture.fromCanvas(a,b);return new c.Texture(e)};c.Texture.addTextureToCache=
function(a,b){c.TextureCache[b]=a};c.Texture.removeTextureFromCache=function(a){var b=c.TextureCache[a];return delete c.TextureCache[a],delete c.BaseTextureCache[a],b};c.Texture.frameUpdates=[];c.TextureUvs=function(){this.y3=this.x3=this.y2=this.x2=this.y1=this.x1=this.y0=this.x0=0};c.RenderTexture=function(a,b,e,d){(c.EventTarget.call(this),this.width=a||100,this.height=b||100,this.frame=new c.Rectangle(0,0,this.width,this.height),this.crop=new c.Rectangle(0,0,this.width,this.height),this.baseTexture=
new c.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=d||c.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=e||c.defaultRenderer,this.renderer.type===c.WEBGL_RENDERER)?(a=this.renderer.gl,this.textureBuffer=new c.FilterTexture(a,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new c.Point(this.width/
2,-this.height/2)):(this.render=this.renderCanvas,this.textureBuffer=new c.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas);this.valid=!0;c.Texture.frameUpdates.push(this)};c.RenderTexture.prototype=Object.create(c.Texture.prototype);c.RenderTexture.prototype.constructor=c.RenderTexture;c.RenderTexture.prototype.resize=function(a,b,e){a===this.width&&b===this.height||(this.width=this.frame.width=this.crop.width=a,this.height=this.frame.height=this.crop.height=
b,e&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===c.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height))};c.RenderTexture.prototype.clear=function(){this.renderer.type===c.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer);this.textureBuffer.clear()};c.RenderTexture.prototype.renderWebGL=function(a,b,e){var d=this.renderer.gl;
d.colorMask(!0,!0,!0,!0);d.viewport(0,0,this.width,this.height);d.bindFramebuffer(d.FRAMEBUFFER,this.textureBuffer.frameBuffer);e&&this.textureBuffer.clear();e=a.children;d=a.worldTransform;a.worldTransform=c.RenderTexture.tempMatrix;a.worldTransform.d=-1;a.worldTransform.ty=-2*this.projection.y;b&&(a.worldTransform.tx=b.x,a.worldTransform.ty-=b.y);b=0;for(var f=e.length;f>b;b++)e[b].updateTransform();c.WebGLRenderer.updateTextures();this.renderer.spriteBatch.dirty=!0;this.renderer.renderDisplayObject(a,
this.projection,this.textureBuffer.frameBuffer);a.worldTransform=d;this.renderer.spriteBatch.dirty=!0};c.RenderTexture.prototype.renderCanvas=function(a,b,e){var d=a.children,f=a.worldTransform;a.worldTransform=c.RenderTexture.tempMatrix;b?(a.worldTransform.tx=b.x,a.worldTransform.ty=b.y):(a.worldTransform.tx=0,a.worldTransform.ty=0);b=0;for(var h=d.length;h>b;b++)d[b].updateTransform();e&&this.textureBuffer.clear();e=this.textureBuffer.context;this.renderer.renderDisplayObject(a,e);e.setTransform(1,
0,0,1,0,0);a.worldTransform=f};c.RenderTexture.tempMatrix=new c.Matrix;c.AssetLoader=function(a,b){c.EventTarget.call(this);this.assetURLs=a;this.crossorigin=b;this.loadersByType={jpg:c.ImageLoader,jpeg:c.ImageLoader,png:c.ImageLoader,gif:c.ImageLoader,webp:c.ImageLoader,json:c.JsonLoader,atlas:c.AtlasLoader,anim:c.SpineLoader,xml:c.BitmapFontLoader,fnt:c.BitmapFontLoader}};c.AssetLoader.prototype.constructor=c.AssetLoader;c.AssetLoader.prototype._getDataType=function(a){if("data:"===a.slice(0,5).toLowerCase()){a=
a.slice(5);var b=a.indexOf(",");return-1===b?null:(a=a.slice(0,b).split(";")[0])&&"text/plain"!==a.toLowerCase()?a.split("/").pop().toLowerCase():"txt"}return null};c.AssetLoader.prototype.load=function(){function a(a){b.onAssetLoaded(a.content)}var b=this;this.loadCount=this.assetURLs.length;for(var c=0;c<this.assetURLs.length;c++){var d=this.assetURLs[c],f=this._getDataType(d);f||(f=d.split("?").shift().split(".").pop().toLowerCase());var h=this.loadersByType[f];if(!h)throw Error(f+" is an unsupported file type");
d=new h(d,this.crossorigin);d.addEventListener("loaded",a);d.load()}};c.AssetLoader.prototype.onAssetLoaded=function(a){this.loadCount--;this.dispatchEvent({type:"onProgress",content:this,loader:a});this.onProgress&&this.onProgress(a);this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())};c.JsonLoader=function(a,b){c.EventTarget.call(this);this.url=a;this.crossorigin=b;this.baseUrl=a.replace(/[^\/]*$/,"");this.loaded=!1};c.JsonLoader.prototype.constructor=
c.JsonLoader;c.JsonLoader.prototype.load=function(){var a=this;window.XDomainRequest&&a.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3E3,this.ajaxRequest.onerror=function(){a.onError()},this.ajaxRequest.ontimeout=function(){a.onError()},this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");this.ajaxRequest.onload=function(){a.onJSONLoaded()};this.ajaxRequest.open("GET",
this.url,!0);this.ajaxRequest.send()};c.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return this.onError(),void 0;if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var a=this,b=new c.ImageLoader(this.baseUrl+this.json.meta.image,this.crossorigin),e=this.json.frames;this.texture=b.texture.baseTexture;b.addEventListener("loaded",function(){a.onLoaded()});for(var d in e){var f=e[d].frame;if(f&&(c.TextureCache[d]=new c.Texture(this.texture,{x:f.x,
y:f.y,width:f.w,height:f.h}),c.TextureCache[d].crop=new c.Rectangle(f.x,f.y,f.w,f.h),e[d].trimmed)){var f=e[d].sourceSize,k=e[d].spriteSourceSize;c.TextureCache[d].trim=new c.Rectangle(k.x,k.y,f.w,f.h)}}b.load()}else this.json.bones&&(b=(new h.SkeletonJson).readSkeletonData(this.json),c.AnimCache[this.url]=b),this.onLoaded()};c.JsonLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",content:this})};c.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",
content:this})};c.AtlasLoader=function(a,b){c.EventTarget.call(this);this.url=a;this.baseUrl=a.replace(/[^\/]*$/,"");this.crossorigin=b;this.loaded=!1};c.AtlasLoader.constructor=c.AtlasLoader;c.AtlasLoader.prototype.load=function(){this.ajaxRequest=new c.AjaxRequest;this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this);this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json");this.ajaxRequest.send(null)};c.AtlasLoader.prototype.onAtlasLoaded=
function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};for(var a=this.ajaxRequest.responseText.split(/\r?\n/),b=-3,e=0,d=null,f=!1,h=0,k=0,w=this.onLoaded.bind(this),h=0;h<a.length;h++)if(a[h]=a[h].replace(/^\s+|\s+$/g,""),""===a[h]&&(f=h+1),0<a[h].length)f===h?(this.atlas.meta.image.push(a[h]),e=this.atlas.meta.image.length-1,this.atlas.frames.push({}),b=-3):0<b&&(1===b%7?(null!=d&&(this.atlas.frames[e][d.name]=
d),d={name:a[h],frame:{}}):(k=a[h].split(" "),3===b%7?(d.frame.x=Number(k[1].replace(",","")),d.frame.y=Number(k[2])):4===b%7?(d.frame.w=Number(k[1].replace(",","")),d.frame.h=Number(k[2])):5===b%7&&(k={x:0,y:0,w:Number(k[1].replace(",","")),h:Number(k[2])},k.w>d.frame.w||k.h>d.frame.h?(d.trimmed=!0,d.realSize=k):d.trimmed=!1))),b++;if(null!=d&&(this.atlas.frames[e][d.name]=d),0<this.atlas.meta.image.length){this.images=[];for(k=0;k<this.atlas.meta.image.length;k++)for(h in a=this.atlas.frames[k],
this.images.push(new c.ImageLoader(this.baseUrl+this.atlas.meta.image[k],this.crossorigin)),a)(b=a[h].frame)&&(c.TextureCache[h]=new c.Texture(this.images[k].texture.baseTexture,{x:b.x,y:b.y,width:b.w,height:b.h}),a[h].trimmed&&(c.TextureCache[h].realSize=a[h].realSize,c.TextureCache[h].trim.x=0,c.TextureCache[h].trim.y=0));for(k=this.currentImageId=0;k<this.images.length;k++)this.images[k].addEventListener("loaded",w);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()};
c.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))};c.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})};c.SpriteSheetLoader=function(a,b){c.EventTarget.call(this);this.url=a;this.crossorigin=b;this.baseUrl=a.replace(/[^\/]*$/,"");this.texture=null;this.frames={}};c.SpriteSheetLoader.prototype.constructor=
c.SpriteSheetLoader;c.SpriteSheetLoader.prototype.load=function(){var a=this,b=new c.JsonLoader(this.url,this.crossorigin);b.addEventListener("loaded",function(b){a.json=b.content.json;a.onLoaded()});b.load()};c.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};c.ImageLoader=function(a,b){c.EventTarget.call(this);this.texture=c.Texture.fromImage(a,b);this.frames=[]};c.ImageLoader.prototype.constructor=c.ImageLoader;c.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();
else{var a=this;this.texture.baseTexture.addEventListener("loaded",function(){a.onLoaded()})}};c.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};c.ImageLoader.prototype.loadFramedSpriteSheet=function(a,b,e){this.frames=[];for(var d=Math.floor(this.texture.width/a),f=Math.floor(this.texture.height/b),h=0,k=0;f>k;k++)for(var w=0;d>w;w++,h++){var t=new c.Texture(this.texture,{x:w*a,y:k*b,width:a,height:b});this.frames.push(t);e&&(c.TextureCache[e+"-"+h]=t)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();
else{var s=this;this.texture.baseTexture.addEventListener("loaded",function(){s.onLoaded()})}};c.BitmapFontLoader=function(a,b){c.EventTarget.call(this);this.url=a;this.crossorigin=b;this.baseUrl=a.replace(/[^\/]*$/,"");this.texture=null};c.BitmapFontLoader.prototype.constructor=c.BitmapFontLoader;c.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new c.AjaxRequest;var a=this;this.ajaxRequest.onreadystatechange=function(){a.onXMLLoaded()};this.ajaxRequest.open("GET",this.url,!0);this.ajaxRequest.overrideMimeType&&
this.ajaxRequest.overrideMimeType("application/xml");this.ajaxRequest.send(null)};c.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var a=this.ajaxRequest.responseXML;if(!a||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser)a=(new DOMParser).parseFromString(this.ajaxRequest.responseText,"text/xml");else{var b=document.createElement("div");
b.innerHTML=this.ajaxRequest.responseText;a=b}b=this.baseUrl+a.getElementsByTagName("page")[0].getAttribute("file");b=new c.ImageLoader(b,this.crossorigin);this.texture=b.texture.baseTexture;var e={},d=a.getElementsByTagName("info")[0],f=a.getElementsByTagName("common")[0];e.font=d.getAttribute("face");e.size=parseInt(d.getAttribute("size"),10);e.lineHeight=parseInt(f.getAttribute("lineHeight"),10);e.chars={};f=a.getElementsByTagName("char");for(d=0;d<f.length;d++){var h=parseInt(f[d].getAttribute("id"),
10),k=new c.Rectangle(parseInt(f[d].getAttribute("x"),10),parseInt(f[d].getAttribute("y"),10),parseInt(f[d].getAttribute("width"),10),parseInt(f[d].getAttribute("height"),10));e.chars[h]={xOffset:parseInt(f[d].getAttribute("xoffset"),10),yOffset:parseInt(f[d].getAttribute("yoffset"),10),xAdvance:parseInt(f[d].getAttribute("xadvance"),10),kerning:{},texture:c.TextureCache[h]=new c.Texture(this.texture,k)}}a=a.getElementsByTagName("kerning");for(d=0;d<a.length;d++)f=parseInt(a[d].getAttribute("first"),
10),h=parseInt(a[d].getAttribute("second"),10),k=parseInt(a[d].getAttribute("amount"),10),e.chars[h].kerning[f]=k;c.BitmapText.fonts[e.font]=e;var w=this;b.addEventListener("loaded",function(){w.onLoaded()});b.load()}};c.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})};c.SpineLoader=function(a,b){c.EventTarget.call(this);this.url=a;this.crossorigin=b;this.loaded=!1};c.SpineLoader.prototype.constructor=c.SpineLoader;c.SpineLoader.prototype.load=function(){var a=
this,b=new c.JsonLoader(this.url,this.crossorigin);b.addEventListener("loaded",function(b){a.json=b.content.json;a.onLoaded()});b.load()};c.SpineLoader.prototype.onLoaded=function(){this.loaded=!0;this.dispatchEvent({type:"loaded",content:this})};c.AbstractFilter=function(a,b){this.passes=[this];this.shaders=[];this.dirty=!0;this.padding=0;this.uniforms=b||{};this.fragmentSrc=a||[]};c.AlphaMaskFilter=function(a){c.AbstractFilter.call(this);this.passes=[this];a.baseTexture._powerOf2=!0;this.uniforms=
{mask:{type:"sampler2D",value:a},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};a.baseTexture.hasLoaded?(this.uniforms.mask.value.x=a.width,this.uniforms.mask.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;",
"uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]};c.AlphaMaskFilter.prototype=Object.create(c.AbstractFilter.prototype);
c.AlphaMaskFilter.prototype.constructor=c.AlphaMaskFilter;c.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height;this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)};Object.defineProperty(c.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}});c.ColorMatrixFilter=function(){c.AbstractFilter.call(this);
this.passes=[this];this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]};c.ColorMatrixFilter.prototype=Object.create(c.AbstractFilter.prototype);c.ColorMatrixFilter.prototype.constructor=c.ColorMatrixFilter;Object.defineProperty(c.ColorMatrixFilter.prototype,
"matrix",{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=a}});c.GrayFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={gray:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);",
"}"]};c.GrayFilter.prototype=Object.create(c.AbstractFilter.prototype);c.GrayFilter.prototype.constructor=c.GrayFilter;Object.defineProperty(c.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}});c.DisplacementFilter=function(a){c.AbstractFilter.call(this);this.passes=[this];a.baseTexture._powerOf2=!0;this.uniforms={displacementMap:{type:"sampler2D",value:a},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},
mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}};a.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=a.width,this.uniforms.mapDimensions.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction));this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;",
"uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);",
"   vec2 cord = vTextureCoord;","}"]};c.DisplacementFilter.prototype=Object.create(c.AbstractFilter.prototype);c.DisplacementFilter.prototype.constructor=c.DisplacementFilter;c.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width;this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height;this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)};Object.defineProperty(c.DisplacementFilter.prototype,
"map",{get:function(){return this.uniforms.displacementMap.value},set:function(a){this.uniforms.displacementMap.value=a}});Object.defineProperty(c.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}});Object.defineProperty(c.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}});c.PixelateFilter=function(){c.AbstractFilter.call(this);this.passes=
[this];this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1E4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;",
"   gl_FragColor = texture2D(uSampler, color);","}"]};c.PixelateFilter.prototype=Object.create(c.AbstractFilter.prototype);c.PixelateFilter.prototype.constructor=c.PixelateFilter;Object.defineProperty(c.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.dirty=!0;this.uniforms.pixelSize.value=a}});c.BlurXFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;",
"varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]};c.BlurXFilter.prototype=Object.create(c.AbstractFilter.prototype);
c.BlurXFilter.prototype.constructor=c.BlurXFilter;Object.defineProperty(c.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(a){this.dirty=!0;this.uniforms.blur.value=1/7E3*a}});c.BlurYFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {",
"   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;",
"   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]};c.BlurYFilter.prototype=Object.create(c.AbstractFilter.prototype);c.BlurYFilter.prototype.constructor=c.BlurYFilter;Object.defineProperty(c.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/
(1/7E3)},set:function(a){this.uniforms.blur.value=1/7E3*a}});c.BlurFilter=function(){this.blurXFilter=new c.BlurXFilter;this.blurYFilter=new c.BlurYFilter;this.passes=[this.blurXFilter,this.blurYFilter]};Object.defineProperty(c.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}});Object.defineProperty(c.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=
a}});Object.defineProperty(c.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}});c.InvertFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={invert:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);",
"}"]};c.InvertFilter.prototype=Object.create(c.AbstractFilter.prototype);c.InvertFilter.prototype.constructor=c.InvertFilter;Object.defineProperty(c.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}});c.SepiaFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={sepia:{type:"1f",value:1}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;",
"uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]};c.SepiaFilter.prototype=Object.create(c.AbstractFilter.prototype);c.SepiaFilter.prototype.constructor=c.SepiaFilter;Object.defineProperty(c.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},
set:function(a){this.uniforms.sepia.value=a}});c.TwistFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;",
"   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]};c.TwistFilter.prototype=Object.create(c.AbstractFilter.prototype);c.TwistFilter.prototype.constructor=c.TwistFilter;Object.defineProperty(c.TwistFilter.prototype,
"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.dirty=!0;this.uniforms.offset.value=a}});Object.defineProperty(c.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(a){this.dirty=!0;this.uniforms.radius.value=a}});Object.defineProperty(c.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0;this.uniforms.angle.value=a}});c.ColorStepFilter=function(){c.AbstractFilter.call(this);
this.passes=[this];this.uniforms={step:{type:"1f",value:5}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]};c.ColorStepFilter.prototype=Object.create(c.AbstractFilter.prototype);c.ColorStepFilter.prototype.constructor=c.ColorStepFilter;Object.defineProperty(c.ColorStepFilter.prototype,
"step",{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}});c.DotScreenFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {",
"   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]};c.DotScreenFilter.prototype=Object.create(c.AbstractFilter.prototype);
c.DotScreenFilter.prototype.constructor=c.DotScreenFilter;Object.defineProperty(c.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.dirty=!0;this.uniforms.scale.value=a}});Object.defineProperty(c.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0;this.uniforms.angle.value=a}});c.CrossHatchFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={blur:{type:"1f",
value:1/512}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {",
"            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]};c.CrossHatchFilter.prototype=Object.create(c.AbstractFilter.prototype);c.CrossHatchFilter.prototype.constructor=
c.BlurYFilter;Object.defineProperty(c.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(a){this.uniforms.blur.value=1/7E3*a}});c.RGBSplitFilter=function(){c.AbstractFilter.call(this);this.passes=[this];this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}};this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;",
"uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]};c.RGBSplitFilter.prototype=Object.create(c.AbstractFilter.prototype);
c.RGBSplitFilter.prototype.constructor=c.RGBSplitFilter;Object.defineProperty(c.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7E3)},set:function(a){this.uniforms.blur.value=1/7E3*a}});"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.PIXI=c):"undefined"!=typeof define&&define.amd?define(c):this.PIXI=c}).call(this);this.createjs=this.createjs||{};
(function(){var c=createjs.SoundJS=createjs.SoundJS||{};c.version="0.5.2";c.buildDate="Thu, 12 Dec 2013 23:33:37 GMT"})();this.createjs=this.createjs||{};
(function(){var c=function(){},d=c.prototype;c.initialize=function(c){c.addEventListener=d.addEventListener;c.on=d.on;c.removeEventListener=c.off=d.removeEventListener;c.removeAllEventListeners=d.removeAllEventListeners;c.hasEventListener=d.hasEventListener;c.dispatchEvent=d.dispatchEvent;c._dispatchEvent=d._dispatchEvent;c.willTrigger=d.willTrigger};d._listeners=null;d._captureListeners=null;d.initialize=function(){};d.addEventListener=function(c,d,h){var a;a=h?this._captureListeners=this._captureListeners||
{}:this._listeners=this._listeners||{};var b=a[c];return b&&this.removeEventListener(c,d,h),b=a[c],b?b.push(d):a[c]=[d],d};d.on=function(c,d,h,a,b,e){return d.handleEvent&&(h=h||d,d=d.handleEvent),h=h||this,this.addEventListener(c,function(c){d.call(h,c,b);a&&c.remove()},e)};d.removeEventListener=function(c,d,h){if(h=h?this._captureListeners:this._listeners){var a=h[c];if(a)for(var b=0,e=a.length;e>b;b++)if(a[b]==d){1==e?delete h[c]:a.splice(b,1);break}}};d.off=d.removeEventListener;d.removeAllEventListeners=
function(c){c?(this._listeners&&delete this._listeners[c],this._captureListeners&&delete this._captureListeners[c]):this._listeners=this._captureListeners=null};d.dispatchEvent=function(c,d){if("string"==typeof c){var h=this._listeners;if(!h||!h[c])return!1;c=new createjs.Event(c)}if(c.target=d||this,c.bubbles&&this.parent){for(var a=this,h=[a];a.parent;)h.push(a=a.parent);for(var b=h.length,a=b-1;0<=a&&!c.propagationStopped;a--)h[a]._dispatchEvent(c,1+(0==a));for(a=1;b>a&&!c.propagationStopped;a++)h[a]._dispatchEvent(c,
3)}else this._dispatchEvent(c,2);return c.defaultPrevented};d.hasEventListener=function(c){var d=this._listeners,h=this._captureListeners;return!!(d&&d[c]||h&&h[c])};d.willTrigger=function(c){for(var d=this;d;){if(d.hasEventListener(c))return!0;d=d.parent}return!1};d.toString=function(){return"[EventDispatcher]"};d._dispatchEvent=function(c,d){var h,a=1==d?this._captureListeners:this._listeners;if(c&&a&&(a=a[c.type])&&(h=a.length)){c.currentTarget=this;c.eventPhase=d;c.removed=!1;for(var a=a.slice(),
b=0;h>b&&!c.immediatePropagationStopped;b++){var e=a[b];e.handleEvent?e.handleEvent(c):e(c);c.removed&&(this.off(c.type,e,1==d),c.removed=!1)}}};createjs.EventDispatcher=c})();this.createjs=this.createjs||{};
(function(){var c=function(c,d,h){this.initialize(c,d,h)},d=c.prototype;d.type=null;d.target=null;d.currentTarget=null;d.eventPhase=0;d.bubbles=!1;d.cancelable=!1;d.timeStamp=0;d.defaultPrevented=!1;d.propagationStopped=!1;d.immediatePropagationStopped=!1;d.removed=!1;d.initialize=function(c,d,h){this.type=c;this.bubbles=d;this.cancelable=h;this.timeStamp=(new Date).getTime()};d.preventDefault=function(){this.defaultPrevented=!0};d.stopPropagation=function(){this.propagationStopped=!0};d.stopImmediatePropagation=
function(){this.immediatePropagationStopped=this.propagationStopped=!0};d.remove=function(){this.removed=!0};d.clone=function(){return new c(this.type,this.bubbles,this.cancelable)};d.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=c})();this.createjs=this.createjs||{};(function(){createjs.indexOf=function(c,d){for(var f=0,k=c.length;k>f;f++)if(d===c[f])return f;return-1}})();this.createjs=this.createjs||{};
(function(){createjs.proxy=function(c,d){var f=Array.prototype.slice.call(arguments,2);return function(){return c.apply(d,Array.prototype.slice.call(arguments,0).concat(f))}}})();this.createjs=this.createjs||{};
(function(){function c(){throw"Sound cannot be instantiated";}function d(c,a){this.init(c,a)}function f(){}c.DELIMITER="|";c.INTERRUPT_ANY="any";c.INTERRUPT_EARLY="early";c.INTERRUPT_LATE="late";c.INTERRUPT_NONE="none";c.PLAY_INITED="playInited";c.PLAY_SUCCEEDED="playSucceeded";c.PLAY_INTERRUPTED="playInterrupted";c.PLAY_FINISHED="playFinished";c.PLAY_FAILED="playFailed";c.SUPPORTED_EXTENSIONS="mp3 ogg mpeg wav m4a mp4 aiff wma mid".split(" ");c.EXTENSION_MAP={m4a:"mp4"};c.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/;
c.defaultInterruptBehavior=c.INTERRUPT_NONE;c.alternateExtensions=[];c._lastID=0;c.activePlugin=null;c._pluginsRegistered=!1;c._masterVolume=1;c._masterMute=!1;c._instances=[];c._idHash={};c._preloadHash={};c._defaultSoundInstance=null;c.addEventListener=null;c.removeEventListener=null;c.removeAllEventListeners=null;c.dispatchEvent=null;c.hasEventListener=null;c._listeners=null;createjs.EventDispatcher.initialize(c);c._sendFileLoadEvent=function(d){if(c._preloadHash[d])for(var a=0,b=c._preloadHash[d].length;b>
a;a++){var e=c._preloadHash[d][a];if(c._preloadHash[d][a]=!0,c.hasEventListener("fileload")){var f=new createjs.Event("fileload");f.src=e.src;f.id=e.id;f.data=e.data;c.dispatchEvent(f)}}};c.getPreloadHandlers=function(){return{callback:createjs.proxy(c.initLoad,c),types:["sound"],extensions:c.SUPPORTED_EXTENSIONS}};c.registerPlugin=function(d){try{console.log("createjs.Sound.registerPlugin has been deprecated. Please use registerPlugins.")}catch(a){}return c._registerPlugin(d)};c._registerPlugin=
function(d){return c._pluginsRegistered=!0,null==d?!1:d.isSupported()?(c.activePlugin=new d,!0):!1};c.registerPlugins=function(d){for(var a=0,b=d.length;b>a;a++)if(c._registerPlugin(d[a]))return!0;return!1};c.initializeDefaultPlugins=function(){return null!=c.activePlugin?!0:c._pluginsRegistered?!1:c.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1};c.isReady=function(){return null!=c.activePlugin};c.getCapabilities=function(){return null==c.activePlugin?null:c.activePlugin._capabilities};
c.getCapability=function(d){return null==c.activePlugin?null:c.activePlugin._capabilities[d]};c.initLoad=function(d,a,b,e,f){d=d.replace(f,"");d=c.registerSound(d,b,e,!1,f);return null==d?!1:d};c.registerSound=function(f,a,b,e,g){if(!c.initializeDefaultPlugins())return!1;var k=(f instanceof Object&&(g=a,a=f.id,b=f.data,f=f.src),c.alternateExtensions.length)?c._parsePath2(f,"sound",a,b):c._parsePath(f,"sound",a,b);if(null==k)return!1;null!=g&&(f=g+f,k.src=g+k.src);null!=a&&(c._idHash[a]=k.src);g=null;
null!=b&&(isNaN(b.channels)?isNaN(b)||(g=parseInt(b)):g=parseInt(b.channels));var q=c.activePlugin.register(k.src,g);if(null!=q&&(null!=q.numChannels&&(g=q.numChannels),d.create(k.src,g),null!=b&&isNaN(b)?b.channels=k.data.channels=g||d.maxPerChannel():b=k.data=g||d.maxPerChannel(),null!=q.tag?k.tag=q.tag:q.src&&(k.src=q.src),null!=q.completeHandler&&(k.completeHandler=q.completeHandler),q.type&&(k.type=q.type)),0!=e)if(c._preloadHash[k.src]||(c._preloadHash[k.src]=[]),c._preloadHash[k.src].push({src:f,
id:a,data:b}),1==c._preloadHash[k.src].length)c.activePlugin.preload(k.src,q);else if(1==c._preloadHash[k.src][0])return!0;return k};c.registerManifest=function(c,a){for(var b=[],e=0,d=c.length;d>e;e++)b[e]=createjs.Sound.registerSound(c[e].src,c[e].id,c[e].data,c[e].preload,a);return b};c.removeSound=function(f,a){if(null==c.activePlugin)return!1;var b=(f instanceof Object&&(f=f.src),f=c._getSrcById(f),c.alternateExtensions.length)?c._parsePath2(f):c._parsePath(f);if(null==b)return!1;null!=a&&(b.src=
a+b.src);f=b.src;for(var e in c._idHash)c._idHash[e]==f&&delete c._idHash[e];return d.removeSrc(f),delete c._preloadHash[f],c.activePlugin.removeSound(f),!0};c.removeManifest=function(c,a){for(var b=[],e=0,d=c.length;d>e;e++)b[e]=createjs.Sound.removeSound(c[e].src,a);return b};c.removeAllSounds=function(){c._idHash={};c._preloadHash={};d.removeAll();c.activePlugin.removeAllSounds()};c.loadComplete=function(d){var a=c.alternateExtensions.length?c._parsePath2(d,"sound"):c._parsePath(d,"sound");return d=
a?c._getSrcById(a.src):c._getSrcById(d),1==c._preloadHash[d][0]};c._parsePath=function(d,a,b,e){"string"!=typeof d&&(d=d.toString());d=d.split(c.DELIMITER);if(1<d.length)try{console.log('createjs.Sound.DELIMITER "|" loading approach has been deprecated. Please use the new alternateExtensions property.')}catch(f){}a={type:a||"sound",id:b,data:e};b=c.getCapabilities();e=0;for(var k=d.length;k>e;e++){var q=d[e],n=q.match(c.FILE_PATTERN);if(null==n)return!1;var w=n[4],n=n[5];if(b[n]&&-1<createjs.indexOf(c.SUPPORTED_EXTENSIONS,
n))return a.name=w,a.src=q,a.extension=n,a}return null};c._parsePath2=function(d,a,b,e){"string"!=typeof d&&(d=d.toString());var f=d.match(c.FILE_PATTERN);if(null==f)return!1;for(var k=f[4],q=f[5],n=c.getCapabilities(),w=0;!n[q];)if(q=c.alternateExtensions[w++],w>c.alternateExtensions.length)return null;d=d.replace("."+f[5],"."+q);a={type:a||"sound",id:b,data:e};return a.name=k,a.src=d,a.extension=q,a};c.play=function(d,a,b,e,f,k,q){d=c.createInstance(d);return c._playInstance(d,a,b,e,f,k,q)||d.playFailed(),
d};c.createInstance=function(f){if(!c.initializeDefaultPlugins())return c._defaultSoundInstance;var a=(f=c._getSrcById(f),c.alternateExtensions.length)?c._parsePath2(f,"sound"):c._parsePath(f,"sound");f=null;return null!=a&&null!=a.src?(d.create(a.src),f=c.activePlugin.create(a.src)):f=c._defaultSoundInstance,f.uniqueId=c._lastID++,f};c.setVolume=function(d){if(null==Number(d))return!1;if(d=Math.max(0,Math.min(1,d)),c._masterVolume=d,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(d))for(var a=
this._instances,b=0,e=a.length;e>b;b++)a[b].setMasterVolume(d)};c.getVolume=function(){return c._masterVolume};c.setMute=function(c){if(null==c||void 0==c)return!1;if(this._masterMute=c,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(c))for(var a=this._instances,b=0,d=a.length;d>b;b++)a[b].setMasterMute(c);return!0};c.getMute=function(){return this._masterMute};c.stop=function(){for(var c=this._instances,a=c.length;a--;)c[a].stop()};c._playInstance=function(d,a,b,e,f,k,
q){if(a instanceof Object&&(b=a.delay,e=a.offset,f=a.loop,k=a.volume,q=a.pan,a=a.interrupt),a=a||c.defaultInterruptBehavior,null==b&&(b=0),null==e&&(e=d.getPosition()),null==f&&(f=0),null==k&&(k=d.volume),null==q&&(q=d.pan),0==b){if(!c._beginPlaying(d,a,e,f,k,q))return!1}else b=setTimeout(function(){c._beginPlaying(d,a,e,f,k,q)},b),d._delayTimeoutId=b;return this._instances.push(d),!0};c._beginPlaying=function(c,a,b,e,f,k){return d.add(c,a)?c._beginPlaying(b,e,f,k)?!0:(c=createjs.indexOf(this._instances,
c),-1<c&&this._instances.splice(c,1),!1):!1};c._getSrcById=function(d){return null==c._idHash||null==c._idHash[d]?d:c._idHash[d]};c._playFinished=function(c){d.remove(c);c=createjs.indexOf(this._instances,c);-1<c&&this._instances.splice(c,1)};createjs.Sound=c;d.channels={};d.create=function(c,a){return null==d.get(c)?(d.channels[c]=new d(c,a),!0):!1};d.removeSrc=function(c){var a=d.get(c);return null==a?!1:(a.removeAll(),delete d.channels[c],!0)};d.removeAll=function(){for(var c in d.channels)d.channels[c].removeAll();
d.channels={}};d.add=function(c,a){var b=d.get(c.src);return null==b?!1:b.add(c,a)};d.remove=function(c){var a=d.get(c.src);return null==a?!1:(a.remove(c),!0)};d.maxPerChannel=function(){return k.maxDefault};d.get=function(c){return d.channels[c]};var k=d.prototype;k.src=null;k.max=null;k.maxDefault=100;k.length=0;k.init=function(c,a){this.src=c;this.max=a||this.maxDefault;-1==this.max&&(this.max=this.maxDefault);this._instances=[]};k.get=function(c){return this._instances[c]};k.add=function(c,a){return this.getSlot(a,
c)?(this._instances.push(c),this.length++,!0):!1};k.remove=function(c){c=createjs.indexOf(this._instances,c);return-1==c?!1:(this._instances.splice(c,1),this.length--,!0)};k.removeAll=function(){for(var c=this.length-1;0<=c;c--)this._instances[c].stop()};k.getSlot=function(d){for(var a,b,e=0,f=this.max;f>e;e++){if(a=this.get(e),null==a)return!0;(d!=c.INTERRUPT_NONE||a.playState==c.PLAY_FINISHED)&&(0!=e?a.playState==c.PLAY_FINISHED||a.playState==c.PLAY_INTERRUPTED||a.playState==c.PLAY_FAILED?b=a:(d==
c.INTERRUPT_EARLY&&a.getPosition()<b.getPosition()||d==c.INTERRUPT_LATE&&a.getPosition()>b.getPosition())&&(b=a):b=a)}return null!=b?(b._interrupt(),this.remove(b),!0):!1};k.toString=function(){return"[Sound SoundChannel]"};c._defaultSoundInstance=new function(){this.isDefault=!0;this.addEventListener=this.removeEventListener=this.removeAllEventListeners=this.dispatchEvent=this.hasEventListener=this._listeners=this._interrupt=this._playFailed=this.pause=this.resume=this.play=this._beginPlaying=this._cleanUp=
this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1};this.getVolume=this.getPan=this.getDuration=function(){return 0};this.playState=c.PLAY_FAILED;this.toString=function(){return"[Sound Default Sound Instance]"}};f.init=function(){var c=window.navigator.userAgent;f.isFirefox=-1<c.indexOf("Firefox");f.isOpera=null!=window.opera;f.isChrome=-1<c.indexOf("Chrome");f.isIOS=-1<c.indexOf("iPod")||
-1<c.indexOf("iPhone")||-1<c.indexOf("iPad");f.isAndroid=-1<c.indexOf("Android");f.isBlackberry=-1<c.indexOf("Blackberry")};f.init();createjs.Sound.BrowserDetect=f})();this.createjs=this.createjs||{};
(function(){function c(){this._init()}c._capabilities=null;c.isSupported=function(){var d=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;return"file:"!=location.protocol||d||this._isFileXHRSupported()?(c._generateCapabilities(),null==c.context?!1:!0):!1};c._isFileXHRSupported=function(){var c=!0,d=new XMLHttpRequest;try{d.open("GET","fail.fail",!1)}catch(h){return c=!1}d.onerror=function(){c=!1};d.onload=function(){c=404==this.status||
200==this.status||0==this.status&&""!=this.response};try{d.send()}catch(a){c=!1}return c};c._generateCapabilities=function(){if(null==c._capabilities){var d=document.createElement("audio");if(null==d.canPlayType)return null;if(window.webkitAudioContext)c.context=new webkitAudioContext;else{if(!window.AudioContext)return null;c.context=new AudioContext}c._compatibilitySetUp();c.playEmptySound();c._capabilities={panning:!0,volume:!0,tracks:-1};for(var k=createjs.Sound.SUPPORTED_EXTENSIONS,h=createjs.Sound.EXTENSION_MAP,
a=0,b=k.length;b>a;a++){var e=k[a],g=h[e]||e;c._capabilities[e]="no"!=d.canPlayType("audio/"+e)&&""!=d.canPlayType("audio/"+e)||"no"!=d.canPlayType("audio/"+g)&&""!=d.canPlayType("audio/"+g)}2>c.context.destination.numberOfChannels&&(c._capabilities.panning=!1);c.dynamicsCompressorNode=c.context.createDynamicsCompressor();c.dynamicsCompressorNode.connect(c.context.destination);c.gainNode=c.context.createGain();c.gainNode.connect(c.dynamicsCompressorNode)}};c._compatibilitySetUp=function(){if(!c.context.createGain){c.context.createGain=
c.context.createGainNode;var d=c.context.createBufferSource();d.__proto__.start=d.__proto__.noteGrainOn;d.__proto__.stop=d.__proto__.noteOff;this._panningModel=0}};c.playEmptySound=function(){var c=this.context.createBuffer(1,1,22050),d=this.context.createBufferSource();d.buffer=c;d.connect(this.context.destination);d.start(0,0,0)};var d=c.prototype;d._capabilities=null;d._volume=1;d.context=null;d._panningModel="equalpower";d.dynamicsCompressorNode=null;d.gainNode=null;d._arrayBuffers=null;d._init=
function(){this._capabilities=c._capabilities;this._arrayBuffers={};this.context=c.context;this.gainNode=c.gainNode;this.dynamicsCompressorNode=c.dynamicsCompressorNode};d.register=function(c){this._arrayBuffers[c]=!0;return{tag:new createjs.WebAudioPlugin.Loader(c,this)}};d.isPreloadStarted=function(c){return null!=this._arrayBuffers[c]};d.isPreloadComplete=function(c){return!(null==this._arrayBuffers[c]||1==this._arrayBuffers[c])};d.removeSound=function(c){delete this._arrayBuffers[c]};d.removeAllSounds=
function(){this._arrayBuffers={}};d.addPreloadResults=function(c,d){this._arrayBuffers[c]=d};d._handlePreloadComplete=function(){createjs.Sound._sendFileLoadEvent(this.src)};d.preload=function(c){this._arrayBuffers[c]=!0;c=new createjs.WebAudioPlugin.Loader(c,this);c.onload=this._handlePreloadComplete;c.load()};d.create=function(c){return this.isPreloadStarted(c)||this.preload(c),new createjs.WebAudioPlugin.SoundInstance(c,this)};d.setVolume=function(c){return this._volume=c,this._updateVolume(),
!0};d._updateVolume=function(){var c=createjs.Sound._masterMute?0:this._volume;c!=this.gainNode.gain.value&&(this.gainNode.gain.value=c)};d.getVolume=function(){return this._volume};d.setMute=function(){return this._updateVolume(),!0};d.toString=function(){return"[WebAudioPlugin]"};createjs.WebAudioPlugin=c})();
(function(){function c(c,a){this._init(c,a)}var d=c.prototype=new createjs.EventDispatcher;d.src=null;d.uniqueId=-1;d.playState=null;d._owner=null;d._offset=0;d._delay=0;d._volume=1;try{Object.defineProperty(d,"volume",{get:function(){return this._volume},set:function(c){return null==Number(c)?!1:(c=Math.max(0,Math.min(1,c)),this._volume=c,this._updateVolume(),void 0)}})}catch(f){}d._pan=0;try{Object.defineProperty(d,"pan",{get:function(){return this._pan},set:function(c){return this._owner._capabilities.panning&&
null!=Number(c)?(c=Math.max(-1,Math.min(1,c)),this._pan=c,this.panNode.setPosition(c,0,-.5),void 0):!1}})}catch(k){}d._duration=0;d._remainingLoops=0;d._delayTimeoutId=null;d._soundCompleteTimeout=null;d.gainNode=null;d.panNode=null;d.sourceNode=null;d._sourceNodeNext=null;d._muted=!1;d._paused=!1;d._startTime=0;d._endedHandler=null;d._sendEvent=function(c){c=new createjs.Event(c);this.dispatchEvent(c)};d._init=function(c,a){this._owner=a;this.src=c;this.gainNode=this._owner.context.createGain();
this.panNode=this._owner.context.createPanner();this.panNode.panningModel=this._owner._panningModel;this.panNode.connect(this.gainNode);this._owner.isPreloadComplete(this.src)&&(this._duration=1E3*this._owner._arrayBuffers[this.src].duration);this._endedHandler=createjs.proxy(this._handleSoundComplete,this)};d._cleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext));
0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0);clearTimeout(this._delayTimeoutId);clearTimeout(this._soundCompleteTimeout);this._startTime=0;null!=window.createjs&&createjs.Sound._playFinished(this)};d._cleanUpAudioNode=function(c){return c&&(c.stop(0),c.disconnect(this.panNode),c=null),c};d._interrupt=function(){this._cleanUp();this.playState=createjs.Sound.PLAY_INTERRUPTED;this._paused=!1;this._sendEvent("interrupted")};d._handleSoundReady=function(){if(null!=window.createjs){if(1E3*
this._offset>this.getDuration())return this.playFailed(),void 0;0>this._offset&&(this._offset=0);this.playState=createjs.Sound.PLAY_SUCCEEDED;this._paused=!1;this.gainNode.connect(this._owner.gainNode);var c=this._owner._arrayBuffers[this.src].duration;this.sourceNode=this._createAndPlayAudioNode(this._owner.context.currentTime-c,this._offset);this._duration=1E3*c;this._startTime=this.sourceNode.startTime-this._offset;this._soundCompleteTimeout=setTimeout(this._endedHandler,1E3*(c-this._offset));
0!=this._remainingLoops&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0))}};d._createAndPlayAudioNode=function(c,a){var b=this._owner.context.createBufferSource();return b.buffer=this._owner._arrayBuffers[this.src],b.connect(this.panNode),this._owner.context.currentTime,b.startTime=c+b.buffer.duration,b.start(b.startTime,a,b.buffer.duration-a),b};d.play=function(c,a,b,d,f,k){this._cleanUp();createjs.Sound._playInstance(this,c,a,b,d,f,k)};d._beginPlaying=function(c,a,b,d){return null!=
window.createjs&&this.src?(this._offset=c/1E3,this._remainingLoops=a,this.volume=b,this.pan=d,this._owner.isPreloadComplete(this.src)?(this._handleSoundReady(null),this._sendEvent("succeeded"),1):(this.playFailed(),void 0)):void 0};d.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this._paused=!0,this._offset=this._owner.context.currentTime-this._startTime,this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&
this.gainNode.disconnect(),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),!0)};d.resume=function(){return this._paused?(this._handleSoundReady(null),!0):!1};d.stop=function(){return this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,!0};d.setVolume=function(c){return this.volume=c,!0};d._updateVolume=function(){var c=this._muted?0:this._volume;return c!=this.gainNode.gain.value?(this.gainNode.gain.value=c,!0):!1};d.getVolume=function(){return this.volume};
d.setMute=function(c){return null==c||void 0==c?!1:(this._muted=c,this._updateVolume(),!0)};d.getMute=function(){return this._muted};d.setPan=function(c){return this.pan=c,this.pan!=c?!1:void 0};d.getPan=function(){return this.pan};d.getPosition=function(){return 1E3*(this._paused||null==this.sourceNode?this._offset:this._owner.context.currentTime-this._startTime)};d.setPosition=function(c){return this._offset=c/1E3,this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._cleanUpAudioNode(this.sourceNode),
this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout)),this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||this._handleSoundReady(null),!0};d.getDuration=function(){return this._duration};d._handleSoundComplete=function(){return this._offset=0,0!=this._remainingLoops?(this._remainingLoops--,this._sourceNodeNext?(this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._startTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,
0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)):this._handleSoundReady(null),this._sendEvent("loop"),void 0):(null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")),void 0)};d.playFailed=function(){null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed"))};d.toString=function(){return"[WebAudioPlugin SoundInstance]"};createjs.WebAudioPlugin.SoundInstance=c})();
(function(){function c(c,d){this._init(c,d)}var d=c.prototype;d.request=null;d.owner=null;d.progress=-1;d.src=null;d.originalSrc=null;d.result=null;d.onload=null;d.onprogress=null;d.onError=null;d._init=function(c,d){this.originalSrc=this.src=c;this.owner=d};d.load=function(c){null!=c&&(this.src=c);this.request=new XMLHttpRequest;this.request.open("GET",this.src,!0);this.request.responseType="arraybuffer";this.request.onload=createjs.proxy(this.handleLoad,this);this.request.onError=createjs.proxy(this.handleError,
this);this.request.onprogress=createjs.proxy(this.handleProgress,this);this.request.send()};d.handleProgress=function(c,d){this.progress=c/d;null!=this.onprogress&&this.onprogress({loaded:c,total:d,progress:this.progress})};d.handleLoad=function(){this.owner.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))};d.handleAudioDecoded=function(c){this.progress=1;this.result=c;this.src=this.originalSrc;this.owner.addPreloadResults(this.src,
this.result);this.onload&&this.onload()};d.handleError=function(c){this.owner.removeSound(this.src);this.onerror&&this.onerror(c)};d.toString=function(){return"[WebAudioPlugin Loader]"};createjs.WebAudioPlugin.Loader=c})();this.createjs=this.createjs||{};
(function(){function c(){this._init()}c.MAX_INSTANCES=30;c._AUDIO_READY="canplaythrough";c._AUDIO_ENDED="ended";c._AUDIO_SEEKED="seeked";c._AUDIO_STALLED="stalled";c._capabilities=null;c.enableIOS=!1;c.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!c.enableIOS)return!1;c._generateCapabilities();return null==c.tag||null==c._capabilities?!1:!0};c._generateCapabilities=function(){if(null==c._capabilities){var d=c.tag=document.createElement("audio");if(null==d.canPlayType)return null;
c._capabilities={panning:!0,volume:!0,tracks:-1};for(var k=createjs.Sound.SUPPORTED_EXTENSIONS,h=createjs.Sound.EXTENSION_MAP,a=0,b=k.length;b>a;a++){var e=k[a],g=h[e]||e;c._capabilities[e]="no"!=d.canPlayType("audio/"+e)&&""!=d.canPlayType("audio/"+e)||"no"!=d.canPlayType("audio/"+g)&&""!=d.canPlayType("audio/"+g)}}};var d=c.prototype;d._capabilities=null;d._audioSources=null;d.defaultNumChannels=2;d.loadedHandler=null;d._init=function(){this._capabilities=c._capabilities;this._audioSources={}};
d.register=function(c,d){this._audioSources[c]=!0;for(var h=createjs.HTMLAudioPlugin.TagPool.get(c),a=null,b=d||this.defaultNumChannels,e=0;b>e;e++)a=this._createTag(c),h.add(a);if(a.id=c,this.loadedHandler=createjs.proxy(this._handleTagLoad,this),a.addEventListener&&a.addEventListener("canplaythrough",this.loadedHandler),null==a.onreadystatechange)a.onreadystatechange=this.loadedHandler;else{var g=a.onreadystatechange;a.onreadystatechange=function(){g();this.loadedHandler()}}return{tag:a,numChannels:b}};
d._handleTagLoad=function(c){c.target.removeEventListener&&c.target.removeEventListener("canplaythrough",this.loadedHandler);c.target.onreadystatechange=null;c.target.src!=c.target.id&&createjs.HTMLAudioPlugin.TagPool.checkSrc(c.target.id)};d._createTag=function(c){var d=document.createElement("audio");return d.autoplay=!1,d.preload="none",d.src=c,d};d.removeSound=function(c){delete this._audioSources[c];createjs.HTMLAudioPlugin.TagPool.remove(c)};d.removeAllSounds=function(){this._audioSources={};
createjs.HTMLAudioPlugin.TagPool.removeAll()};d.create=function(c){if(!this.isPreloadStarted(c)){var d=createjs.HTMLAudioPlugin.TagPool.get(c),h=this._createTag(c);h.id=c;d.add(h);this.preload(c,{tag:h})}return new createjs.HTMLAudioPlugin.SoundInstance(c,this)};d.isPreloadStarted=function(c){return null!=this._audioSources[c]};d.preload=function(c,d){this._audioSources[c]=!0;new createjs.HTMLAudioPlugin.Loader(c,d.tag)};d.toString=function(){return"[HTMLAudioPlugin]"};createjs.HTMLAudioPlugin=c})();
(function(){function c(c,d){this._init(c,d)}var d=c.prototype=new createjs.EventDispatcher;d.src=null;d.uniqueId=-1;d.playState=null;d._owner=null;d.loaded=!1;d._offset=0;d._delay=0;d._volume=1;try{Object.defineProperty(d,"volume",{get:function(){return this._volume},set:function(c){null!=Number(c)&&(c=Math.max(0,Math.min(1,c)),this._volume=c,this._updateVolume())}})}catch(f){}d.pan=0;d._duration=0;d._remainingLoops=0;d._delayTimeoutId=null;d.tag=null;d._muted=!1;d._paused=!1;d._endedHandler=null;
d._readyHandler=null;d._stalledHandler=null;d.loopHandler=null;d._init=function(c,d){this.src=c;this._owner=d;this._endedHandler=createjs.proxy(this._handleSoundComplete,this);this._readyHandler=createjs.proxy(this._handleSoundReady,this);this._stalledHandler=createjs.proxy(this._handleSoundStalled,this);this.loopHandler=createjs.proxy(this.handleSoundLoop,this)};d._sendEvent=function(c){c=new createjs.Event(c);this.dispatchEvent(c)};d._cleanUp=function(){var c=this.tag;if(null!=c){c.pause();c.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,
this._endedHandler,!1);c.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1);c.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{c.currentTime=0}catch(d){}createjs.HTMLAudioPlugin.TagPool.setInstance(this.src,c);this.tag=null}clearTimeout(this._delayTimeoutId);null!=window.createjs&&createjs.Sound._playFinished(this)};d._interrupt=function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this._cleanUp(),this._paused=!1,
this._sendEvent("interrupted"))};d.play=function(c,d,a,b,e,f){this._cleanUp();createjs.Sound._playInstance(this,c,d,a,b,e,f)};d._beginPlaying=function(c,d,a,b){if(null==window.createjs)return-1;var e=this.tag=createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);return null==e?(this.playFailed(),-1):(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._offset=c,this.volume=a,this.pan=b,this._updateVolume(),this._remainingLoops=d,4!==e.readyState?(e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,
this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",e.load()):this._handleSoundReady(null),this._sendEvent("succeeded"),1)};d._handleSoundStalled=function(){this._cleanUp();this._sendEvent("failed")};d._handleSoundReady=function(){if(null!=window.createjs){if(this._duration=1E3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,
!1),this._offset>=this.getDuration())return this.playFailed(),void 0;0<this._offset&&(this.tag.currentTime=.001*this._offset);-1==this._remainingLoops&&(this.tag.loop=!0);0!=this._remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1),this.tag.loop=!0);this.tag.play()}};d.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||null==this.tag?!1:(this._paused=!0,this.tag.pause(),clearTimeout(this._delayTimeoutId),!0)};d.resume=
function(){return this._paused&&null!=this.tag?(this._paused=!1,this.tag.play(),!0):!1};d.stop=function(){return this._offset=0,this.pause(),this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),!0};d.setMasterVolume=function(){return this._updateVolume(),!0};d.setVolume=function(c){return this.volume=c,!0};d._updateVolume=function(){if(null!=this.tag){var c=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;return c!=this.tag.volume&&(this.tag.volume=c),!0}return!1};
d.getVolume=function(){return this.volume};d.setMasterMute=function(){return this._updateVolume(),!0};d.setMute=function(c){return null==c||void 0==c?!1:(this._muted=c,this._updateVolume(),!0)};d.getMute=function(){return this._muted};d.setPan=function(){return!1};d.getPan=function(){return 0};d.getPosition=function(){return null==this.tag?this._offset:1E3*this.tag.currentTime};d.setPosition=function(c){if(null==this.tag)this._offset=c;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,
this.loopHandler,!1);try{this.tag.currentTime=.001*c}catch(d){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)}return!0};d.getDuration=function(){return this._duration};d._handleSoundComplete=function(){this._offset=0;null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),this._sendEvent("complete"))};d.handleSoundLoop=function(){this._offset=0;this._remainingLoops--;0==this._remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,
this.loopHandler,!1));this._sendEvent("loop")};d.playFailed=function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed"))};d.toString=function(){return"[HTMLAudioPlugin SoundInstance]"};createjs.HTMLAudioPlugin.SoundInstance=c})();
(function(){function c(c,d){this._init(c,d)}var d=c.prototype;d.src=null;d.tag=null;d.preloadTimer=null;d.loadedHandler=null;d._init=function(c,d){if(this.src=c,this.tag=d,this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200),this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this),this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler),null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var h=
this.tag.onreadystatechange;this.tag.onreadystatechange=function(){h();this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto";this.tag.load()};d.preloadTick=function(){var c=this.tag.buffered,d=this.tag.duration;0<c.length&&c.end(0)>=d-1&&this.handleTagLoaded()};d.handleTagLoaded=function(){clearInterval(this.preloadTimer)};d.sendLoadedEvent=function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler);this.tag.onreadystatechange=
null;createjs.Sound._sendFileLoadEvent(this.src)};d.toString=function(){return"[HTMLAudioPlugin Loader]"};createjs.HTMLAudioPlugin.Loader=c})();
(function(){function c(c){this._init(c)}c.tags={};c.get=function(d){var k=c.tags[d];return null==k&&(k=c.tags[d]=new c(d)),k};c.remove=function(d){var k=c.tags[d];return null==k?!1:(k.removeAll(),delete c.tags[d],!0)};c.removeAll=function(){for(var d in c.tags)c.tags[d].removeAll();c.tags={}};c.getInstance=function(d){d=c.tags[d];return null==d?null:d.get()};c.setInstance=function(d,k){var h=c.tags[d];return null==h?null:h.set(k)};c.checkSrc=function(d){d=c.tags[d];return null==d?null:(d.checkSrcChange(),
void 0)};var d=c.prototype;d.src=null;d.length=0;d.available=0;d.tags=null;d._init=function(c){this.src=c;this.tags=[]};d.add=function(c){this.tags.push(c);this.length++;this.available++};d.removeAll=function(){for(;this.length--;)delete this.tags[this.length];this.src=null;this.tags.length=0};d.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var c=this.tags.pop();return null==c.parentNode&&document.body.appendChild(c),c};d.set=function(c){-1==createjs.indexOf(this.tags,
c)&&this.tags.push(c);this.available=this.tags.length};d.checkSrcChange=function(){for(var c=this.tags.length-1,d=this.tags[c].src;c--;)this.tags[c].src=d};d.toString=function(){return"[HTMLAudioPlugin TagPool]"};createjs.HTMLAudioPlugin.TagPool=c})();
var SG_Hooks={documentLoaded:!1,getLanguagesCalled:!1,startCalled:!1,levelUpCalled:!1,gameOverCalled:!1,setOrientationHandlerCalled:!1,setResizeHandlerCalled:!1,getLanguage:function(c){if(!SG_Hooks.documentLoaded)throw"Softgames - getLanguage: Do not call getLanguage before document is fully loaded. use window.onload to start your game!";if("[object array]"!=Object.prototype.toString.call(c).toLowerCase())throw"Softgames - getLanguage: No supported languages given. Please call SG_Hooks.getLanguage(['en','es',...]) - Array of Strings required!";
var d=Math.floor(Math.random()*c.length),d=c[d];SG_log("Softgames - getLanguage: '"+c.toString()+"' successfully initiated. Randomly chosen was '"+d+"'");SG_Hooks.getLanguagesCalled=!0;return d},start:function(){if(!SG_Hooks.documentLoaded)throw"Softgames - start: Do not call start() before document is fully loaded. use window.onload to start your game!";SG_Hooks.startCalled=!0},levelUp:function(c,d){if(!SG_isNothing(c)&&!SG_isInt(c))throw"Softgames - levelUp(level,score): The 'level'-parameter must be an integer '"+
typeof c+"' given.";if(!SG_isNothing(d)&&!SG_isInt(d))throw"Softgames - levelUp(level,score): The 'score'-parameter must be an integer, '"+typeof d+"' given.";SG_log("Softgames - levelUp: call successful - level="+c+", score="+d);SG_Hooks.levelUpCalled=!0},gameOver:function(c,d){if(!SG_isNothing(c)&&!SG_isInt(c))throw"Softgames - gameOver(level,score): The 'level'-parameter must be an integer '"+typeof c+"' given.";if(!SG_isNothing(d)&&!SG_isInt(d))throw"Softgames - gameOver(level,score): The 'score'-parameter must be an integer, '"+
typeof d+"' given.";SG_log("Softgames - gameOver: call successful - level="+c+", score="+d);SG_Hooks.gameOverCalled=!0},setOrientationHandler:function(c){if(!SG_isFunction(c))throw"Softgames - setOrientationHandler: The 'f'-parameter must be a function, '"+typeof c+"' given.";SG_log("Softgames - setOrientationHandler: call successful - orientationHandler="+c);SG_Hooks.setOrientationHandlerCalled=!0},setResizeHandler:function(c){if(!SG_isFunction(c))throw"Softgames - setResizeHandler: The 'f'-parameter must be a function, '"+
typeof c+"' given.";SG_log("Softgames - setResizeHandler: call successful - resizeHandler="+c);SG_Hooks.setResizeHandlerCalled=!0}};SG_isInt=function(c){return c===+c&&c===(c|0)};SG_isNothing=function(c){return""===c||null===c||"undefined"==typeof c};SG_isFunction=function(c){return"function"==typeof c};SG_log=function(c){console.log(c)};SG_load=function(){SG_Hooks.documentLoaded=!0};
SG_check=function(){var c=!1;SG_log("-------- Checking integration of Softgames-Hooks --------");SG_Hooks.getLanguagesCalled||(SG_log("SG_Hooks.getLanguage was not called. You have to call SG_Hooks.getLanguage(['en','es',...]); *after* window.onload."),c=!0);SG_Hooks.setOrientationHandlerCalled||(SG_log("SG_Hooks.setOrientationHandler was not called. You have to provide a game-function, that handles changes of orientation for the game."),c=!0);SG_Hooks.setResizeHandlerCalled||(SG_log("SG_Hooks.setResizeHandler was not called. You have to provide a game-function, that handles changes of window-size for the game."),
c=!0);SG_Hooks.startCalled||(SG_log("SG_Hooks.start was not called. You have to call SG_Hooks.start(); when player starts the game."),c=!0);SG_Hooks.levelUpCalled||SG_Hooks.gameOverCalled||(SG_log("You have to call SG_Hooks.levelUp or SG_Hooks.gameOver when player leveled up or game is over."),c=!0);if(c)return SG_log("-------- Check FAILED --------"),!1;SG_log("-------- Check PASSED --------");return!0};
window.attachEvent?window.attachEvent("onload",SG_load):window.addEventListener("load",SG_load,!0);
var ZSound={available:!1,loaded:!1,Init:function(c){if(this.available=createjs.Sound.initializeDefaultPlugins())createjs.Sound.alternateExtensions=["mp3"],ZSound.loaded=0,ZSound.total=c.length,createjs.Sound.addEventListener("fileload",function(){ZSound.loaded++;ZSound.loaded==c.length&&(ZSound.soundLoadedFunction&&ZSound.soundLoadedFunction(),this.loaded=!0)}),createjs.Sound.registerManifest(c,"res/snd/")},PlayMusic:function(c){ZSound.loaded?ZSound.PlayMusicInner(c):soundLoadedFunction=function(){ZSound.PlayMusicInner(c);
ZSound.loaded=!0}},UnMute:function(){this.available||(this.available=!0,createjs.Sound.setMute(!1))},Mute:function(){this.available=!1;createjs.Sound.setMute(!0)},PlayMusicInner:function(c){if(this.musicInstanceName!=c||!this.musicInstance){this.musicInstance&&createjs.Sound.stop(this.musicInstance);try{this.musicInstanceName=c,this.musicInstance=createjs.Sound.play(c,{interrupt:createjs.Sound.INTERRUPT_NONE,loop:999999})}catch(d){}}},Play:function(c){if(this.available)try{createjs.Sound.play(c,createjs.Sound.INTERRUPT_NONE,
0,0,!1,1)}catch(d){}}},PlayerData=function(){this.inst=this};PlayerData.inst=new PlayerData;PlayerData.inst.score=0;LevelManager=function(){};LevelManager.totalScore=function(){for(var c=0,d=1;40>=d;++d){var f=dataStorage["lvlsc"+d.toString()];f&&(c+=f)}return c};LevelManager.stars3score=[1910,2850,2770,2560,4650,3050,3060,3480,4760,2760,4940,6800,5890,4320,5400,4660,3780,6200,5230,6100,3520,4860,3500,3820,4410,3650,5820,4470,4210,5200,5040,2250,2370,3E3,5380,5370,5290,3240,4770,3610];
LevelManager.getStars=function(c,d){var f=LevelManager.stars3score[c-1];return d>=f?3:d>=.95*f?2:d>=.85*f?1:0};
LevelManager.onComplete=function(){LevelManager.layer||(LevelManager.layer=StageManager.inst.ol);CObj.AssignTexturesToObjects(LevelManager.objs,LevelManager.layer);for(var c=LevelManager.objs.length,d=0;d<c;++d)for(var f=CObj.conductClips.length,k=0;k<f;++k)if(LevelManager.objs[d].clipSrc&&0<=LevelManager.objs[d].clipSrc.indexOf(CObj.conductClips[k])){LevelManager.objs[d].isConductor=!0;break}window.gameStage&&(world.off("beginContact",gameStage.beginContact),world.off("endContact",gameStage.endContact),
world.on("beginContact",gameStage.beginContact),world.on("endContact",gameStage.endContact),world.step(1E-6));for(d=0;d<LevelManager.objs.length;++d)LevelManager.objs[d].init();if(LevelManager.onVeryComplete)LevelManager.onVeryComplete()};
LevelManager.loadLevel=function(c,d,f){LevelManager.objs=CObj.DeserializeArray(LevelManager.levels["levels/"+c+".json"]);LevelManager.layer=f;LevelManager.objs.sort(function(c,a){return c.layer==a.layer?0:c.layer<a.layer?-1:1});c=[];for(f=0;f<LevelManager.objs.length;++f)void 0!=LevelManager.objs[f].sAtlasName&&""!=LevelManager.objs[f].sAtlasName&&0>c.indexOf(LevelManager.objs[f].sAtlasName)&&(window.iphone3?c.push(LevelManager.objs[f].sAtlasName+"_min"):c.push(LevelManager.objs[f].sAtlasName));LevelManager.onVeryComplete=
d;d=[];for(f=0;f<c.length;++f){var k="imgtps/"+c[f];PIXI.BaseTextureCache[k+".png"]||d.push(k+".json")}if(0<d.length)d=new PIXI.AssetLoader(d),d.load(),d.onComplete=LevelManager.onComplete;else LevelManager.onComplete()};LevelManager.inst=new LevelManager;LevelManager.levels={};function rp(c){c&&c.parent&&c.parent.removeChild(c)}function extend(c,d,f){f=function(){};f.prototype=d.prototype;c.prototype=new f;c.prototype.constructor=c;c.superclass=d.prototype}
var StageManager=function(){this.fg=new PIXI.DisplayObjectContainer;this.bg=new PIXI.DisplayObjectContainer;this.ol=new PIXI.DisplayObjectContainer;this.guiLayer=new PIXI.DisplayObjectContainer;this.fontLayer=new PIXI.DisplayObjectContainer;this.bg.interactive=!0;this.fg.interactive=!1;this.ol.interactive=!1;this.guiLayer.interactive=!0;this.fontLayer.interactive=!1;this.currentStage=null;this.transStart=0;this.transTime=600;this.doTrans=!1};StageManager.inst=new StageManager;
StageManager.prototype.addLayersToStage=function(){stage.addChild(this.bg);stage.addChild(this.ol);stage.addChild(this.fg);stage.addChild(this.guiLayer);stage.addChild(this.fontLayer)};StageManager.prototype.fadeBegin=function(c){this.currentStage&&(this.currentStage.onHide(c),this.currentStage.doProcess=!1);c.doProcess=!0;c.onShow();this.fadeEnd(c)};StageManager.prototype.soundplay=function(){};StageManager.prototype.fadeEnd=function(c){this.currentStage=c};StageManager.prototype.transEnd=function(){};
StageManager.prototype.process=function(){this.currentStage&&this.currentStage.doProcess&&this.currentStage.process()};StageManager.prototype.openStage=function(c,d){if(!this.doTrans){if(this.currentStage){if(!this.currentStage.doProcess)return;this.currentStage.doProcess=!1;this.fadeBegin(c)}else this.currentStage=c,this.currentStage.doProcess=!0,c.onShow();c.previousStage=this.currentStage}};StageManager.prototype.deleteMC=function(c){c.dispose();c.parent&&c.parent.removeChild(c)};
function CustomStage(){this.visible=!1;this.doProcess=!0}CustomStage.prototype.process=function(){};CustomStage.prototype.onRemove=function(){};CustomStage.prototype.onHide=function(c){};CustomStage.prototype.onShow=function(){};function MainMenu(){CustomStage.apply(this)}extend(MainMenu,CustomStage);MainMenu.prototype.onShow=function(){CustomStage.prototype.onShow.call(this);LevelManager.loadLevel("mainmenu",this.onShowContinue)};
MainMenu.prototype.onShowContinue=function(){window.loadedMenu=!0;ZSound.PlayMusic("trackmenu");CObj.getById("totalscore").text=LevelManager.totalScore().toString();CObj.getById("bmore").click=window.openSponsorWindow;CObj.getById("credits").click=function(){StageManager.inst.openStage(credStage)};mainMenu.muteBtn=CObj.getById("mutebtn");mainMenu.muteBtn.click=function(){ZSound.available?ZSound.Mute():ZSound.UnMute();dataStorage.soundEnabled=ZSound.available;updateDS();gameStage.updateSoundBtn(mainMenu.muteBtn)};
var c=CObj.getById("epictext");new TweenMax(c,.8,{delay:.3,x:200,ease:Elastic.easeOut});new TweenMax(CObj.getById("grillertext"),.95,{delay:.3,x:750,ease:Elastic.easeOut});new TweenMax(CObj.getById("chickentext"),1.1,{delay:.3,y:93.4,ease:Elastic.easeOut});CObj.getById("playgame").click=function(c){StageManager.inst.openStage(levSel)};gameStage.updateSoundBtn(mainMenu.muteBtn)};
MainMenu.prototype.soundCheckLoaded=function(){CObj.getById("layer").gfx.interactive=!0;CObj.getById("byes").click=function(){dataStorage.soundEnabled=ZSound.available;updateDS();ZSound.UnMute();StageManager.inst.openStage(levSel)};CObj.getById("bno").click=function(){dataStorage.soundEnabled=ZSound.available;updateDS();ZSound.Mute();StageManager.inst.openStage(levSel)}};MainMenu.prototype.onHide=function(c){CustomStage.prototype.onHide.call(this,null);CObj.destroyAll();CObj.processAll()};
MainMenu.prototype.process=function(){CObj.processAll()};function LevSel(){CustomStage.apply(this)}extend(LevSel,CustomStage);LevSel.prototype.onShow=function(){CustomStage.prototype.onShow.call(this);ZSound.PlayMusic("trackmenu");LevelManager.loadLevel("levelselect",this.onShowContinue)};
LevSel.prototype.onShowContinue=function(){var c=dataStorage.completedLevels;0>c&&(c=0);CObj.getById("btnmenu").click=function(){StageManager.inst.openStage(mainMenu)};for(var d=1;40>=d;++d){var f=CObj.getById("btn"+d.toString());f.gfx.levelNum=d;f.click=levelClick;f.textField.visible=!0;f.lock=new PIXI.Sprite(PIXI.Texture.fromFrame("locklevel.png"));f.lock.scale.x=.35;f.lock.scale.y=.35;f.lock.anchor.x=.5;f.lock.anchor.y=.5;f.lock.visible=!1;f.gfx.addChild(f.lock);d>c+1&&(f.click=null,f.gfx.tint=
10066329,f.textField.visible=!1,f.lock.visible=!0);var k=new CObj(f.x-32,f.y+22);k.gfx=CObj.createMovieClip("star0001");k.gfx.interactive=!1;k.gfx.scale.x=.4*window.addScale;k.gfx.scale.y=.4*window.addScale;k.gfx.anchor.x=.5;k.gfx.anchor.x=.5;StageManager.inst.guiLayer.addChild(k.gfx);var h=new CObj(f.x,f.y+22);h.gfx=CObj.createMovieClip("star0001");h.gfx.interactive=!1;h.gfx.scale.x=.4*window.addScale;h.gfx.scale.y=.4*window.addScale;h.gfx.anchor.x=.5;h.gfx.anchor.x=.5;StageManager.inst.guiLayer.addChild(h.gfx);
f=new CObj(f.x+32,f.y+22);f.gfx=CObj.createMovieClip("star0001");f.gfx.interactive=!1;f.gfx.scale.x=.4*window.addScale;f.gfx.scale.y=.4*window.addScale;f.gfx.anchor.x=.5;f.gfx.anchor.x=.5;StageManager.inst.guiLayer.addChild(f.gfx);var a=dataStorage["lvlst"+d.toString()];a||(a=0);1==a&&k.gfx.gotoAndStop(1);2==a&&(k.gfx.gotoAndStop(1),h.gfx.gotoAndStop(1));3==a&&(k.gfx.gotoAndStop(1),h.gfx.gotoAndStop(1),f.gfx.gotoAndStop(1))}};
function levelClick(c){gameStage.currentLevel=c.target.levelNum;StageManager.inst.openStage(gameStage)}LevSel.prototype.onHide=function(c){CustomStage.prototype.onHide.call(this,null);CObj.destroyAll();CObj.processAll()};LevSel.prototype.process=function(){CObj.processAll()};function GameStage(){this.invFR=1/FRAME_RATE}extend(GameStage,CustomStage);
Object.defineProperty(GameStage.prototype,"worldSpeed",{get:function(){return this._worldSpeed},set:function(c){this._worldSpeed=c;for(var d=CObj.objects.length,f=0;f<d;++f)CObj.objects[f].gfx&&CObj.checkType(CObj.objects[f].gfx,PIXI.MovieClip)&&(CObj.objects[f].gfx.animationSpeed=c*CObj.objects[f].fps/FRAME_RATE)}});
GameStage.prototype.process=function(){this.doPhys&&world.step(this.invFR*this._worldSpeed);Generator.resetElectricity();if(Generator.gens){var c=Generator.gens.length;if(Generator.gens)for(var d=0;d<c;++d)Generator.gens[d].genProcess()}c=CObj.objects.length;for(d=0;d<c;++d)CObj.objects[d].isConductor&&CObj.objects[d]!=this.dragObject&&CObj.objects[d].setElectricity(CObj.objects[d].sElectricity);this.dragObject&&this.dragObject.gfx&&(this.dragObject.concount&&0<this.dragObject.concount?(this.canPut=
!1,16777215==this.dragObject.gfx.tint&&(this.dragObject.gfx.tint=16711680)):(this.canPut=!0,16777215!=this.dragObject.gfx.tint&&(this.dragObject.gfx.tint=16777215)));gameStage.preWinText&&(gameStage.preWinText.text=Number(gameStage.preWinText.timeout).toFixed(2).toString());CObj.processAll()};
GameStage.prototype.onHide=function(c){gameStage.winDelayedCall&&(gameStage.winDelayedCall.kill(!1),gameStage.winDelayedCall=null);gameStage.losing=!1;gameStage.scoreObj=null;gameStage.scoreTimeoutID.kill();gameStage.preWinText=null;TweenMax.killAll(!0,!0,!0);CustomStage.prototype.onHide.call(this,null);this.toolContainer.parent.removeChild(this.toolContainer);CObj.destroyAll();gameStage.preWinText=null;gameStage.dragObject=null;stage.touchmove=null;stage.mousemove=null;stage.mousedown=null;stage.touchstart=
null;stage.mouseup=null;stage.touchend=null;gameStage.pauseSprite&&(gameStage.pauseSprite.parent.removeChild(gameStage.pauseSprite),gameStage.pauseTexture.destroy(),gameStage.pauseTexture=null,gameStage.pauseSprite=null)};
GameStage.prototype.loseGame=function(){if(!gameStage.losing){gameStage.losing=!0;SG_Hooks.gameOver(gameStage.currentLevel,PlayerData.inst.score);var c=new CObj(0,0);c.gfx=new PIXI.Sprite(PIXI.Texture.fromFrame("FAIL.png"));c.gfx.width=SCR_WIDTH;c.gfx.height=SCR_HEIGHT;StageManager.inst.fg.addChild(c.gfx);c=new CTextField(SCR_WIDTH/2,SCR_HEIGHT/2);c.fontFamily=0;c.fontSize=62;c.align="center";c.tint=15597568;c.gfx=CTextField.createTextField(c);c.text="Don't kill tomatoes!";c.updateGraphics();
StageManager.inst.ol.addChild(c.gfx);gameStage.winDelayedCall&&gameStage.winDelayedCall.kill();TweenMax.delayedCall(.8,function(){StageManager.inst.openStage(gameStage)})}};GameStage.prototype.beginContact=function(c){var d=c.bodyA;c=c.bodyB;if(d!=c){if(d.userData&&!c.userData.sensor)d.userData.onContactBegin(c);if(c.userData&&!d.userData.sensor)c.userData.onContactBegin(d)}};
GameStage.prototype.endContact=function(c){var d=c.bodyA;c=c.bodyB;if(!d.userData.sensor||!c.userData.sensor){if(d.userData)d.userData.onContactEnd(c);if(c.userData)c.userData.onContactEnd(d)}};
GameStage.prototype.addTool=function(c){c.x=-2E3;c.y=-2E3;c.body.sensor=!0;c.body.angularVelocity=0;world.removeBody(c.body);var d=new PIXI.Sprite(PIXI.Texture.fromFrame("bgitem2.png"));d.width=100;d.height=100;StageManager.inst.lastTool=d;this.secretIngridient=d.width+10;d.x=50+this.toolContainer.children.length*this.secretIngridient;d.y=50;var f=new PIXI.Sprite(c.gfx.texture);f.rotation=c.gfx.rotation;f.anchor.x=.5;f.anchor.y=.5;f.width=c.gfx.width;f.height=c.gfx.height;var k=1/Math.max((f.width+
17)/d.width,(f.height+17)/d.height)/Math.max(d.scale.x,d.scale.y);f.scale.x=c.gfx.scale.x*k;f.scale.y=c.gfx.scale.y*k;d.addChild(f);d.anchor.x=.5;d.anchor.y=.5;d.gameobject=c;d.interactive=!0;this.toolContainer.addChild(d)};GameStage.prototype.remGfx=function(c){c&&c.parent&&c.parent.removeChild(c)};
GameStage.prototype.doLevelComplete=function(){var c=CObj.getById("timeout");c.gfx.visible=!0;c.timeout=2;for(var d=CObj.objects.length,f=0;f<d;++f)CObj.checkType(CObj.objects[f],Notification)&&Notification.removeNot(CObj.objects[f]);gameStage.preWinText=c;new TweenMax(c,2,{timeout:0,ease:Linear.easeNone});gameStage.winDelayedCall=TweenMax.delayedCall(2,LevelManager.loadLevel,["levelwin",this.updateWindowLevWin,StageManager.inst.guiLayer])};
GameStage.prototype.updateWindowLevWin=function(){ZSound.Play("levelWIN");gameStage.scoreTimeoutID.kill();gameStage.preWinText.destroy();gameStage.preWinText=null;gameStage.doPhys=!1;CObj.getById("scorevalue").text=PlayerData.inst.score.toString();CObj.getById("icogrill").rotation=-.16;new TweenMax(CObj.getById("icogrill"),.65,{repeat:-1,ease:Linear.easeNone,rotation:.16,yoyo:!0});CObj.getById("grilledamount").text="x "+gameStage.grilled;var c=350*gameStage.grilled;CObj.getById("scoregrilled").text=
c.toString();var d=PlayerData.inst.score+c;CObj.getById("totalscore").text=d.toString();CObj.getById("bmore").click=window.openSponsorWindow;c=LevelManager.getStars(gameStage.currentLevel,d);1==c?CObj.getById("star1").gfx.gotoAndStop(1):2==c?(CObj.getById("star1").gfx.gotoAndStop(1),CObj.getById("star2").gfx.gotoAndStop(1)):3==c?(CObj.getById("star1").gfx.gotoAndStop(1),CObj.getById("star2").gfx.gotoAndStop(1),CObj.getById("star3").gfx.gotoAndStop(1)):PlayerData.inst.score=d;SG_Hooks.levelUp(gameStage.currentLevel,
d);(d=dataStorage["lvlst"+gameStage.currentLevel.toString()])||(d=0);c>d&&(dataStorage["lvlst"+gameStage.currentLevel.toString()]=c,updateDS());if(gameStage.currentLevel>dataStorage.completedLevels){dataStorage.completedLevels=gameStage.currentLevel;c=dataStorage["lvlsc"+gameStage.currentLevel.toString()];if(!c||void 0==c||c<PlayerData.inst.score)dataStorage["lvlsc"+gameStage.currentLevel.toString()]=PlayerData.inst.score;updateDS()}CObj.getById("bmenu").click=function(){StageManager.inst.openStage(mainMenu)};
CObj.getById("bnext").click=function(){40==gameStage.currentLevel?(SG_Hooks.gameOver(40,LevelManager.totalScore()),StageManager.inst.openStage(winGameStage)):(gameStage.currentLevel++,gameStage.doProcess=!0,StageManager.inst.openStage(gameStage))}};
GameStage.prototype.removeFromToolsObject=function(c){for(var d=gameStage.toolContainer.children.length,f=0;f<d&&gameStage.toolContainer.children[f].gameobject!=c;++f);f<d&&(c=gameStage.toolContainer.children[f],c.interactive=!1,new TweenMax(c,.33,{alpha:.5,y:c.y-100,onComplete:gameStage.remGfx,onCompleteParams:[c]}));for(f+=1;f<d;++f)c=gameStage.toolContainer.children[f],new TweenMax(c,.5,{x:c.x-this.secretIngridient,ease:TweenMax.LINEAR})};
GameStage.prototype.addTools=function(){for(var c=0;c<CObj.objects.length;++c)1==CObj.objects[c].userData&&this.addTool(CObj.objects[c])};GameStage.prototype.updateScore=function(){gameStage.scoreObj&&(gameStage.scoreObj.text=PlayerData.inst.score.toString())};GameStage.prototype.minusScore=function(){gameStage.doProcess&&(PlayerData.inst.score-=15,gameStage.updateScore(),gameStage.scoreTimeoutID=TweenMax.delayedCall(1,gameStage.minusScore))};GameStage.prototype.doKeyDown=function(c){};
GameStage.prototype.onShow=function(){CustomStage.prototype.onShow.call(this);SG_Hooks.start();window.addEventListener("keypress",this.doKeyDown,!1);10>this.currentLevel?ZSound.PlayMusic("track2"):20>this.currentLevel?ZSound.PlayMusic("track3"):30>this.currentLevel?ZSound.PlayMusic("track6"):40>this.currentLevel&&ZSound.PlayMusic("track4");this.worldSpeed=1;this.grilled=0;this.doProcess=!1;LevelManager.loadLevel("level"+this.currentLevel.toString(),this.onLevelLoaded)};
GameStage.prototype.onLevelLoaded=function(){var c="BG2";26<gameStage.currentLevel?c="BG3":13<gameStage.currentLevel&&(c="BG4");c=new CObj(SCR_WIDTH/2,SCR_HEIGHT/2,c);c.gfx.parent.removeChild(c.gfx);c.gfx.width=SCR_WIDTH;c.gfx.height=SCR_HEIGHT;StageManager.inst.ol.addChildAt(c.gfx,0);LevelManager.loadLevel("hud",gameStage.onLoadEnd,StageManager.inst.guiLayer)};
GameStage.prototype.makePause=function(){gameStage.doPhys=!1;CObj.getById("bresume").click=function(){for(;0<LevelManager.objs.length;)LevelManager.objs[0].destroy(),LevelManager.objs.splice(0,1);LevelManager.objs=null;gameStage.doPhys=!0;TweenMax.resumeAll();for(var c=0;c<StageManager.inst.fontLayer.children.length;++c)StageManager.inst.fontLayer.children[c].visible=!0;gameStage.pauseSprite.parent.removeChild(gameStage.pauseSprite);gameStage.pauseTexture.destroy();gameStage.pauseTexture=
null;gameStage.pauseSprite=null;CObj.getById("menu").gfx.mouseout(null)};CObj.getById("blevs").click=function(){StageManager.inst.openStage(levSel)}};
GameStage.prototype.createPools=function(){0==pool.Size("textParticle")&&pool.Fill("textParticle",20,function(){var c=new CTextField(0,0);c.fontFamily=0;c.fontSize=25;c.align="center";c.gfx=CTextField.createTextField(c);c.gfx.scale.x*=window.addScale;c.gfx.scale.y*=window.addScale;return c});0==pool.Size("coinCollect")&&pool.Fill("coinCollect",15,function(){var c=CObj.createMovieClip("coinCollect");c.anchor.x=.5;c.anchor.y=.5;return c});0==pool.Size("expl")&&pool.Fill("expl",5,function(){var c=new CObj(0,
0);c.gfx=CObj.createMovieClip("expl");c.gfx.anchor.x=.5;c.gfx.anchor.y=.5;c.gfx.scale.x=1.55;c.gfx.scale.y=1.55;return c});0==pool.Size("chickeneffect")&&pool.Fill("chickeneffect",3,function(){var c=CObj.createMovieClip("chickeneffect");c.anchor.x=.5;c.anchor.y=.5;c.scale.x*=window.addScale;c.scale.y*=window.addScale;return c});0==pool.Size("roundElectro")&&pool.Fill("roundElectro",8,function(){return CObj.createMovieClip("ls2")});0==pool.Size("rectElectro")&&pool.Fill("rectElectro",20,function(){return CObj.createMovieClip("33l")})};
GameStage.prototype.onLoadEnd=function(){gameStage.doProcess=!0;gameStage.stepSize=gameStage.invFR;gameStage.doPhys=!0;PlayerData.inst.score=1E3;CObj.getById("level").getText();CObj.getById("level").text+=gameStage.currentLevel.toString();CObj.getById("logo").gfx.interactive=!0;CObj.getById("logo").gfx.click=window.openSponsorWindow;CObj.getById("logo").gfx.tap=window.openSponsorWindow;gameStage.toolContainer=new PIXI.DisplayObjectContainer;StageManager.inst.fg.addChild(gameStage.toolContainer);
gameStage.addTools();gameStage.scoreObj=CObj.getById("score");gameStage.worldSpeed=1;gameStage.createPools();CObj.getById("restart").click=function(){StageManager.inst.openStage(gameStage)};var c=CObj.getById("menu");c.click=function(){if(gameStage.doProcess){for(var d=0;d<StageManager.inst.fontLayer.children.length;++d)StageManager.inst.fontLayer.children[d].visible=!1;TweenMax.pauseAll();gameStage.toolContainer.interactive=!1;gameStage.pauseTexture=new PIXI.RenderTexture(SCR_WIDTH,SCR_HEIGHT);
gameStage.pauseTexture.render(stage);gameStage.pauseSprite=new PIXI.Sprite(gameStage.pauseTexture);gameStage.pauseSprite.tint=10092538;StageManager.inst.guiLayer.addChild(gameStage.pauseSprite);TweenMax.killTweensOf(c,!0);LevelManager.loadLevel("levelmenu",gameStage.makePause,StageManager.inst.guiLayer)}};CObj.getById("timeout").gfx.visible=!1;CObj.getById("timeout").text="";CObj.getById("levels").click=function(){StageManager.inst.openStage(levSel)};stage.touchmove=function(c){if(gameStage.dragObject){c=
c.getLocalPosition(stage);var f=c.y/SCR_SCALE;gameStage.dragObject.x=c.x/SCR_SCALE;gameStage.dragObject.y=f;gameStage.dragObject.body.velocity[0]=0;gameStage.dragObject.body.velocity[1]=0;gameStage.dragObject.angularVelocity=0}};stage.mousemove=stage.touchmove;stage.touchstart=function(c){if(!gameStage.dragObject){var f=c.getLocalPosition(stage);f.x/=SCR_SCALE;f.y/=SCR_SCALE;for(var k=0;k<gameStage.toolContainer.children.length;++k){var h=gameStage.toolContainer.children[k].x+gameStage.toolContainer.x,
a=gameStage.toolContainer.children[k].y+gameStage.toolContainer.y,b=gameStage.toolContainer.children[k].width/2+15;if((h-f.x)*(h-f.x)+(a-f.y)*(a-f.y)<b*b)break}k>=gameStage.toolContainer.children.length||(gameStage.dragObject=gameStage.toolContainer.children[k].gameobject,gameStage.dragObject.concount=0,gameStage.dragObject.sensor=!0,this.children[0].visible=!1,gameStage.remGfx(gameStage.dragObject.gfx),StageManager.inst.fg.addChild(gameStage.dragObject.gfx),gameStage.dragObjectPrevMass=gameStage.dragObject.body.mass,
gameStage.dragObject.body.mass=0,gameStage.dragObject.x=stage.position.x,gameStage.dragObject.y=stage.position.y,gameStage.canPut=!1,stage.touchmove(c),world.addBody(gameStage.dragObject.body))}};stage.mousedown=stage.touchstart;stage.touchend=function(c){if(gameStage.dragObject){var f=CObj.getById("arrow1");f&&"removeArrow"==gameStage.dragObject.id&&new TweenMax(f.gfx,.6,{alpha:0,onComplete:function(){f.destroy()}});gameStage.dragObject.sensor=!1;if(gameStage.canPut)gameStage.removeFromToolsObject(gameStage.dragObject),
world.removeBody(gameStage.dragObject.body),world.step(1E-7),world.addBody(gameStage.dragObject.body),gameStage.remGfx(gameStage.dragObject.gfx),StageManager.inst.ol.addChild(gameStage.dragObject.gfx),gameStage.dragObject.updateElectroGfx(gameStage.dragObject);else{gameStage.dragObject.x=-3E3;gameStage.dragObject.y=-3E3;world.removeBody(gameStage.dragObject);c=gameStage.toolContainer.children.length;for(var k=0;k<c&&gameStage.toolContainer.children[k].gameobject!=gameStage.dragObject;++k);gameStage.toolContainer.children[k].children[0].visible=
!0}gameStage.dragObject.body.mass=gameStage.dragObjectPrevMass;gameStage.dragObject=null}};stage.mouseup=stage.touchend;gameStage.muteBtn=CObj.getById("mutebtn");gameStage.updateSoundBtn(gameStage.muteBtn);gameStage.muteBtn.click=function(){ZSound.available?ZSound.Mute():ZSound.UnMute();dataStorage.soundEnabled=ZSound.available;updateDS();gameStage.updateSoundBtn(gameStage.muteBtn)};gameStage.scoreTimeoutID=TweenMax.delayedCall(1,gameStage.minusScore)};
GameStage.prototype.updateSoundBtn=function(c){ZSound.available?c.gfx.gotoAndStop(0):c.gfx.gotoAndStop(1)};function Credits(){CustomStage.apply(this)}extend(Credits,CustomStage);Credits.prototype.onShow=function(){this.doProcess=!1;CustomStage.prototype.onShow.call(this);LevelManager.loadLevel("credits",this.onShowContinue)};
Credits.prototype.onShowContinue=function(){credStage.doProcess=!0;gameStage.createPools();var c=new CObj(SCR_WIDTH/2,SCR_HEIGHT/2,"BG2");c.gfx.parent.removeChild(c.gfx);c.gfx.width=SCR_WIDTH;c.gfx.height=SCR_HEIGHT;StageManager.inst.ol.addChildAt(c.gfx,0);var c=CObj.getById("cd1"),d=CObj.getById("cd2"),f=CObj.getById("cd3"),k=CObj.getById("cd4");c.gfx.alpha=.01;d.gfx.alpha=.01;f.gfx.alpha=.01;k.gfx.alpha=.01;c.gfx.scale.x=.01;d.gfx.scale.x=.01;f.gfx.scale.x=.01;k.gfx.scale.x=.01;c.gfx.scale.y=
.01;d.gfx.scale.y=.01;f.gfx.scale.y=.01;k.gfx.scale.y=.01;c.rotation=-.1;d.rotation=-.1;f.rotation=-.1;k.rotation=-.1;new TweenMax(c.gfx.scale,.7,{delay:.8,x:1,y:1});new TweenMax(c.gfx,.7,{delay:.8,alpha:1});new TweenMax(c,.7,{delay:.8,rotation:0,yoyo:!0,repeat:2});new TweenMax(d.gfx.scale,.7,{delay:.9,x:1,y:1});new TweenMax(d.gfx,.7,{delay:.9,alpha:1});new TweenMax(d,.7,{delay:.9,rotation:0,yoyo:!0,repeat:2});new TweenMax(f.gfx.scale,.7,{delay:2.8,x:1,y:1});new TweenMax(f.gfx,.7,{delay:2.8,alpha:1});
new TweenMax(f,.7,{delay:2.8,rotation:0,yoyo:!0,repeat:2});new TweenMax(k.gfx.scale,.7,{delay:2.9,x:1,y:1});new TweenMax(k.gfx,.7,{delay:2.9,alpha:1});new TweenMax(k,.7,{delay:2.9,rotation:0,yoyo:!0,repeat:2});CObj.getById("bback").click=function(){StageManager.inst.openStage(mainMenu)};TweenMax.delayedCall(.6,function(){CObj.getById("wall5").destroy()})};Credits.prototype.onHide=function(c){CustomStage.prototype.onHide.call(this,null);CObj.destroyAll();CObj.processAll();TweenMax.killAll()};
Credits.prototype.process=function(){world.step(gameStage.invFR);Generator.resetElectricity();if(Generator.gens){var c=Generator.gens.length;if(Generator.gens)for(var d=0;d<c;++d)Generator.gens[d].genProcess()}c=CObj.objects.length;for(d=0;d<c;++d)CObj.objects[d].isConductor&&CObj.objects[d]!=this.dragObject&&CObj.objects[d].setElectricity(CObj.objects[d].sElectricity);CObj.processAll()};function WinGame(){CustomStage.apply(this)}extend(WinGame,CustomStage);
WinGame.prototype.onShow=function(){this.doProcess=!1;CustomStage.prototype.onShow.call(this);LevelManager.loadLevel("wingame",this.onShowContinue)};WinGame.prototype.onShowContinue=function(){winGameStage.doProcess=!0;var c=new CObj(SCR_WIDTH/2,SCR_HEIGHT/2,"BG2");c.gfx.parent.removeChild(c.gfx);c.gfx.width=SCR_WIDTH;c.gfx.height=SCR_HEIGHT;StageManager.inst.ol.addChildAt(c.gfx,0);CObj.getById("totalscore").text=LevelManager.totalScore().toString();CObj.getById("gomenu").click=function(){StageManager.inst.openStage(mainMenu)}};
WinGame.prototype.onHide=function(c){CustomStage.prototype.onHide.call(this,null);CObj.destroyAll();CObj.processAll();TweenMax.killAll()};
WinGame.prototype.process=function(){world.step(gameStage.invFR);Generator.resetElectricity();if(Generator.gens){var c=Generator.gens.length;if(Generator.gens)for(var d=0;d<c;++d)Generator.gens[d].genProcess()}c=CObj.objects.length;for(d=0;d<c;++d)CObj.objects[d].isConductor&&CObj.objects[d]!=this.dragObject&&CObj.objects[d].setElectricity(CObj.objects[d].sElectricity);CObj.processAll()};ZPool=function(){this.objects={};ZPool.Inst=this;return this};
ZPool.prototype.Fill=function(c,d,f){void 0==this.objects[c]&&(this.objects[c]=[]);for(var k=0;k<d;k++){var h=f();h.poolName=c;this.objects[c].push(h)}};ZPool.prototype.Pop=function(c){if(void 0==this.objects[c])console.warn("Error: not found '"+c+"' in pool.");else if(0==this.objects[c].length)console.warn("Error: pool empty. Element '"+c+"'");else return this.objects[c].pop()};ZPool.prototype.Size=function(c){return void 0==this.objects[c]?0:this.objects[c].length};
ZPool.prototype.Push=function(c){void 0==c.poolName?console.warn("Error: Can't push unnamed element in pool."):this.objects[c.poolName].push(c)};
CObj=function(c,d,f,k){this.PublicFields="allowRotation,drawAsTexture,userData,[Graphics],isClip,fps,autoPlay,scaleX,scaleY,offsetX,offsetY,offsetR;";this._isConductor=!1;this.connected;this._y=this._x=0;this._sensor=!1;this.vy=this.vx=0;this._body=null;this.baseDim={};this._rotation=0;CObj.objects||(CObj.objects=[]);CObj.objects.push(this);this.clipSrc="";this.userData=null;this.oY=this.oX=0;void 0==this.offsetX&&(this.offsetX=0);void 0==this.offsetY&&(this.offsetY=0);void 0==this.offsetR&&(this.offsetR=
0);this.doRemove=!1;f&&(f=PIXI.Texture.fromFrame(f+".png"),this.gfx=new PIXI.Sprite(f),this.gfx.gameobject=this,this.gfx.anchor.x=.5,this.gfx.anchor.y=.5,stage.addChild(this.gfx));k&&(this.body=k,CObj.setDefaultCG(this.body),this.body.position[0]=c,this.body.position[1]=d);this.x=c;this.y=d;this.rotation=0};CObj.updateGfxDelay=.3;CObj.prototype.getText=function(){var c=loc_texts[this.id];c&&(this.text=CTextField.convertSpaces(c))};
CObj.prototype.init=function(){if(this.body&&this.body.type==p2.Body.STATIC&&this.isConductor)for(var c=CObj.objects.length,d=0;d<c;++d)if(CObj.objects[d]!=this&&CObj.objects[d].isConductor&&CObj.objects[d].body&&CObj.objects[d].body.motionState==p2.Body.STATIC&&!(0<=(this.connected?this.connected.indexOf(CObj.objects[d]):-1))){this.body.type=p2.Body.DYNAMIC;for(var f=0;f<this.body.shapes.length;++f)this.body.shapes[f].collisionGroup=world.cgDYNAMIC;for(f=0;f<CObj.objects[d].body.shapes.length;++f)CObj.objects[d].body.shapes[f].collisionGroup=
world.cgDYNAMIC;world.step(1E-7);this.body.overlaps(CObj.objects[d].body)&&(this.connected.push(CObj.objects[d]),CObj.objects[d].connected.push(this));for(f=0;f<this.body.shapes.length;++f)this.body.shapes[f].collisionGroup=world.cgSTATIC;for(f=0;f<CObj.objects[d].body.shapes.length;++f)CObj.objects[d].body.shapes[f].collisionGroup=world.cgSTATIC;this.body.type=p2.Body.STATIC}};CObj.conductClips="tracktor;tracktorwheel;engine;guiBGitem;powerField0001;propeller;generatorRound;bomb1;tomato;chest;block1;blockmetal;balka1;generator;chickentestsmall;mister chicken;metalstatic".split(";");
CObj.prototype.updateElectroGfx=function(c){c.sensor||TweenMax.delayedCall(CObj.updateGfxDelay,c.updateElectroGfx,[c])};CObj.prototype.enableMotorConstraints=function(c){for(var d=world.constraints.length,f=0;f<d;++f)world.constraints[f].bodyA!=this.body&&world.constraints[f].bodyB!=this.body||!world.constraints[f].motor||(null!=c?(world.constraints[f].enableMotor(),world.constraints[f].setMotorSpeed(c)):(world.constraints[f].motorEnabled=!1,world.constraints[f].setMotorSpeed(0)))};
CObj.prototype.findFirstConstraint=function(){for(var c=world.constraints.length,d=0;d<c;++d)if(world.constraints[d].bodyA==this.body||world.constraints[d].bodyB==this.body)return world.constraints[d]};
CObj.prototype.setElectricity=function(c){(this.sElectricity=c)?(this.setOffDelay&&(this.setOffDelay.kill(),this.setOffDelay=null),this.mcLightning?this.mcLightning.visible=!0:(Math.abs(this.baseDim.x-this.baseDim.y)<.45*Math.min(this.baseDim.x,this.baseDim.y)?this.mcLightning=pool.Pop("roundElectro"):this.mcLightning=pool.Pop("rectElectro"),this.mcLightning&&(this.mcLightning.anchor.x=.5,this.mcLightning.anchor.y=.5,this.mcLightning.animationSpeed=20/FRAME_RATE,this.mcLightning.gotoAndPlay(1),this.mcLightning.scale.x=
.5+this.baseDim.x/this.mcLightning.width,this.mcLightning.scale.y=.5+this.baseDim.y/this.mcLightning.height,this.baseDim.x<this.baseDim.y&&(this.mcLightning.rotation=Math.PI/2),this.gfx.addChild(this.mcLightning))),this.gfx&&(this.gfx.tint=13421823),void 0!=this.motorSpeed&&this.enableMotorConstraints(this.motorSpeed)):(void 0!=this.motorSpeed&&(this.enableMotorConstraints(null),this.body.angularVelocity=0),this.setOffDelay=TweenMax.delayedCall(.1,this.setOffCallback,[this]))};
CObj.prototype.setOffCallback=function(c){c.mcLightning&&(c.mcLightning.visible=!1);c.gfx&&(c.gfx.tint=16777215)};CObj.prototype.onContactBegin=function(c){this==gameStage.dragObject?(this.concount||(this.concount=0),this.concount++):c.userData&&this.isConductor&&this.connected.push(c.userData)};CObj.prototype.onContactEnd=function(c){gameStage.dragObject&&this==gameStage.dragObject?this.concount--:c.userData&&this.isConductor&&(c=this.connected.indexOf(c.userData),0<=c&&this.connected.splice(c,1))};
CObj.prototype.process=function(){this.updateGraphics()};CObj.prototype.move=function(){this.x+=this.vx;this.y+=this.vy};CObj.prototype.setVelocity=function(c,d){this.vx=c;this.vy=d};CObj.prototype._destroy=function(){this.doRemove&&(this.gfx&&this.gfx.parent&&this.gfx.parent.removeChild(this.gfx),this.gfx=null,this.mcLightning&&(this.mcLightning.parent&&this.mcLightning.parent.removeChild(this.mcLightning),pool.Push(this.mcLightning),this.mcLightning=null),this.body&&world.removeBody(this.body))};
CObj.prototype.destroy=function(){this.poolName||(this.doRemove=!0)};CObj.getById=function(c){for(var d=0;d<CObj.objects.length;++d)if(CObj.objects[d].id==c)return CObj.objects[d]};CObj.checkType=function(c,d){return c.constructor==d};CObj.destroyAll=function(){for(var c=CObj.objects.length,d=0;d<c;++d)CObj.objects[d].mechanicalDestroy=!0,CObj.objects[d].destroy();CObj.processAll()};
CObj.prototype.updateGraphics=function(c){if(this.gfx&&this.gfx.position){this.gfx.rotation=this.rotation+this.offsetR;if(c||void 0==this.prevRotation||.01<Math.abs(this.gfx.rotation-this.prevRotation)){c=Math.cos(this.rotation);var d=Math.sin(this.rotation);this.oX=this.offsetX*c-this.offsetY*d;this.oY=this.offsetX*d+this.offsetY*c;this.prevRotation=this.gfx.rotation}this.gfx.position.x=this.x+this.oX;this.gfx.position.y=this.y+this.oY}};CObj.prototype.constructor=CObj;
Object.defineProperty(CObj.prototype,"isConductor",{get:function(){return this._isConductor},set:function(c){(this._isConductor=c)&&!this.connected&&(TweenMax.delayedCall(CObj.updateGfxDelay,this.updateElectroGfx,[this]),this.connected=[])}});Object.defineProperty(CObj.prototype,"x",{get:function(){return this.body?this.body.position[0]:this._x},set:function(c){this.body?this.body.position[0]=c:this._x=c;this.updateGraphics()}});
CObj.processAll=function(){for(var c=CObj.objects.length,d=0;d<c;d++)CObj.objects[d].process(),CObj.objects[d].doRemove&&(CObj.objects[d]._destroy(),CObj.objects.splice(d,1),d--,c--)};Object.defineProperty(CObj.prototype,"sensor",{get:function(){return this._sensor},set:function(c){this._sensor=c;if(this._body)for(var d=this.body.shapes.length,f=0;f<d;++f)this.body.shapes[f].sensor=c}});
Object.defineProperty(CObj.prototype,"y",{get:function(){return this.body?this.body.position[1]:this._y},set:function(c){this.body?this.body.position[1]=c:this._y=c;this.updateGraphics()}});Object.defineProperty(CObj.prototype,"body",{get:function(){return this._body},set:function(c){this._body&&(world.removeBody(this._body),this._body.userData=null);c&&(this._body=c,this._body.userData=this,world.addBody(this._body))}});
Object.defineProperty(CObj.prototype,"rotation",{get:function(){return this.body?this.body.angle:this._rotation},set:function(c){this.body?this.body.angle=c:this._rotation=c;this.updateGraphics()}});CObj.DeserializeArray=function(c){var d=c.objects.length,f=[];for(i=0;i<d;i++)"pussyatlas.png.bg"!=c.objects[i].clip&&f.push(CObj.DeserializeCObj(c.objects[i]));return f};CObj.ExtractFrameName=function(c){var d=c.indexOf("0");return-1==d?c:c.substring(0,d)};
CObj.ExtractFrameNum=function(c){var d=c.indexOf("0");if(-1==d)return 0;c=c.substring(d,c.length);~c.indexOf(".")&&(c=c.slice(0,-4));c=parseInt(c);return isNaN(c)?0:c};CObj.createMovieClip=function(c){var d=CObj.ExtractFrameName(c),f=[],k=0,h=0,a;for(a in PIXI.TextureCache)c==a&&(k=h),CObj.ExtractFrameName(a)==d&&(f.push(PIXI.TextureCache[a]),h++);c=new PIXI.MovieClip(f);c.gotoAndStop(k);return c};
CObj.AssignTexturesToObjects=function(c,d){for(var f=c.length,k=0;k<f;k++)if(""!=c[k].clipSrc&&null!=c[k].clipSrc){var h=null;""!=c[k].sAtlasName?h=PIXI.Texture.fromFrame(c[k].clipSrc+".png"):(h=c[k].clipSrc.indexOf("."),h=-1==h?PIXI.Texture.fromFrame(c[k].clipSrc+".png"):PIXI.Texture.fromFrame(c[k].clipSrc.substr(0,h)+".png"));if(h){var a=null;c[k].isClip?(a=CObj.createMovieClip(c[k].clipSrc),a.animationSpeed=c[k].fps/FRAME_RATE,c[k].autoPlay&&a.play()):c[k].drawAsTexture?a=new PIXI.TilingSprite(h,
c[k].baseDim.x,c[k].baseDim.y):(a=new PIXI.Sprite(h),c[k].isConductor=!1);a.anchor.x=.5;a.anchor.y=.5;a.x=c[k].x;a.y=c[k].y;a.width=c[k].baseDim.x+2;a.height=c[k].baseDim.y+2;a.rotation=c[k].rotation;a.scale.x=c[k].scaleX*window.addScale;a.scale.y=c[k].scaleY*window.addScale;a.width+=1;a.height+=1;c[k].gfx=a;d&&d.addChild(a)}}};CObj.setBodyMass=function(c,d){var f=c.getArea();c.mass=f*d/50};
CObj.getBodyFromJSON=function(c){var d=!1;CObj.steelMaterialHiFriction||(CObj.steelMaterialHiFriction=new p2.Material,CObj.mediumRestitution=new p2.Material,CObj.strongRestitution=new p2.Material,world.cgSTATIC=Math.pow(2,0),world.cgDYNAMIC=Math.pow(2,1),world.materials=[CObj.steelMaterialHiFriction,CObj.mediumRestitution,CObj.strongRestitution],world.defaultContactMaterial.friction=.5,world.setGlobalStiffness(50),world.defaultContactMaterial.stiffness=50,world.addContactMaterial(new p2.ContactMaterial(CObj.mediumRestitution,
CObj.mediumRestitution,{friction:2.5,relaxation:70})),world.addContactMaterial(new p2.ContactMaterial(CObj.steelMaterialHiFriction,CObj.steelMaterialHiFriction,{friction:3.4,relaxation:4,stiffness:3E4})),world.addContactMaterial(new p2.ContactMaterial(CObj.steelMaterialHiFriction,CObj.mediumRestitution,{friction:.4,stiffness:1E3,restitution:.4})),world.addContactMaterial(new p2.ContactMaterial(CObj.steelMaterialHiFriction,CObj.strongRestitution,{restitution:.5,friction:.5})),world.addContactMaterial(new p2.ContactMaterial(CObj.mediumRestitution,
CObj.strongRestitution,{restitution:1,friction:.5})));switch(c.body.type){case "DYNAMIC":d=!1;break;case "STATIC":d=!0}var f=c.density;"Chicken"==c.cls&&(c.elasticity=.5,c.density=1);d&&(f=0);f=new p2.Body({mass:f,fixedRotation:!c.allowRotation});f.motionState=d?p2.Body.STATIC:p2.Body.DYNAMIC;d=c.body.shapes.length;if(0!=d)for(var k=0;k<d;k++){switch(c.body.shapes[k].type){case "CIRCLE":var h=new p2.Circle(c.body.shapes[k].radius);break;case "POLYGON":var h=c.body.shapes[k].localVerts,a=[];for(j=
0;j<h.length;j++)a.push([h[j].x,h[j].y]);h=new p2.Convex(a)}h&&f.addShape(h);h.material=.2>o.elasticity?CObj.steelMaterialHiFriction:.5>=o.elasticity?CObj.mediumRestitution:CObj.strongRestitution}CObj.setDefaultCG(f);CObj.setBodyMass(f,c.density);return f};
CObj.setDefaultCG=function(c){for(var d=c.motionState==p2.Body.STATIC||0==c.mass?world.cgSTATIC:world.cgDYNAMIC,f=0;f<c.shapes.length;++f)c.shapes[f].collisionMask=d==world.cgSTATIC?world.cgDYNAMIC:world.cgSTATIC|world.cgDYNAMIC,c.shapes[f].collisionGroup=d};
CObj.DeserializeCObj=function(c,d){var f=Deserialize(c);f.clipSrc=c.clip;if(f.clipSrc){var k=c.clip,h=k.lastIndexOf(".");-1!=k.lastIndexOf(".",h-1)&&(k.substring(0,h),f.sAtlasName=k.substring(0,h),f.clipSrc=k.substring(h+1,k.length),h=f.sAtlasName.indexOf("."),-1!=h&&(f.sAtlasName=f.sAtlasName.substr(0,h)))}void 0!=c.density&&(f.density=c.density);void 0!=c.elasticity&&(f.elasticity=c.elasticity);void 0!=c.friction&&(f.friction=c.friction);void 0!=c.frictionStatic&&(f.frictionStatic=c.frictionStatic);
void 0!=c.frictionRolling&&(f.frictionRolling=c.frictionRolling);void 0!=c.isSensor&&(f.isSensor=c.isSensor);c.layer&&(f.layer=c.layer);f.id=c.id;c.body&&(f.body=CObj.getBodyFromJSON(c));c.baseDim&&(f.baseDim.x=c.baseDim.x,f.baseDim.y=c.baseDim.y);f.scaleX=c.scaleX/2;f.scaleY=c.scaleY/2;void 0!=c.x&&(f.x=c.x);void 0!=c.y&&(f.y=c.y);void 0!=c.rotation&&(f.rotation=c.rotation);return f};
function Deserialize(c){if(void 0!=c.cls&&""!=c.cls&&"ZEngine::ZObj"!=c.cls){var d=c.cls;-1!=d.indexOf("::")&&(d=d.split("::")[1]);window[d]?("ZObj"==d&&(d="CObj"),o=new window[d],o.cls=d):o=new CObj}else o=new CObj;if(o.PublicFields){var d=o.PublicFields.replace(" ","").split(";"),f,k,h=d.length;for(k=0;k<h;k++)if(""!=d[k]){var a=d[k].split(","),b=a.length;for(f=0;f<b;f++){var e=a[f];""!=e&&"["!=e.substr(0,1)&&void 0!=c[e]&&(o[e]=c[e])}}}return o}extend(CBomb,CObj,!0);
function CBomb(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="power,";this.radiusMax=300}
CBomb.prototype.explode=function(){if(!this.doRemove){var c=CObj.objects.length,d=new vec2.create,f=new vec2.create;ZSound.Play("rocketboom");var k=pool.Pop("expl");k&&(k.x=this.x,k.y=this.y,k.gfx.animationSpeed=.85,k.gfx.gotoAndPlay(0),k.gfx.loop=!1,k.gfx.scale.x=1.55*window.addScale,k.gfx.scale.y=1.55*window.addScale,k.updateGraphics(),k.gfx.parent&&k.gfx.parent.removeChild(k.gfx),StageManager.inst.ol.addChild(k.gfx),k.gfx.onComplete=function(){setTimeout(function(){k.gfx.parent.removeChild(k.gfx);
pool.Push(k)},15,k)});for(var h=0;h<c;++h)if(!CObj.objects[h].sensor&&CObj.objects[h]!=this&&CObj.objects[h].body&&CObj.objects[h].body.type==p2.Body.DYNAMIC){d[0]=this.x;d[1]=this.y;f[0]=CObj.objects[h].x;f[1]=CObj.objects[h].y;vec2.sub(d,d,f);var a=vec2.sqrLen(d);a>this.radiusMax*this.radiusMax||(a=Math.sqrt(a),d[0]/=a,d[1]/=a,a=1-(a+2)/this.radiusMax,0>a&&(a=0),a=Math.pow(a,1.4),vec2.scale(d,d,4500*this.power*a),CObj.objects[h].body.force[0]-=d[0],CObj.objects[h].body.force[1]-=d[1])}this.destroy()}};
CBomb.prototype.setElectricity=function(c){CObj.prototype.setElectricity.call(this);c&&this.explode()};extend(CButton,CObj,!0);function CButton(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="text,fontFamily,fontSize,align"}CButton.prototype.destroy=function(){CObj.prototype.destroy.call(this);this.textField.parent.removeChild(this.textField);this.click=this.textField=null};
Object.defineProperty(CButton.prototype,"click",{get:function(){return this._click},set:function(c){this._click=c;if(!c)this.gfx.tap=null,this.gfx.click=null;else if(this.gfx){var d=function(d){ZSound.Play("CLICK");c(d)};this.gfx.tap=d;this.gfx.click=d}}});Object.defineProperty(CButton.prototype,"text",{get:function(){return this._text},set:function(c){this._text=c;if(this.gfx&&this.textField){var d=this.textField;d.text=c;d.updateText();c=d.getLocalBounds();d.x=-c.width/2;d.y=-c.height;this.updateGraphics(!0)}}});
CButton.prototype.updateGraphics=function(){this.doRemove||(CObj.prototype.updateGraphics.call(this),this.gfx&&(this.textField.x=this.gfx.x-this.textField.width/2,this.textField.y=this.gfx.y-.7*this.textField.height))};
CButton.prototype.init=function(){CObj.prototype.init.call(this);this.gfx.interactive=!0;this.align="center";this.fontSize=parseInt(this.fontSize);this.textField=CTextField.createTextField(this);this.getText();this.text=this.text;this.isClip&&this.gfx.gotoAndStop(0);var c=this.textField,d=this.gfx;this.baseScaleX=d.scale.x;this.baseScaleY=d.scale.y;var f=this.baseScaleX,k=this.baseScaleY;this.updateGraphics();this.gfx.mouseover=function(h){TweenMax.killTweensOf(d.scale);new TweenMax(d.scale,
.6,{y:k+.2,ease:Elastic.easeOut});new TweenMax(d.scale,.4,{x:f+.2,ease:Elastic.easeOut});new TweenMax(c.scale,.6,{y:1.2,ease:Elastic.easeOut});new TweenMax(c.scale,.4,{x:1.2,ease:Elastic.easeOut})};this.gfx.mouseout=function(h){d.currentFrame&&d.gotoAndStop(1);new TweenMax(d.scale,.3,{x:f,y:k,ease:Elastic.easeOut});new TweenMax(c.scale,.3,{x:1,y:1,ease:Elastic.easeOut})};StageManager.inst.fontLayer.addChild(this.textField)};extend(ZCJoint,CObj,!0);
function ZCJoint(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="body1Id,body2Id,collideConnected,breakOnForce,angleConstraint,angleMin,angleMax,frequency,damping,rate,isStopped,"}ZCJoint.prototype.CreateMotor=function(){joint&&1E-6<Math.abs(rate)&&(motor||(motor=new MotorJoint(joint.body1,joint.body2,2*Math.PI*rate)),motor.rate=isStopped?0:2*Math.PI*rate,motor.ignore=!collideConnected,motor.space=ZNape.Inst.World)};
ZCJoint.getFirstStatic=function(){for(var c=CObj.objects.length,d=0;d<c;++d)if(CObj.objects[d].body&&CObj.objects[d].body.type==p2.Body.STATIC)return CObj.objects[d].body};
ZCJoint.prototype.init=function(){CObj.prototype.init.call(this);var c=world.hitTest([this.x,this.y],world.bodies,3),d,f,k=!1;1==c.length?(d=c[0],""!=this.body1Id&&(d=CObj.getById(this.body1Id).body),null!=d&&d.type!=p2.Body.STATIC&&(k=!0,f=ZCJoint.getFirstStatic(),this.joint=new p2.Constraint(d,f,{collideConnected:this.collideConnected,worldPivot:[this.x,this.y]}))):2<=c.length&&(d=c[0],f=c[1],""!=this.body1Id&&(d=CObj.getById(this.body1Id).body),""!=this.body2Id&&(f=CObj.getById(this.body2Id).body));
k||(d.userData.onContactBegin(f),f.userData.onContactBegin(d));d||(d=c[0]);f||(f=c[1]);""!=this.body1Id&&(d=CObj.getById(this.body1Id).body);""!=this.body2Id&&(f=CObj.getById(this.body2Id).body);null==d||null==f||d.type==p2.Body.STATIC&&f.type==p2.Body.STATIC||(this.joint=new p2.RevoluteConstraint(d,f,{collideConnected:this.collideConnected,worldPivot:[this.x,this.y]}));null!=this.joint&&(0!=this.rate&&(d.motionState!=p2.Body.STATIC&&(d.userData.motorSpeed=this.rate),f.motionState!=p2.Body.STATIC&&
(f.userData.motorSpeed=this.rate),this.joint.motor=!0),world.addConstraint(this.joint))};extend(CTextField,CObj,!0);function CTextField(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="text,fontFamily,fontSize,align,tint, "}CTextField.prototype._destroy=function(){CObj.prototype._destroy.call(this)};
Object.defineProperty(CTextField.prototype,"text",{get:function(){return this._text},set:function(c){this._text=c;this.gfx&&(this.gfx.text=c,this.gfx.updateText(),c=this.gfx.getLocalBounds(),this.offsetX="center"==this.align?-c.width/2*window.addScale:"right"==this.align?-c.width*window.addScale:0,this.offsetY=-c.height,this.updateGraphics(!0))}});CTextField.hashCode=function(c){for(var d=0,f=0;f<c.length;f++)d=c.charCodeAt(f)+((d<<5)-d);return d};
CTextField.convertSpaces=function(c){var d=c.match(/==/g);d&&(breaks=d.length);return c.replace(/==/g,"\n")};
CTextField.createTextField=function(c){var d=0,f;for(f in PIXI.BitmapText.fonts){if(!c.fontFamily||d==c.fontFamily){font=PIXI.BitmapText.fonts[f];break}d++}c.fontSize=void 0==c.fontSize?30/window.addScale:c.fontSize/window.addScale;d=c.fontSize+"px "+font.font;c.align&&""!=c.align||(c.align="left");c.text&&(c.text=this.convertSpaces(c.text));d=new PIXI.BitmapText(c.text,{font:d,align:"center"});"0xffffff"!=c.tint&&void 0!=c.tint&&(d.tint=parseInt(c.tint));d.breaks=0;d.fs=c.fontSize;return d};
CTextField.prototype.init=function(){CObj.prototype.init.call(this);this.gfx=CTextField.createTextField(this);this.gfx.scale.x*=window.addScale;this.gfx.scale.y*=window.addScale;this.text=this.text;this.getText();this.updateGraphics();StageManager.inst.fontLayer.addChild(this.gfx)};extend(Chest,CObj,!0);function Chest(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.amount=1E3}
Chest.prototype.setElectricity=function(c){CObj.prototype.setElectricity.call(this,c);if(c&&!this.preDestroy){this.preDestroy=!0;PlayerData.inst.score+=this.amount;gameStage.updateScore();Coin.generateTextParticle(this);ZSound.Play("unlock");var d=this;CObj.checkType(this.gfx,PIXI.MovieClip)&&this.gfx.gotoAndStop(1);new TweenMax(this.gfx,.8,{alpha:0,ease:Linear.easeNone,onComplete:function(){d.destroy()}})}this.sElectricity=c};extend(Coin,CObj,!0);
function Coin(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.amount=100}Coin.prototype.onContactBegin=function(c){c.userData!=gameStage.dragObject&&void 0==this.preDestroy&&(this.preDestroy=!0,this.onGet())};Coin.prototype._destroy=function(){CObj.prototype._destroy.call(this)};
Coin.generateTextParticle=function(c){var d=pool.Pop("textParticle");d&&(d.x=c.x,d.y=c.y,d.gfx.alpha=1,d.text=c.amount.toString(),StageManager.inst.fontLayer.addChild(d.gfx),new TweenMax(d.gfx,.3,{delay:.55,alpha:0,ease:Linear.easeIn}),new TweenMax(d,.85,{y:d.y-80,ease:Linear.easeIn,onComplete:function(){rp(d.gfx);pool.Push(d)}}))};
Coin.prototype.onGet=function(){PlayerData.inst.score+=this.amount;gameStage.updateScore();var c=pool.Pop("coinCollect");if(c){rp(c);rp(this.gfx);StageManager.inst.ol.addChild(c);this.gfx=c;this.updateGraphics();var d=this;c.animationSpeed=.6;c.loop=!1;c.gotoAndPlay(0);this.gfx.onComplete=function(){setTimeout(function(){d.gfx&&pool.Push(d.gfx);rp(d.gfx);d.gfx=null;d.destroy()},15,d)}}else this.destroy();Coin.generateTextParticle(this);ZSound.Play("collectMoney")};
Coin.prototype.process=function(){CObj.prototype.process.call(this);this.rotatingSprites.rotation+=.05*gameStage._worldSpeed;this.y=this.baseY+6*Math.sin(new Date/200+this.baseY%50/5)};Coin.prototype.onContactEnd=function(c){};
Coin.prototype.init=function(c){CObj.prototype.init.call(this);this.sensor=!0;this.body.mass=0;this.gfx.width=40;this.gfx.height=40;this.baseY=this.y;this.rotatingSprites=new PIXI.Sprite(PIXI.Texture.fromFrame("monetabg.png"));this.rotatingSprites.scale.x=.95;this.rotatingSprites.scale.y=.95;this.rotatingSprites.anchor.x=.5;this.rotatingSprites.anchor.y=.5;this.gfx.addChild(this.rotatingSprites);this.gfx.gotoAndPlay(Math.round(this.x/50)%8)};extend(Tomato,CObj,!0);
function Tomato(c,d,f,k){CObj.apply(this,[c,d,f,k])}Tomato.prototype.process=function(){CObj.prototype.process.call(this)};Tomato.prototype.init=function(){CObj.prototype.init.call(this);this.body.allowRotation=!0};
Tomato.prototype.process=function(){CObj.prototype.process.call(this);this.y>SCR_HEIGHT+200&&(this.mechanicalDestroy=!1,this.destroy());0<this.x&&0<this.y&&this.x<SCR_WIDTH&&this.height<SCR_HEIGHT&&300<this.body.velocity[1]&&!this.slowMo&&(new TweenMax(gameStage,.7,{worldSpeed:.12,yoyo:!0,repeat:1,ease:Quad.easeOut}),this.slowMo=!0)};
Tomato.prototype.destroy=function(){if(!this.mechanicalDestroy){gameStage.loseGame();var c=pool.Pop("expl");c&&(c.x=this.x,c.y=this.y,c.gfx.animationSpeed=.85,c.gfx.gotoAndPlay(0),c.gfx.loop=!1,c.gfx.scale.x=1.55,c.gfx.scale.y=1.55,c.updateGraphics(),c.gfx.parent&&c.gfx.parent.removeChild(c.gfx),StageManager.inst.ol.addChild(c.gfx),c.gfx.onComplete=function(){setTimeout(function(){c.gfx.parent.removeChild(c.gfx);pool.Push(c)},15,c)});var d=this.gfx,f=d.scale.x,k=d.scale.y;new TweenMax(d.scale,
.2,{y:1.4*k,x:.6*f});new TweenMax(d.scale,.15,{delay:.2,x:1.4*f,y:.6*k});d.parent.removeChild(d);StageManager.inst.ol.addChild(d);new TweenMax(d,.07,{delay:.35-.07,alpha:0,onComplete:function(){d.parent.removeChild(d)}});new TweenMax(d,.35,{y:d.y-35,rotation:d.rotation+10.05,ease:Linear.easeIn});this.gfx=null}CObj.prototype.destroy.call(this)};
Tomato.prototype.setElectricity=function(c){if(c&&!this.preDestroy){this.preDestroy=!0;var d=this;TweenMax.delayedCall(.25,function(){d.destroy()})}CObj.prototype.setElectricity.call(this,c)};extend(Chicken,CObj,!0);function Chicken(c,d,f,k){CObj.apply(this,[c,d,f,k]);Chicken.count?Chicken.count++:Chicken.count=1;this.amount=200}Chicken.prototype.process=function(){CObj.prototype.process.call(this);this.y>SCR_HEIGHT+200&&this.destroy()};
Chicken.prototype.destroy=function(){if(!this.doRemove){Chicken.count--;if(void 0==this.mechanicalDestroy){var c=CObj.DeserializeCObj({drawAsTexture:!1,friction:1,offsetR:0,baseDim:{y:50,x:80},allowRotation:!0,cls:"ZEngine::ZObj",rotation:0,layer:1,density:1,elasticity:0,autoPlay:!1,isClip:!1,scaleX:.8,actions:[],offsetX:0,scaleY:.8,offsetY:0,frictionStatic:2,body:{shapes:[{localVerts:[{y:-1.9074413194729098,x:-44.43949885053283},{y:-21.574107986139566,x:-11.772832183866154},{y:15.759225347193777,
x:17.560501149467175},{y:28.425892013860434,x:16.560501149467175},{y:27.425892013860434,x:-33.77283218386616}],localCOM:{y:8.129663541695152,x:-13.782723371689402},type:"POLYGON"},{localVerts:[{y:-21.57410798613957,x:-11.772832183866154},{y:-18.57410798613957,x:35.56050114946717},{y:15.759225347193773,x:17.560501149467175}],localCOM:{y:-8.129663541695122,x:13.782723371689395},type:"POLYGON"}],type:"DYNAMIC"},frictionRolling:.001,userData:"",x:-131.56050114946717,y:261.57410798613955,clip:"pussyatlas.png.chickendead",
fps:30,id:"",isSensor:!1},!1);CObj.setBodyMass(c.body,2);c.isConductor=!1;c.gfx=new PIXI.Sprite(PIXI.Texture.fromFrame("chickendead.png"));c.gfx.anchor.x=.5;c.gfx.anchor.y=.63;c.gfx.scale.x=.65*window.addScale;c.gfx.scale.y=.65*window.addScale;c.x=this.x;c.y=this.y;for(var d=[],f=0;f<c.body.shapes.length;++f)d.push(c.body.shapes[f]);for(f=0;f<d.length;++f)d[f].collisionGroup=world.cgDYNAMIC,d[f].collisionMask=world.cgSTATIC;c.body.force[1]=-18E3;c.body.angularForce=18E3*(Math.random()-.5);PlayerData.inst.score+=
this.amount;gameStage.updateScore();Coin.generateTextParticle(this);gameStage.grilled++;StageManager.inst.ol.addChildAt(c.gfx,1);0==Chicken.count&&gameStage.doProcess&&(gameStage.losing||gameStage.doLevelComplete())}CObj.prototype.destroy.call(this)}};
Chicken.prototype.destroyFX=function(){var c=this,d=pool.Pop("chickeneffect");d&&(this.gfx.parent.removeChild(this.gfx),this.gfx=d,this.gfx.scale.x=.95*window.addScale,this.gfx.scale.y=.95*window.addScale,this.updateGraphics(),this.gfx.parent||StageManager.inst.ol.addChildAt(d,StageManager.inst.ol.children.length-2),this.gfx.animationSpeed=.5,this.gfx.gotoAndPlay(0));TweenMax.to(this.gfx.scale,.1,{x:.75*window.addScale,y:.75*window.addScale,yoyo:!0,repeat:6});TweenMax.delayedCall(.6,function(){c.gfx&&
(rp(c.gfx),pool.Push(c.gfx),c.gfx=null);c.destroy()})};Chicken.prototype.setElectricity=function(c){CObj.prototype.setElectricity.call(this);c&&!this.preDestroy&&(this.destroyFX(),this.preDestroy=!0,ZSound.Play("electro1"));this.sElectricity=c};extend(LiveObj,CObj,!0);function LiveObj(c,d,f,k,h){CObj.apply(this,[c,d,f,h]);this._hp=this.maxHp=k;this.gfx.click=function(a){this.gameobject.takeDamage(30)}}LiveObj.prototype.takeDamage=function(c){this.hp-=c};LiveObj.prototype.destroy=function(){CObj.prototype.destroy.call(this)};
Object.defineProperty(LiveObj.prototype,"hp",{set:function(c){c>=this.maxHp?this._hp=this.maxHp:(this._hp=c,0>=c&&this.destroy())},get:function(){return this._hp}});extend(Generator,CObj,!0);function Generator(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.isConductor=!0;Generator.gens||(Generator.gens=[]);Generator.gens.push(this)}Generator.prototype.destroy=function(){this.doRemove||(Generator.gens.splice(Generator.gens.indexOf(this),1),CObj.prototype.destroy.call(this))};
Generator.electrifyNeighbours=function(c){if(c.connected){c.sElectricity=!0;for(var d=0;d<c.connected.length;++d)!c.connected[d].sElectricity&&c.connected[d].isConductor&&Generator.electrifyNeighbours(c.connected[d])}};Generator.prototype.genProcess=function(){Generator.electrifyNeighbours(this)};Generator.resetElectricity=function(){for(var c=CObj.objects.length,d=0;d<c;++d)CObj.objects[d].body&&(CObj.objects[d].sElectricity=!1)};extend(PanelSpeed,CObj,!0);
function PanelSpeed(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="panelSpeed"}PanelSpeed.prototype.init=function(){for(var c=new p2.Material,d=0;d<world.materials.length;++d){var f=new p2.ContactMaterial(c,world.materials[d],{surfaceVelocity:this.panelSpeed});world.addContactMaterial(f)}f=this.body.shapes.length;for(d=0;d<f;++d)this.body.shapes[d].material=c;CObj.prototype.init.call(this)};extend(Propeller,CObj,!0);
function Propeller(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="power, direction, "}Propeller.prototype.setElectricity=function(c){c?this.gfx.play():this.gfx.stop();CObj.prototype.setElectricity.call(this,c)};Propeller.prototype.destroy=function(){this.doRemove||(this.sensorObj.destroy(),this.sensorObj.bodiesToPush,this.sensorObj=this.sensorObj.owner=null,CObj.prototype.destroy.call(this))};
Propeller.prototype.process=function(){this.doRemove||(CObj.prototype.process.call(this),this.sensorObj.x=this.x,this.sensorObj.y=this.y,this.sensorObj.rotation=this.rotation)};
Propeller.prototype.init=function(){var c=new p2.Body({mass:1}),d;d=0<this.gfx.scale.x?-1:1;var f=new p2.Convex(0<d?[[0,-18],[240,-90],[240,90],[0,18]]:[[0,-18],[0,18],[-240,90],[-240,-90]]);c.addShape(f);this.sensorObj=new CObj(this.x,this.y,null,c);this.sensorObj.dir=d;var k=this.body;this.sensorObj.owner=this;this.sensorObj.bodiesToPush=[];this.sensorObj.sensor=!0;this.sensorObj.body.mass=0;gameStage.sensorObjBody=this.sensorObj.body;this.sensorObj.forcePower=62.5*this.power;this.sensorObj.process=
function(){if(!this.doRemove&&(CObj.prototype.process.call(this),this.owner.sElectricity))for(var c=0;c<this.bodiesToPush.length;++c){var a=this.rotation+Math.PI/2*(this.dir-1),b=Math.cos(a),a=Math.sin(a),d=vec2.dist(this.bodiesToPush[c].position,this.body.position),d=1-Math.pow(d/400,1.8);this.bodiesToPush[c].applyForce([this.forcePower*d*b,this.forcePower*d*a],[this.bodiesToPush[c].position[0],this.bodiesToPush[c].position[1]])}};this.sensorObj.onContactBegin=function(c){c.motionState!=p2.Body.STATIC&&
c!=k&&this.bodiesToPush.push(c)};this.sensorObj.onContactEnd=function(c){c!=k&&(c=this.bodiesToPush.indexOf(c),0<=c&&this.bodiesToPush.splice(c,1))};CObj.prototype.init.call(this)};extend(PowerField,CObj,!0);function PowerField(c,d,f,k){CObj.apply(this,[c,d,f,k])}PowerField.prototype.destroy=function(){this.doRemove||CObj.prototype.destroy.call(this)};
PowerField.prototype.setElectricity=function(c){CObj.prototype.setElectricity.call(this,c);if(this.gfx)if(this.sElectricity)if(this.firstRun)for(6!=this.gfx.currentFrame&&(this.gfx.loop=!1,this.gfx.play()),c=0;c<this.body.shapes.length;++c)this.body.shapes[c].collisionMask=world.cgDYNAMIC;else this.firstRun=!0;else for(1<this.gfx.currentFrame&&(this.gfx.loop=!1,this.gfx.gotoAndStop(0)),c=0;c<this.body.shapes.length;++c)this.body.shapes[c].collisionMask=8};extend(Notification,CObj,!0);
function Notification(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="text,fontFamily,fontSize,align,destroyAfter, "}Notification.prototype.destroy=function(){this.doRemove||(CObj.prototype.destroy.call(this),this.textField.parent.removeChild(this.textField),this.click=this.textField=null)};
Object.defineProperty(Notification.prototype,"text",{get:function(){return this._text},set:function(c){this._text=c;if(this.gfx&&this.textField){var d=this.textField;d.setText(c);d.updateText();c=d.getLocalBounds();d.x=-c.width/2;d.y=-c.height;this.updateGraphics()}}});Notification.prototype.updateGraphics=function(){this.doRemove||CObj.prototype.updateGraphics.call(this)};
Notification.removeNot=function(c){c.doRemove||c.preRemove||(c.preRemove=!0,new TweenMax(c.textField,.6,{alpha:0}),new TweenMax(c.gfx,.6,{alpha:0,onComplete:function(){c.destroy()}}))};
Notification.prototype.init=function(){CObj.prototype.init.call(this);this.gfx.interactive=!0;this.align="left";this.fontSize=20;this.textField=CTextField.createTextField(this);this.gfx.addChild(this.textField);this.getText();this.text=this.text;var c=this.gfx;this.baseScaleX=c.scale.x;this.baseScaleY=c.scale.y;this.updateGraphics();var d=this;this.gfx.click=function(){Notification.removeNot(d)};this.gfx.tap=this.gfx.click;TweenMax.delayedCall(this.destroyAfter/1E3,Notification.removeNot,
[d]);this.rotation=-.05;new TweenMax(this,.7,{rotation:.05,ease:Linear.easeNone,yoyo:!0,repeat:-1});new TweenMax(this.gfx.scale,.7,{x:this.gfx.scale.x+.06,y:this.gfx.scale.y+.06,yoyo:!0,repeat:-1})};extend(CNotArrow,CObj,!0);function CNotArrow(c,d,f,k){CObj.apply(this,[c,d,f,k]);this.PublicFields+="objectsToPoint, "}
CNotArrow.prototype.process=function(){var c=this.x-this.basePositionX,d=this.y-this.basePositionY,f=Math.sqrt(c*c+d*d);0!=f&&(this.rotation=Math.atan2(c/f,d/f));this.x=this.left;this.y=this.top;CObj.prototype.process.call(this)};
CNotArrow.prototype.init=function(){this.gfx=new PIXI.DisplayObjectContainer;this.updateGraphics();var c=new PIXI.Sprite(PIXI.Texture.fromFrame("arrow1.png"));c.anchor.x=.5;c.anchor.y=0;new TweenMax(c,2,{y:c.y-15,yoyo:!0,repeat:-1});this.gfx.addChild(c);StageManager.inst.fg.addChild(this.gfx);this.basePositionX=this.x;this.basePositionY=this.y;for(var c=this.objectsToPoint.split(";"),d=[],f,k=0;k<c.length;++k)(f=CObj.getById(c[k]))&&d.push({left:f.x,top:f.y});this.left=d[0].left;this.top=
d[0].top;this.x=d[0].left;this.y=d[0].top;new TweenMax(this,3,{bezier:{curviness:1,values:d},ease:Linear.easeNone,repeat:-1,yoyo:!0})};
